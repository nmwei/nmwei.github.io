1:"$Sreact.fragment"
2:I[1478,["545","static/chunks/c16f53c3-5b47b7f1ae12d8f6.js","874","static/chunks/874-7cca39d2e0ddd8b8.js","430","static/chunks/430-27ea613f983ffbaf.js","177","static/chunks/app/layout-4f2fc603b9b897e8.js"],"ThemeProviders"]
3:I[9243,["545","static/chunks/c16f53c3-5b47b7f1ae12d8f6.js","874","static/chunks/874-7cca39d2e0ddd8b8.js","430","static/chunks/430-27ea613f983ffbaf.js","177","static/chunks/app/layout-4f2fc603b9b897e8.js"],""]
4:I[7392,["545","static/chunks/c16f53c3-5b47b7f1ae12d8f6.js","874","static/chunks/874-7cca39d2e0ddd8b8.js","430","static/chunks/430-27ea613f983ffbaf.js","177","static/chunks/app/layout-4f2fc603b9b897e8.js"],"KBarSearchProvider"]
5:I[6874,["874","static/chunks/874-7cca39d2e0ddd8b8.js","63","static/chunks/63-2b4206848ffc60fb.js","909","static/chunks/app/blog/%5B...slug%5D/page-28d33eed3f173442.js"],""]
6:I[4159,["545","static/chunks/c16f53c3-5b47b7f1ae12d8f6.js","874","static/chunks/874-7cca39d2e0ddd8b8.js","430","static/chunks/430-27ea613f983ffbaf.js","177","static/chunks/app/layout-4f2fc603b9b897e8.js"],"KBarButton"]
7:I[1762,["545","static/chunks/c16f53c3-5b47b7f1ae12d8f6.js","874","static/chunks/874-7cca39d2e0ddd8b8.js","430","static/chunks/430-27ea613f983ffbaf.js","177","static/chunks/app/layout-4f2fc603b9b897e8.js"],"default"]
8:I[7298,["545","static/chunks/c16f53c3-5b47b7f1ae12d8f6.js","874","static/chunks/874-7cca39d2e0ddd8b8.js","430","static/chunks/430-27ea613f983ffbaf.js","177","static/chunks/app/layout-4f2fc603b9b897e8.js"],"default"]
9:I[7555,[],""]
a:I[1295,[],""]
c:I[9665,[],"OutletBoundary"]
f:I[9665,[],"ViewportBoundary"]
11:I[9665,[],"MetadataBoundary"]
13:I[6614,[],""]
:HL["/_next/static/media/7cba1811e3c25a15-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/f71128b9ac16cc11.css","style"]
:HL["/_next/static/css/5fa3e5bae12b17db.css","style"]
:HL["/_next/static/css/206c8cd9f1135cc1.css","style"]
0:{"P":null,"b":"zD_bYF5SZMVS-oUQR0xRK","p":"","c":["","blog","Webpack","Webpack4-0%E5%8E%9F%E7%90%86"],"i":false,"f":[[["",{"children":["blog",{"children":[["slug","Webpack/Webpack4-0%E5%8E%9F%E7%90%86","c"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f71128b9ac16cc11.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/5fa3e5bae12b17db.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"zh-cn","className":"__variable_bc0dcf scroll-smooth","suppressHydrationWarning":true,"children":[["$","link",null,{"rel":"apple-touch-icon","sizes":"76x76","href":"/static/favicons/apple-touch-icon.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"32x32","href":"/static/favicons/favicon-32x32.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"16x16","href":"/static/favicons/favicon-16x16.png"}],["$","link",null,{"rel":"manifest","href":"/static/favicons/site.webmanifest"}],["$","link",null,{"rel":"mask-icon","href":"/static/favicons/safari-pinned-tab.svg","color":"#5bbad5"}],["$","meta",null,{"name":"msapplication-TileColor","content":"#000000"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: light)","content":"#fff"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: dark)","content":"#000"}],["$","link",null,{"rel":"alternate","type":"application/rss+xml","href":"/feed.xml"}],["$","body",null,{"className":"bg-white pl-[calc(100vw-100%)] text-black antialiased dark:bg-gray-950 dark:text-white","children":["$","$L2",null,{"children":[["$undefined","$undefined","$undefined",["$","$L3",null,{"async":true,"defer":true,"src":"https://analytics.umami.is/script.js"}],"$undefined","$undefined"],["$","section",null,{"className":"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0","children":[["$","$L4",null,{"kbarConfig":{"searchDocumentsPath":"/search.json"},"children":[["$","header",null,{"className":"flex items-center w-full bg-white dark:bg-gray-950 justify-between py-10","children":[["$","$L5",null,{"className":"break-words","href":"/","aria-label":"我的博客","children":["$","div",null,{"className":"flex items-center justify-between","children":[["$","div",null,{"className":"mr-3","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","xmlnsXlink":"http://www.w3.org/1999/xlink","width":53.87,"height":43.61,"viewBox":"344.564 330.278 111.737 91.218","children":[["$","defs",null,{"children":[["$","linearGradient",null,{"id":"logo_svg__b","x1":420.97,"x2":420.97,"y1":331.28,"y2":418.5,"gradientUnits":"userSpaceOnUse","children":[["$","stop",null,{"offset":"0%","style":{"stopColor":"#06b6d4","stopOpacity":1}}],["$","stop",null,{"offset":"100%","style":{"stopColor":"#67e8f9","stopOpacity":1}}]]}],["$","linearGradient",null,{"id":"logo_svg__d","x1":377.89,"x2":377.89,"y1":331.28,"y2":418.5,"gradientUnits":"userSpaceOnUse","children":[["$","stop",null,{"offset":"0%","style":{"stopColor":"#06b6d4","stopOpacity":1}}],["$","stop",null,{"offset":"100%","style":{"stopColor":"#67e8f9","stopOpacity":1}}]]}],["$","path",null,{"id":"logo_svg__a","d":"M453.3 331.28v28.57l-64.66 58.65v-30.08z"}],["$","path",null,{"id":"logo_svg__c","d":"M410.23 331.28v28.57l-64.67 58.65v-30.08z"}]]}],["$","use",null,{"xlinkHref":"#logo_svg__a","fill":"url(#logo_svg__b)"}],["$","use",null,{"xlinkHref":"#logo_svg__c","fill":"url(#logo_svg__d)"}]]}]}],["$","div",null,{"className":"hidden h-6 text-2xl font-semibold sm:block","children":"我的博客"}]]}]}],["$","div",null,{"className":"flex items-center space-x-4 leading-5 sm:-mr-6 sm:space-x-6","children":[["$","div",null,{"className":"no-scrollbar hidden max-w-40 items-center gap-x-4 overflow-x-auto sm:flex md:max-w-72 lg:max-w-96","children":[["$","$L5","博客",{"className":"hover:text-primary-500 dark:hover:text-primary-400 m-1 font-medium text-gray-900 dark:text-gray-100","href":"/blog","children":"博客"}],["$","$L5","标签",{"className":"hover:text-primary-500 dark:hover:text-primary-400 m-1 font-medium text-gray-900 dark:text-gray-100","href":"/tags","children":"标签"}],["$","$L5","项目",{"className":"hover:text-primary-500 dark:hover:text-primary-400 m-1 font-medium text-gray-900 dark:text-gray-100","href":"/projects","children":"项目"}],["$","$L5","关于",{"className":"hover:text-primary-500 dark:hover:text-primary-400 m-1 font-medium text-gray-900 dark:text-gray-100","href":"/about","children":"关于"}]]}],["$","$L6",null,{"aria-label":"Search","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","strokeWidth":1.5,"stroke":"currentColor","className":"hover:text-primary-500 dark:hover:text-primary-400 h-6 w-6 text-gray-900 dark:text-gray-100","children":["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","d":"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}]}]}],["$","$L7",null,{}],["$","$L8",null,{}]]}]]}],["$","main",null,{"className":"mb-auto","children":["$","$L9",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","div",null,{"className":"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6","children":[["$","div",null,{"className":"space-x-2 pt-6 pb-8 md:space-y-5","children":["$","h1",null,{"className":"text-6xl leading-9 font-extrabold tracking-tight text-gray-900 md:border-r-2 md:px-6 md:text-8xl md:leading-14 dark:text-gray-100","children":"404"}]}],["$","div",null,{"className":"max-w-md","children":[["$","p",null,{"className":"mb-4 text-xl leading-normal font-bold md:text-2xl","children":"Sorry we couldn't find this page."}],["$","p",null,{"className":"mb-8","children":"But dont worry, you can find plenty of other things on our homepage."}],["$","$L5",null,{"className":"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm leading-5 font-medium text-white shadow-xs transition-colors duration-150 hover:bg-blue-700 focus:outline-hidden dark:hover:bg-blue-500","href":"/","children":"Back to homepage"}]]}]]}],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}],["$","footer",null,{"children":["$","div",null,{"className":"mt-16 flex flex-col items-center","children":[["$","div",null,{"className":"mb-3 flex space-x-4","children":[["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"mailto:254060001@qq.com","children":[["$","span",null,{"className":"sr-only","children":"mail"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 20 20","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"Mail"}],["$","path",null,{"d":"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}],["$","path",null,{"d":"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"}]]}]]}],["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://github.com","children":[["$","span",null,{"className":"sr-only","children":"github"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"GitHub"}],["$","path",null,{"d":"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"}]]}]]}],null,null,null,null,null,null,null,null,null]}],["$","div",null,{"className":"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400","children":[["$","div",null,{"children":"倪梦威"}],["$","div",null,{"children":" • "}],["$","div",null,{"children":"© 2025"}],["$","div",null,{"children":" • "}],["$","$L5",null,{"className":"break-words","href":"/","children":"我的博客"}]]}],false]}]}]]}]]}]}]]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L9",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","Webpack/Webpack4-0%E5%8E%9F%E7%90%86","c"],["$","$1","c",{"children":[null,["$","$L9",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$Lb","$undefined",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/206c8cd9f1135cc1.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$Lc",null,{"children":["$Ld","$Le",null]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","rJBLpFRXzARK2ZvzBTlKS",{"children":[["$","$Lf",null,{"children":"$L10"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],["$","$L11",null,{"children":"$L12"}]]}],false]],"m":"$undefined","G":["$13","$undefined"],"s":false,"S":true}
14:I[1839,["874","static/chunks/874-7cca39d2e0ddd8b8.js","63","static/chunks/63-2b4206848ffc60fb.js","909","static/chunks/app/blog/%5B...slug%5D/page-28d33eed3f173442.js"],"default"]
15:I[3063,["874","static/chunks/874-7cca39d2e0ddd8b8.js","63","static/chunks/63-2b4206848ffc60fb.js","909","static/chunks/app/blog/%5B...slug%5D/page-28d33eed3f173442.js"],"Image"]
16:I[2100,["874","static/chunks/874-7cca39d2e0ddd8b8.js","63","static/chunks/63-2b4206848ffc60fb.js","909","static/chunks/app/blog/%5B...slug%5D/page-28d33eed3f173442.js"],"default"]
17:I[1449,["874","static/chunks/874-7cca39d2e0ddd8b8.js","63","static/chunks/63-2b4206848ffc60fb.js","909","static/chunks/app/blog/%5B...slug%5D/page-28d33eed3f173442.js"],"default"]
b:[["$","script",null,{"type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":\"Webpack4-0原理\",\"datePublished\":\"2019-04-17T00:00:00.000Z\",\"dateModified\":\"2019-04-17T00:00:00.000Z\",\"description\":\"Webpack4-0原理相关文章\",\"image\":\"/static/images/webpack.jpg\",\"url\":\"https://nmwei.github.io/blog/Webpack/Webpack4-0原理\",\"author\":[{\"@type\":\"Person\",\"name\":\"倪梦威\"}]}"}}],["$","section",null,{"className":"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0","children":[["$","$L14",null,{}],["$","article",null,{"children":["$","div",null,{"className":"xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700","children":[["$","header",null,{"className":"pt-6 xl:pb-6","children":["$","div",null,{"className":"space-y-1 text-center","children":[["$","dl",null,{"className":"space-y-10","children":["$","div",null,{"children":[["$","dt",null,{"className":"sr-only","children":"Published on"}],["$","dd",null,{"className":"text-base leading-6 font-medium text-gray-500 dark:text-gray-400","children":["$","time",null,{"dateTime":"2019-04-17T00:00:00.000Z","children":"2019年4月17日星期三"}]}]]}]}],["$","div",null,{"children":["$","h1",null,{"className":"text-3xl leading-9 font-extrabold tracking-tight text-gray-900 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14 dark:text-gray-100","children":"Webpack4-0原理"}]}]]}]}],["$","div",null,{"className":"grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0 dark:divide-gray-700","children":[["$","dl",null,{"className":"pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700","children":[["$","dt",null,{"className":"sr-only","children":"Authors"}],["$","dd",null,{"children":["$","ul",null,{"className":"flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-y-8 xl:space-x-0","children":[["$","li","倪梦威",{"className":"flex items-center space-x-2","children":[["$","$L15",null,{"src":"/static/images/avatar.png","width":38,"height":38,"alt":"avatar","className":"h-10 w-10 rounded-full"}],["$","dl",null,{"className":"text-sm leading-5 font-medium whitespace-nowrap","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"className":"text-gray-900 dark:text-gray-100","children":"倪梦威"}],["$","dt",null,{"className":"sr-only","children":"Twitter"}],["$","dd",null,{"children":null}]]}]]}]]}]}]]}],["$","div",null,{"className":"divide-y divide-gray-200 xl:col-span-3 xl:row-span-2 xl:pb-0 dark:divide-gray-700","children":[["$","div",null,{"className":"prose dark:prose-invert max-w-none pt-10 pb-8","children":[["$","h1",null,{"className":"content-header","id":"1-编写一个loader","children":[["$","a",null,{"className":"break-words","href":"#1-编写一个loader","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1. 编写一个Loader"]}],["$","p",null,{"children":"##1.1 初始化项目"}],["$","ol",null,{"children":[["$","li",null,{"children":["创建文件夹 ",["$","code",null,{"children":"make-loader"}]]}],["$","li",null,{"children":["初始化",["$","code",null,{"children":"npm"}],"包 ",["$","code",null,{"children":"➜ make-loader npm init -y"}]]}],["$","li",null,{"children":["安装依赖 ",["$","code",null,{"children":"➜ make-loader npm i webpack webpack-cli --D"}]]}],["$","li",null,{"children":["创建打包入口文件 ",["$","code",null,{"children":"src/index.js"}]]}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name console","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"drew\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]}]}],["$","ol",null,{"start":"5","children":["$","li",null,{"children":["创建打包配置文件 ",["$","code",null,{"children":"webpack.config.js"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["module",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"exports"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"mode"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"development\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"entry"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property literal-property","children":"main"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'./src/index.js'"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","ol",null,{"start":"6","children":["$","li",null,{"children":["添加打包命令 ",["$","code",null,{"children":"package.json"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property string-property","children":"\"scripts\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property string-property","children":"\"build\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"webpack\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","ol",null,{"start":"7","children":["$","li",null,{"children":["打包输出 ",["$","code",null,{"children":"npm run build"}]]}]}],["$","h2",null,{"className":"content-header","id":"12-最简单的loader","children":[["$","a",null,{"className":"break-words","href":"#12-最简单的loader","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1.2 最简单的loader"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","code",null,{"children":"loaders"}],["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.webpackjs.com/api/loaders/","children":"文档"}]]}],["$","li",null,{"children":["创建",["$","code",null,{"children":"loader"}]," ",["$","code",null,{"children":"loaders/replaceLoader.js"}]]}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["module",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method function-variable method-variable","children":"exports"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"source"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//console.log(source);  //console.log(\"drew\");"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," source",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"replace"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'drew'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"'nmwei'"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":["不能使用箭头函数，否则",["$","code",null,{"children":"this"}],"指向错误，无法使用",["$","code",null,{"children":"this.XXX"}],"的",["$","code",null,{"children":"api"}],"。"]}]}],["$","ol",null,{"start":"3","children":["$","li",null,{"children":["使用",["$","code",null,{"children":"loader"}]," ",["$","code",null,{"children":"webpack.config.js"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"module"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property literal-property","children":"rules"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property literal-property","children":"test"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token regex","children":[["$","span",null,{"className":"token regex-delimiter","children":"/"}],["$","span",null,{"className":"token language-regex regex-source","children":[["$","span",null,{"className":"token escape special-escape","children":"\\."}],"js",["$","span",null,{"className":"token function anchor","children":"$$"}]]}],["$","span",null,{"className":"token regex-delimiter","children":"/"}]]}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property literal-property","children":"use"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line","children":["        path",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"resolve"}],["$","span",null,{"className":"token punctuation","children":"("}],"__dirname",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"'./loaders/replaceLoader.js'"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","ol",null,{"start":"4","children":["$","li",null,{"children":["打包输出 ",["$","code",null,{"children":"npm run build"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token comment doc-comment","children":["/***/ (function(module, exports) ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token comment doc-comment","children":"eval(\"console.log(\\\"nmwei\\\");\\n\\n//# sourceURL=webpack:///./src/index.js?\");\n"}]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment doc-comment","children":"/***/"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment doc-comment","children":"/******/"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],["$","h2",null,{"className":"content-header","id":"13-loader传参","children":[["$","a",null,{"className":"break-words","href":"#13-loader传参","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1.3 loader传参"]}],["$","ol",null,{"children":["$","li",null,{"children":["编辑",["$","code",null,{"children":"loader"}]," ",["$","code",null,{"children":"loaders/replaceLoader.js"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//不能写箭头函数，否则this指向错误"}],"\n"]}],["$","span",null,{"className":"code-line","children":["module",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method function-variable method-variable","children":"exports"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"source"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//console.log(source); //console.log(\"drew\");"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," source",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"replace"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'drew'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"query"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"name"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":["通过",["$","code",null,{"children":"this.query"}],"获取参数。"]}]}],["$","ol",null,{"start":"2","children":["$","li",null,{"children":["编辑打包配置文件 ",["$","code",null,{"children":"webpack.config.js"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"module"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property literal-property","children":"rules"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property literal-property","children":"test"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token regex","children":[["$","span",null,{"className":"token regex-delimiter","children":"/"}],["$","span",null,{"className":"token language-regex regex-source","children":[["$","span",null,{"className":"token escape special-escape","children":"\\."}],"js",["$","span",null,{"className":"token function anchor","children":"$$"}]]}],["$","span",null,{"className":"token regex-delimiter","children":"/"}]]}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property literal-property","children":"use"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token property literal-property","children":"loader"}],["$","span",null,{"className":"token operator","children":":"}]," path",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"resolve"}],["$","span",null,{"className":"token punctuation","children":"("}],"__dirname",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"'./loaders/replaceLoader.js'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token property literal-property","children":"options"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token property literal-property","children":"name"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'nimengwei'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","ol",null,{"start":"3","children":["$","li",null,{"children":["打包输出 ",["$","code",null,{"children":"npm run build"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token comment doc-comment","children":["/***/ (function(module, exports) ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token comment doc-comment","children":"eval(\"console.log(\\\"nimengwei\\\");\\n\\n//# sourceURL=webpack:///./src/index.js?\");\n"}]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment doc-comment","children":"/***/"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment doc-comment","children":"/******/"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],["$","ol",null,{"start":"4","children":["$","li",null,{"children":["使用",["$","code",null,{"children":"loader-utils"}],"获取参数 (1) 安装依赖 ",["$","code",null,{"children":"➜ make-loader npm i loader-utils --D"}]," (2) 编辑",["$","code",null,{"children":"loader"}]," ",["$","code",null,{"children":"loaders/replaceLoader.js"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," loaderUtils ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'loader-utils'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["module",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method function-variable method-variable","children":"exports"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"source"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//console.log(source); //console.log(\"drew\");"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," options ",["$","span",null,{"className":"token operator","children":"="}]," loaderUtils",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"getOptions"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," source",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"replace"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'drew'"}],["$","span",null,{"className":"token punctuation","children":","}]," options",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"name"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","h2",null,{"className":"content-header","id":"14-thiscallback","children":[["$","a",null,{"className":"break-words","href":"#14-thiscallback","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1.4 this.callback"]}],["$","ol",null,{"children":["$","li",null,{"children":[["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.webpackjs.com/api/loaders/#this-callback","children":"语法"}]," 一个可以同步或者异步调用的可以返回多个结果的函数。预期的参数是："]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"callback"}],["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"err"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token class-name known-class-name","children":"Error"}]," ",["$","span",null,{"className":"token operator","children":"|"}]," ",["$","span",null,{"className":"token keyword nil null","children":"null"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"content"}],["$","span",null,{"className":"token operator","children":":"}]," string ",["$","span",null,{"className":"token operator","children":"|"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Buffer"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  sourceMap",["$","span",null,{"className":"token operator","children":"?"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"SourceMap"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  meta",["$","span",null,{"className":"token operator","children":"?"}],["$","span",null,{"className":"token operator","children":":"}]," any\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],["$","ul",null,{"children":[["$","li",null,{"children":["第一个参数必须是 ",["$","code",null,{"children":"Error"}]," 或者 ",["$","code",null,{"children":"null"}]]}],["$","li",null,{"children":["第二个参数是一个 ",["$","code",null,{"children":"string"}]," 或者 ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://nodejs.org/api/buffer.html","children":["$","code",null,{"children":"Buffer"}]}],"。"]}],["$","li",null,{"children":["可选的：第三个参数必须是一个可以被",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/mozilla/source-map","children":"这个模块"}],"解析的 ",["$","code",null,{"children":"source map"}],"。"]}],["$","li",null,{"children":["可选的：第四个选项，会被 ",["$","code",null,{"children":"webpack"}]," 忽略，可以是任何东西（例如一些元数据）。"]}]]}],["$","ol",null,{"start":"2","children":["$","li",null,{"children":["编辑",["$","code",null,{"children":"loader"}]," ",["$","code",null,{"children":"loaders/replaceLoader.js"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," loaderUtils ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'loader-utils'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["module",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method function-variable method-variable","children":"exports"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"source"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," options ",["$","span",null,{"className":"token operator","children":"="}]," loaderUtils",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"getOptions"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"callback"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword nil null","children":"null"}],["$","span",null,{"className":"token punctuation","children":","}]," source",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"replace"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'drew'"}],["$","span",null,{"className":"token punctuation","children":","}]," options",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"name"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","h2",null,{"className":"content-header","id":"15-thisasync","children":[["$","a",null,{"className":"break-words","href":"#15-thisasync","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1.5 this.async"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.webpackjs.com/api/loaders/#this-async","children":"文档"}]," 告诉 ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/webpack/loader-runner","children":["$","code",null,{"children":"loader-runner"}]}]," 这个 ",["$","code",null,{"children":"loader"}]," 将会异步地回调。返回 ",["$","code",null,{"children":"this.callback"}],"。"]}],["$","li",null,{"children":["编辑",["$","code",null,{"children":"loader"}]," ",["$","code",null,{"children":"loaders/replaceLoader.js"}]]}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," loaderUtils ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'loader-utils'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["module",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method function-variable method-variable","children":"exports"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"source"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," options ",["$","span",null,{"className":"token operator","children":"="}]," loaderUtils",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"getOptions"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," callback ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"async"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"setTimeout"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator arrow","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"callback"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword nil null","children":"null"}],["$","span",null,{"className":"token punctuation","children":","}]," source",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"replace"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'drew'"}],["$","span",null,{"className":"token punctuation","children":","}]," options",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"name"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"1000"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","h2",null,{"className":"content-header","id":"16-简化loader路径","children":[["$","a",null,{"className":"break-words","href":"#16-简化loader路径","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1.6 简化loader路径"]}],["$","ol",null,{"children":["$","li",null,{"children":["编辑打包配置文件 ",["$","code",null,{"children":"webpack.config.js"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"resolveLoader"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property literal-property","children":"modules"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}]," ",["$","span",null,{"className":"token string","children":"'node_modules'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"'./loaders'"}]," ",["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"module"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property literal-property","children":"rules"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property literal-property","children":"test"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token regex","children":[["$","span",null,{"className":"token regex-delimiter","children":"/"}],["$","span",null,{"className":"token language-regex regex-source","children":[["$","span",null,{"className":"token escape special-escape","children":"\\."}],"js",["$","span",null,{"className":"token function anchor","children":"$$"}]]}],["$","span",null,{"className":"token regex-delimiter","children":"/"}]]}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property literal-property","children":"use"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token property literal-property","children":"loader"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'replaceLoader.js'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token property literal-property","children":"loader"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'replaceLoaderAsync.js'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token property literal-property","children":"options"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token property literal-property","children":"name"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'nimengwei'"}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","h1",null,{"className":"content-header","id":"2-编写一个plugin","children":[["$","a",null,{"className":"break-words","href":"#2-编写一个plugin","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2. 编写一个Plugin"]}],["$","h2",null,{"className":"content-header","id":"21-plugin介绍","children":[["$","a",null,{"className":"break-words","href":"#21-plugin介绍","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.1 Plugin介绍"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","code",null,{"children":"Plugin"}],"和",["$","code",null,{"children":"Loader"}],"的区别 ",["$","code",null,{"children":"Loader"}],"：处理某种类型文件。 ",["$","code",null,{"children":"Plugin"}],"：在打包的某一个时刻做一些事情。 ",["$","code",null,{"children":"webpack"}],"源码中有很大一部分都是基于",["$","code",null,{"children":"Plugin"}],"机制编写的。"]}],["$","li",null,{"children":[["$","code",null,{"children":"compiler"}]," 钩子",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.webpackjs.com/api/compiler-hooks/","children":"文档"}]," ",["$","code",null,{"children":"Compiler"}]," 模块是 ",["$","code",null,{"children":"webpack"}]," 的支柱引擎，它通过 ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.webpackjs.com/api/cli","children":"CLI"}]," 或 ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.webpackjs.com/api/node","children":"Node API"}]," 传递的所有选项，创建出一个 ",["$","code",null,{"children":"compilation"}]," 实例。它扩展(",["$","code",null,{"children":"extend"}],")自 ",["$","code",null,{"children":"Tapable"}]," 类，以便注册和调用插件。大多数面向用户的插件首，会先在 ",["$","code",null,{"children":"Compiler"}],"上注册。"]}],["$","li",null,{"children":["相关钩子 以下生命周期钩子函数，是由 ",["$","code",null,{"children":"compiler"}]," 暴露，可以通过如下方式访问： ",["$","code",null,{"children":"compiler.hooks.someHook.tap(...)"}]," 取决于不同的钩子类型，也可以在某些钩子上访问 ",["$","code",null,{"children":"tapAsync"}]," 和",["$","code",null,{"children":"tapPromise"}],"。 (1) ",["$","code",null,{"children":"AsyncSeriesHook"}],"表示异步的钩子，使用",["$","code",null,{"children":"tapAsync"}]," 或",["$","code",null,{"children":"tapPromise"}],"监听。 (2) ",["$","code",null,{"children":"SyncHook"}],"表示同步的钩子，使用",["$","code",null,{"children":"tap"}],"监听。"]}]]}],["$","div",null,{"className":"w-full overflow-x-auto","children":["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"style":{"textAlign":"center"},"children":"钩子"}],["$","th",null,{"style":{"textAlign":"center"},"children":"类型"}],["$","th",null,{"style":{"textAlign":"center"},"children":"执行时机"}],["$","th",null,{"style":{"textAlign":"center"},"children":"参数"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"style":{"textAlign":"center"},"children":["$","code",null,{"children":"compile"}]}],["$","td",null,{"style":{"textAlign":"center"},"children":["$","code",null,{"children":"SyncHook"}]}],["$","td",null,{"style":{"textAlign":"center"},"children":["一个新的编译(",["$","code",null,{"children":"compilation"}],")创建之后，钩入(",["$","code",null,{"children":"hook into"}],") ",["$","code",null,{"children":"compiler"}],"。"]}],["$","td",null,{"style":{"textAlign":"center"},"children":["$","code",null,{"children":"compilationParams"}]}]]}],["$","tr",null,{"children":[["$","td",null,{"style":{"textAlign":"center"},"children":["$","code",null,{"children":"emit"}]}],["$","td",null,{"style":{"textAlign":"center"},"children":["$","code",null,{"children":"AsyncSeriesHook"}]}],["$","td",null,{"style":{"textAlign":"center"},"children":["生成资源到 ",["$","code",null,{"children":"output"}]," 目录之前。"]}],["$","td",null,{"style":{"textAlign":"center"},"children":["$","code",null,{"children":"compilation"}]}]]}],["$","tr",null,{"children":[["$","td",null,{"style":{"textAlign":"center"},"children":["$","code",null,{"children":"done"}]}],["$","td",null,{"style":{"textAlign":"center"},"children":["$","code",null,{"children":"SyncHook"}]}],["$","td",null,{"style":{"textAlign":"center"},"children":["编译(",["$","code",null,{"children":"compilation"}],")完成。"]}],["$","td",null,{"style":{"textAlign":"center"},"children":["$","code",null,{"children":"stats"}]}]]}],["$","tr",null,{"children":[["$","td",null,{"style":{"textAlign":"center"},"children":"..."}],["$","td",null,{"style":{"textAlign":"center"},"children":"..."}],["$","td",null,{"style":{"textAlign":"center"},"children":"..."}],["$","td",null,{"style":{"textAlign":"center"},"children":"..."}]]}]]}]]}]}],["$","h2",null,{"className":"content-header","id":"22-初始化项目","children":[["$","a",null,{"className":"break-words","href":"#22-初始化项目","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.2 初始化项目"]}],["$","ol",null,{"children":[["$","li",null,{"children":["创建文件夹 ",["$","code",null,{"children":"plugin"}]]}],["$","li",null,{"children":["初始化",["$","code",null,{"children":"npm"}],"包 ",["$","code",null,{"children":"npm init -y"}]]}],["$","li",null,{"children":["安装依赖 ",["$","code",null,{"children":"npm i webpack webpack-cli --D"}]]}],["$","li",null,{"children":["创建打包入口文件 ",["$","code",null,{"children":"src/index.js"}]]}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name console","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"hello world!\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]}]}],["$","ol",null,{"start":"5","children":["$","li",null,{"children":["创建打包配置文件 ",["$","code",null,{"children":"webpack.config.js"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["module",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"exports"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"mode"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"development\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"entry"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property literal-property","children":"main"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'./src/index.js'"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","ol",null,{"start":"6","children":["$","li",null,{"children":["添加打包命令 ",["$","code",null,{"children":"package.json"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property string-property","children":"\"scripts\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property string-property","children":"\"build\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"webpack\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","ol",null,{"start":"7","children":["$","li",null,{"children":["打包输出 ",["$","code",null,{"children":"npm run build"}]]}]}],["$","h2",null,{"className":"content-header","id":"23-编写plugin","children":[["$","a",null,{"className":"break-words","href":"#23-编写plugin","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.3 编写Plugin"]}],["$","ol",null,{"children":["$","li",null,{"children":["创建插件文件 ",["$","code",null,{"children":"plugins/copyright-webpack-plugin.js"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"CopyRightWebpackPlugin"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"constructor"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"options"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"//console.log(options) //{ name: 'drew' }"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"apply"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"compiler"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"//compile为同步的钩子，使用tap监听"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    compiler",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"hooks"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"compile"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"tap"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'CopyRightWebpackPlugin'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"compilationParams"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator arrow","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token class-name console","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'compile'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"//emit为异步的钩子，使用tapAsync或tapPromise监听"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    compiler",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"hooks"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"emit"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"tapAsync"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'CopyRightWebpackPlugin'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":["compilation",["$","span",null,{"className":"token punctuation","children":","}]," cb"]}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator arrow","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      compilation",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"assets"}],["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"'copyright.txt'"}],["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token function function-variable","children":"source"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," ",["$","span",null,{"className":"token string","children":"'copyright by nimengwei'"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token function function-variable","children":"size"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," ",["$","span",null,{"className":"token number","children":"22"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token function","children":"cb"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["module",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"exports"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token maybe-class-name","children":"CopyRightWebpackPlugin"}],"\n"]}]]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":[["$","code",null,{"children":"loader"}],"是一个函数，",["$","code",null,{"children":"plugin"}],"是一个类。"]}]}],["$","ol",null,{"start":"2","children":["$","li",null,{"children":["编译打包配置文件 ",["$","code",null,{"children":"webpack.config.js"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"CopyRightWebpackPlugin"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'./plugins/copyright-webpack-plugin'"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//..."}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"plugins"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"CopyRightWebpackPlugin"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property literal-property","children":"name"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'drew'"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//..."}],"\n"]}]]}]}],["$","ol",null,{"start":"3","children":["$","li",null,{"children":["打包输出 ",["$","code",null,{"children":"npm run build"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token maybe-class-name","children":"Asset"}],"      ",["$","span",null,{"className":"token maybe-class-name","children":"Size"}],"  ",["$","span",null,{"className":"token maybe-class-name","children":"Chunks"}],"             ",["$","span",null,{"className":"token maybe-class-name","children":"Chunk"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Names"}],"\n"]}],["$","span",null,{"className":"code-line","children":["copyright",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"txt"}],"  ",["$","span",null,{"className":"token number","children":"22"}]," bytes          ",["$","span",null,{"className":"token punctuation","children":"["}],"emitted",["$","span",null,{"className":"token punctuation","children":"]"}],"  \n"]}],["$","span",null,{"className":"code-line","children":["      main",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"js"}],"   ",["$","span",null,{"className":"token number","children":"3.8"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"KiB"}],"    main  ",["$","span",null,{"className":"token punctuation","children":"["}],"emitted",["$","span",null,{"className":"token punctuation","children":"]"}],"  main\n"]}]]}]}],["$","p",null,{"children":["生成",["$","code",null,{"children":"copyright.txt"}],"文件，内容为",["$","code",null,{"children":"copyright by nimengwei"}],"。"]}],["$","h2",null,{"className":"content-header","id":"24-调试","children":[["$","a",null,{"className":"break-words","href":"#24-调试","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.4 调试"]}],["$","ol",null,{"children":[["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.imooc.com/learn/1093","children":"node.js调试入门"}]}],["$","li",null,{"children":"插件代码添加断点"}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//..."}],"\n"]}],["$","span",null,{"className":"code-line","children":["    compiler",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"hooks"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"emit"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"tapAsync"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'CopyRightWebpackPlugin'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":["compilation",["$","span",null,{"className":"token punctuation","children":","}]," cb"]}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator arrow","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"debugger"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"//..."}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//..."}],"\n"]}]]}]}],["$","ol",null,{"start":"3","children":["$","li",null,{"children":["添加调试命令 ",["$","code",null,{"children":"package.json"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//..."}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property string-property","children":"\"scripts\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property string-property","children":"\"build\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"webpack\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property string-property","children":"\"debug\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"node --inspect --inspect-brk node_modules/webpack/bin/webpack.js\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//..."}],"\n"]}]]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":[["$","code",null,{"children":"webpack"}],"命令等价于",["$","code",null,{"children":"node node_modules/webpack/bin/webpack.js"}],"。 ",["$","code",null,{"children":"--inspect"}],"表示开启",["$","code",null,{"children":"node"}],"调试工具。 ",["$","code",null,{"children":"--inspect-brk"}],"表示在",["$","code",null,{"children":"webpack.js"}],"的第一行添加一个断点。"]}]}],["$","ol",null,{"start":"4","children":["$","li",null,{"children":["打包调试 ",["$","code",null,{"children":"npm run debug"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":">"}]," plugin@",["$","span",null,{"className":"token number","children":"1.0"}],["$","span",null,{"className":"token number","children":".0"}]," debug ",["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token maybe-class-name","children":"Users"}],["$","span",null,{"className":"token operator","children":"/"}],"nimengwei",["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token maybe-class-name","children":"Code"}],["$","span",null,{"className":"token operator","children":"/"}],"mycode",["$","span",null,{"className":"token operator","children":"/"}],"webpack",["$","span",null,{"className":"token operator","children":"/"}],"plugin\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":">"}]," node ",["$","span",null,{"className":"token operator","children":"--"}],"inspect ",["$","span",null,{"className":"token operator","children":"--"}],"inspect",["$","span",null,{"className":"token operator","children":"-"}],"brk node_modules",["$","span",null,{"className":"token operator","children":"/"}],"webpack",["$","span",null,{"className":"token operator","children":"/"}],"bin",["$","span",null,{"className":"token operator","children":"/"}],"webpack",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"js"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Debugger"}]," listening on ws",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token number","children":"127.0"}],["$","span",null,{"className":"token number","children":".0"}],["$","span",null,{"className":"token number","children":".1"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"9229"}],["$","span",null,{"className":"token operator","children":"/"}],"9137ce93",["$","span",null,{"className":"token operator","children":"-"}],"f858",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token number","children":"4850"}],["$","span",null,{"className":"token operator","children":"-"}],"a92b",["$","span",null,{"className":"token operator","children":"-"}],"5630a73110d1\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"For"}]," help",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token property literal-property","children":"see"}],["$","span",null,{"className":"token operator","children":":"}]," https",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token operator","children":"/"}],"nodejs",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"org"}],["$","span",null,{"className":"token operator","children":"/"}],"en",["$","span",null,{"className":"token operator","children":"/"}],"docs",["$","span",null,{"className":"token operator","children":"/"}],"inspector\n"]}]]}]}],["$","ol",null,{"start":"5","children":[["$","li",null,{"children":["打开",["$","code",null,{"children":"127.0.0.1:9229/json"}]," ",["$","img",null,{"alt":"image.png","src":"https://upload-images.jianshu.io/upload_images/4989175-4a6e2f5a5cfecdcf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"}]]}],["$","li",null,{"children":["打开",["$","code",null,{"children":"devtoolsFrontendUrl"}],"值 ",["$","code",null,{"children":"chrome-devtools://devtools/bundled/..."}]]}],["$","li",null,{"children":"调试代码打包完成"}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Built"}]," at",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"04"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token number","children":"19"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token number","children":"2019"}]," ",["$","span",null,{"className":"token number","children":"8"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"36"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"12"}]," ",["$","span",null,{"className":"token constant","children":"AM"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token maybe-class-name","children":"Asset"}],"      ",["$","span",null,{"className":"token maybe-class-name","children":"Size"}],"  ",["$","span",null,{"className":"token maybe-class-name","children":"Chunks"}],"             ",["$","span",null,{"className":"token maybe-class-name","children":"Chunk"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Names"}],"\n"]}],["$","span",null,{"className":"code-line","children":["copyright",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"txt"}],"  ",["$","span",null,{"className":"token number","children":"22"}]," bytes          ",["$","span",null,{"className":"token punctuation","children":"["}],"emitted",["$","span",null,{"className":"token punctuation","children":"]"}],"  \n"]}],["$","span",null,{"className":"code-line","children":["      main",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"js"}],"   ",["$","span",null,{"className":"token number","children":"3.8"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"KiB"}],"    main  ",["$","span",null,{"className":"token punctuation","children":"["}],"emitted",["$","span",null,{"className":"token punctuation","children":"]"}],"  main\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Entrypoint"}]," main ",["$","span",null,{"className":"token operator","children":"="}]," main",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"js"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"/"}],"src",["$","span",null,{"className":"token operator","children":"/"}],"index",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"js"}],["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token number","children":"28"}]," bytes ",["$","span",null,{"className":"token punctuation","children":"{"}],"main",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"built",["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Waiting"}]," ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," the ",["$","span",null,{"className":"token keyword","children":"debugger"}]," to disconnect",["$","span",null,{"className":"token operator spread","children":"..."}],"\n"]}]]}]}],["$","h1",null,{"className":"content-header","id":"3-编写一个bundler","children":[["$","a",null,{"className":"break-words","href":"#3-编写一个bundler","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3. 编写一个Bundler"]}],["$","h2",null,{"className":"content-header","id":"31-模块分析","children":[["$","a",null,{"className":"break-words","href":"#31-模块分析","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.1 模块分析"]}],["$","ol",null,{"children":["$","li",null,{"children":"初始化项目"}]}],["$","p",null,{"children":["(1) 项目文件夹 ",["$","code",null,{"children":"bundler"}]," (2) 业务代码 ",["$","code",null,{"children":"src/word.js"}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword module","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"const"}]," word ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"'hello'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]}]}],["$","p",null,{"children":["$","code",null,{"children":"src/message.js"}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword module","children":"import"}]," ",["$","span",null,{"className":"token imports","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," word ",["$","span",null,{"className":"token punctuation","children":"}"}]]}]," ",["$","span",null,{"className":"token keyword module","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'./word.js'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," message ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token string template-punctuation","children":"`"}],["$","span",null,{"className":"token string","children":"say "}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation interpolation-punctuation","children":"$${"}],"word",["$","span",null,{"className":"token punctuation interpolation-punctuation","children":"}"}]]}],["$","span",null,{"className":"token string template-punctuation","children":"`"}]]}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword module","children":"export"}]," ",["$","span",null,{"className":"token keyword module","children":"default"}]," message\n"]}]]}]}],["$","p",null,{"children":["$","code",null,{"children":"src/index.js"}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword module","children":"import"}]," ",["$","span",null,{"className":"token imports","children":"message"}]," ",["$","span",null,{"className":"token keyword module","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'./message.js'"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name console","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],"message",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]]}]}],["$","p",null,{"children":["(3) 打包脚本 ",["$","code",null,{"children":"bundler.js"}]," 2. 安装依赖 ",["$","code",null,{"children":"➜ bundler npm install cli-highlight -g"}]," ",["$","code",null,{"children":"➜ bundler npm i @babel/parser --save"}]," ",["$","code",null,{"children":"➜ bundler npm i @babel/traverse --save"}]," ",["$","code",null,{"children":"➜ bundler npm i @babel/core --save "}],["$","code",null,{"children":"➜ bundler npm install @babel/preset-env --save"}]]}],["$","blockquote",null,{"children":["$","p",null,{"children":[["$","code",null,{"children":"cli-highlight"}],"：在",["$","code",null,{"children":"cmd"}],"中高亮打印代码。 ",["$","code",null,{"children":"babel-parser"}],"(",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://babeljs.io/docs/en/babel-parser","children":"文档"}],")：将代码字符串转化为抽象语法树(",["$","code",null,{"children":"AST"}],")。 ",["$","code",null,{"children":"@babel/traverse"}],"：对抽象语法树遍历进行封装。 ",["$","code",null,{"children":"@babel/core"}],"为(",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://babeljs.io/docs/en/babel-core","children":"文档"}],")：",["$","code",null,{"children":"babel"}],"核心模块。 ",["$","code",null,{"children":"@babel/preset-env"}],"(",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://babeljs.io/docs/en/babel-preset-env","children":"文档"}],")：转化代码。"]}]}],["$","ol",null,{"start":"3","children":["$","li",null,{"children":["编辑打包文件 ",["$","code",null,{"children":"bundler.js"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," fs ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'fs'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," path ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'path'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," parser ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'@babel/parser'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," traverse ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'@babel/traverse'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token keyword module","children":"default"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," babel ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'@babel/core'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function function-variable","children":"moduleAnalyser"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"filename"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator arrow","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," content ",["$","span",null,{"className":"token operator","children":"="}]," fs",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"readFileSync"}],["$","span",null,{"className":"token punctuation","children":"("}],"filename",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"'utf-8'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//console.log(content);  //代码字符串"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ast ",["$","span",null,{"className":"token operator","children":"="}]," parser",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],"content",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property literal-property","children":"sourceType"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"module\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//console.log(ast) //抽象语法树"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//console.log(ast.program.body);"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," dependencies ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"traverse"}],["$","span",null,{"className":"token punctuation","children":"("}],"ast",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"//获取ImportDeclaration语法节点数组"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ImportDeclaration"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"node",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"//filename所在文件夹"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"const"}]," dirname ",["$","span",null,{"className":"token operator","children":"="}]," path",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"dirname"}],["$","span",null,{"className":"token punctuation","children":"("}],"filename",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"//获取import引入的文件的绝对路径"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"const"}]," newFile ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token string template-punctuation","children":"`"}],["$","span",null,{"className":"token string","children":"./"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation interpolation-punctuation","children":"$${"}],"path",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"join"}],["$","span",null,{"className":"token punctuation","children":"("}],"dirname",["$","span",null,{"className":"token punctuation","children":","}]," node",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"source"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"value"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation interpolation-punctuation","children":"}"}]]}],["$","span",null,{"className":"token string template-punctuation","children":"`"}]]}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      dependencies",["$","span",null,{"className":"token punctuation","children":"["}],"node",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"source"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"value"}],["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"="}]," newFile",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//console.log(dependencies); //{ './message.js': './src/message.js' }"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," code ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token operator","children":"="}]," babel",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"transformFromAst"}],["$","span",null,{"className":"token punctuation","children":"("}],"ast",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword nil null","children":"null"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property literal-property","children":"presets"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"'@babel/preset-env'"}],["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token comment","children":"//ast转化为es5代码"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    code",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    filename",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":"    dependencies\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," moduleInfo ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"moduleAnalyser"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'./src/index.js'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name console","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],"moduleInfo",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],["$","ol",null,{"start":"4","children":["$","li",null,{"children":["打包输出 ",["$","code",null,{"children":"➜ bundler node bundler.js | highlight"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token property literal-property","children":"code"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   ",["$","span",null,{"className":"token string","children":"'\"use strict\";\\n\\nvar _message = _interopRequireDefault(require(\"./message.js\"));\\n\\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\\n\\nconsole.log(_message[\"default\"]);'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"filename"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'./src/index.js'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"dependencies"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token property string-property","children":"'./message.js'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'./src/message.js'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":"实现了对单个文件依赖和源代码的分析。"}]}],["$","h2",null,{"className":"content-header","id":"32-依赖图谱dependencies-graph","children":[["$","a",null,{"className":"break-words","href":"#32-依赖图谱dependencies-graph","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.2 依赖图谱(Dependencies Graph)"]}],["$","ol",null,{"children":["$","li",null,{"children":["编辑打包文件 ",["$","code",null,{"children":"bundler.js"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," fs ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'fs'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," path ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'path'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," parser ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'@babel/parser'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," traverse ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'@babel/traverse'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token keyword module","children":"default"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," babel ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'@babel/core'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function function-variable","children":"moduleAnalyser"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"filename"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator arrow","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," content ",["$","span",null,{"className":"token operator","children":"="}]," fs",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"readFileSync"}],["$","span",null,{"className":"token punctuation","children":"("}],"filename",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"'utf-8'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//console.log(content);  //代码字符串"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ast ",["$","span",null,{"className":"token operator","children":"="}]," parser",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],"content",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property literal-property","children":"sourceType"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"module\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//console.log(ast) //抽象语法树"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//console.log(ast.program.body);"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," dependencies ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"traverse"}],["$","span",null,{"className":"token punctuation","children":"("}],"ast",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"//获取ImportDeclaration语法节点数组"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ImportDeclaration"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"node",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"//filename所在文件夹"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"const"}]," dirname ",["$","span",null,{"className":"token operator","children":"="}]," path",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"dirname"}],["$","span",null,{"className":"token punctuation","children":"("}],"filename",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"//获取import引入的文件相对于当前文件的路径"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"const"}]," newFile ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token string template-punctuation","children":"`"}],["$","span",null,{"className":"token string","children":"./"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation interpolation-punctuation","children":"$${"}],"path",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"join"}],["$","span",null,{"className":"token punctuation","children":"("}],"dirname",["$","span",null,{"className":"token punctuation","children":","}]," node",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"source"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"value"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation interpolation-punctuation","children":"}"}]]}],["$","span",null,{"className":"token string template-punctuation","children":"`"}]]}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      dependencies",["$","span",null,{"className":"token punctuation","children":"["}],"node",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"source"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"value"}],["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"="}]," newFile",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//console.log(dependencies); //{ './message.js': './src/message.js' }"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," code ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token operator","children":"="}]," babel",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"transformFromAst"}],["$","span",null,{"className":"token punctuation","children":"("}],"ast",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword nil null","children":"null"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property literal-property","children":"presets"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"'@babel/preset-env'"}],["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token comment","children":"//ast转化为es5代码"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    filename",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    dependencies",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":"    code\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//生成依赖图谱"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function function-variable","children":"makeDependenciesGraph"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"entry"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator arrow","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," entryModule ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"moduleAnalyser"}],["$","span",null,{"className":"token punctuation","children":"("}],"entry",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," graphArray ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"entryModule",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"let"}]," i ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":";"}]," i ",["$","span",null,{"className":"token operator","children":"<"}]," graphArray",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"length"}],["$","span",null,{"className":"token punctuation","children":";"}]," i",["$","span",null,{"className":"token operator","children":"++"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," dependencies ",["$","span",null,{"className":"token operator","children":"="}]," graphArray",["$","span",null,{"className":"token punctuation","children":"["}],"i",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"dependencies"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword control-flow","children":"if"}],["$","span",null,{"className":"token punctuation","children":"("}],"dependencies",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword control-flow","children":"for"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"let"}]," j ",["$","span",null,{"className":"token keyword","children":"in"}]," dependencies",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        graphArray",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"push"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token function","children":"moduleAnalyser"}],["$","span",null,{"className":"token punctuation","children":"("}],"dependencies",["$","span",null,{"className":"token punctuation","children":"["}],"j",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," graph ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  graphArray",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"forEach"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"item"}]," ",["$","span",null,{"className":"token operator arrow","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    graph",["$","span",null,{"className":"token punctuation","children":"["}],"item",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"filename"}],["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property literal-property","children":"dependencies"}],["$","span",null,{"className":"token operator","children":":"}]," item",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"dependencies"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property literal-property","children":"code"}],["$","span",null,{"className":"token operator","children":":"}]," item",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"code"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," graph",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," graphInfo ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"makeDependenciesGraph"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'./src/index.js'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name console","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],"graphInfo",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],["$","ol",null,{"start":"2","children":["$","li",null,{"children":["打包输出 ",["$","code",null,{"children":"➜ bundler node bundler.js | highlight"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token property string-property","children":"'./src/index.js'"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token property literal-property","children":"dependencies"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token property string-property","children":"'./message.js'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'./src/message.js'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["     ",["$","span",null,{"className":"token property literal-property","children":"code"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token string","children":"'\"use strict\";\\n\\nvar _message = _interopRequireDefault(require(\"./message.js\"));\\n\\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\\n\\nconsole.log(_message[\"default\"]);'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property string-property","children":"'./src/message.js'"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token property literal-property","children":"dependencies"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token property string-property","children":"'./word.js'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'./src/word.js'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["     ",["$","span",null,{"className":"token property literal-property","children":"code"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token string","children":"'\"use strict\";\\n\\nObject.defineProperty(exports, \"__esModule\", {\\n  value: true\\n});\\nexports[\"default\"] = void 0;\\n\\nvar _word = require(\"./word.js\");\\n\\nvar message = \"say \".concat(_word.word);\\nvar _default = message;\\nexports[\"default\"] = _default;'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property string-property","children":"'./src/word.js'"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token property literal-property","children":"dependencies"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["     ",["$","span",null,{"className":"token property literal-property","children":"code"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token string","children":"'\"use strict\";\\n\\nObject.defineProperty(exports, \"__esModule\", {\\n  value: true\\n});\\nexports.word = void 0;\\nvar word = \\'hello\\';\\nexports.word = word;'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":["生成",["$","code",null,{"children":"{src: {dependencies, code}, ...}"}],"依赖图谱。"]}]}],["$","h2",null,{"className":"content-header","id":"33-生成代码","children":[["$","a",null,{"className":"break-words","href":"#33-生成代码","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.3 生成代码"]}],["$","ol",null,{"children":["$","li",null,{"children":["编辑打包文件 ",["$","code",null,{"children":"bundler.js"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," fs ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'fs'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," path ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'path'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," parser ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'@babel/parser'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," traverse ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'@babel/traverse'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token keyword module","children":"default"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," babel ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'@babel/core'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function function-variable","children":"moduleAnalyser"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"filename"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator arrow","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," content ",["$","span",null,{"className":"token operator","children":"="}]," fs",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"readFileSync"}],["$","span",null,{"className":"token punctuation","children":"("}],"filename",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"'utf-8'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//console.log(content);  //代码字符串"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ast ",["$","span",null,{"className":"token operator","children":"="}]," parser",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],"content",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property literal-property","children":"sourceType"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"module\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//console.log(ast) //抽象语法树"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//console.log(ast.program.body);"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," dependencies ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"traverse"}],["$","span",null,{"className":"token punctuation","children":"("}],"ast",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"//获取ImportDeclaration语法节点数组"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ImportDeclaration"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"node",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"//filename所在文件夹"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"const"}]," dirname ",["$","span",null,{"className":"token operator","children":"="}]," path",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"dirname"}],["$","span",null,{"className":"token punctuation","children":"("}],"filename",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"//获取import引入的文件相对于当前文件的路径"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"const"}]," newFile ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token string template-punctuation","children":"`"}],["$","span",null,{"className":"token string","children":"./"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation interpolation-punctuation","children":"$${"}],"path",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"join"}],["$","span",null,{"className":"token punctuation","children":"("}],"dirname",["$","span",null,{"className":"token punctuation","children":","}]," node",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"source"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"value"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation interpolation-punctuation","children":"}"}]]}],["$","span",null,{"className":"token string template-punctuation","children":"`"}]]}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      dependencies",["$","span",null,{"className":"token punctuation","children":"["}],"node",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"source"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"value"}],["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"="}]," newFile",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//console.log(dependencies); //{ './message.js': './src/message.js' }"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," code ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token operator","children":"="}]," babel",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"transformFromAst"}],["$","span",null,{"className":"token punctuation","children":"("}],"ast",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword nil null","children":"null"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property literal-property","children":"presets"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"'@babel/preset-env'"}],["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token comment","children":"//ast转化为es5代码"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    filename",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    dependencies",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":"    code\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//生成依赖图谱"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function function-variable","children":"makeDependenciesGraph"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"entry"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator arrow","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," entryModule ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"moduleAnalyser"}],["$","span",null,{"className":"token punctuation","children":"("}],"entry",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," graphArray ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"entryModule",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"let"}]," i ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":";"}]," i ",["$","span",null,{"className":"token operator","children":"<"}]," graphArray",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"length"}],["$","span",null,{"className":"token punctuation","children":";"}]," i",["$","span",null,{"className":"token operator","children":"++"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," dependencies ",["$","span",null,{"className":"token operator","children":"="}]," graphArray",["$","span",null,{"className":"token punctuation","children":"["}],"i",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"dependencies"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword control-flow","children":"if"}],["$","span",null,{"className":"token punctuation","children":"("}],"dependencies",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword control-flow","children":"for"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"let"}]," j ",["$","span",null,{"className":"token keyword","children":"in"}]," dependencies",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        graphArray",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"push"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token function","children":"moduleAnalyser"}],["$","span",null,{"className":"token punctuation","children":"("}],"dependencies",["$","span",null,{"className":"token punctuation","children":"["}],"j",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," graph ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  graphArray",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"forEach"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"item"}]," ",["$","span",null,{"className":"token operator arrow","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    graph",["$","span",null,{"className":"token punctuation","children":"["}],"item",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"filename"}],["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property literal-property","children":"dependencies"}],["$","span",null,{"className":"token operator","children":":"}]," item",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"dependencies"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property literal-property","children":"code"}],["$","span",null,{"className":"token operator","children":":"}]," item",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"code"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," graph",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function function-variable","children":"generateCode"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"entry"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator arrow","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," graph ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"makeDependenciesGraph"}],["$","span",null,{"className":"token punctuation","children":"("}],"entry",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," graphStr ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token class-name known-class-name","children":"JSON"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"stringify"}],["$","span",null,{"className":"token punctuation","children":"("}],"graph",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token string template-punctuation","children":"`"}],["$","span",null,{"className":"token string","children":"\n"}]]}]]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token template-string","children":["$","span",null,{"className":"token string","children":"  (function(graph) {\n"}]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token template-string","children":["$","span",null,{"className":"token string","children":"      function require(module) {\n"}]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token template-string","children":["$","span",null,{"className":"token string","children":"         function localRequire(relativePath) {\n"}]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token template-string","children":["$","span",null,{"className":"token string","children":"             return require(graph[module].dependencies[relativePath])\n"}]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token template-string","children":["$","span",null,{"className":"token string","children":"         }\n"}]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token template-string","children":["$","span",null,{"className":"token string","children":"         var exports = {};\n"}]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token template-string","children":["$","span",null,{"className":"token string","children":"         (function(require, exports, code) {\n"}]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token template-string","children":["$","span",null,{"className":"token string","children":"             eval(code)\n"}]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token template-string","children":["$","span",null,{"className":"token string","children":"         })(localRequire, exports, graph[module].code);\n"}]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token template-string","children":["$","span",null,{"className":"token string","children":"         return exports;\n"}]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token template-string","children":["$","span",null,{"className":"token string","children":"      }\n"}]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token string","children":"      require('"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation interpolation-punctuation","children":"$${"}],"entry",["$","span",null,{"className":"token punctuation interpolation-punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"');\n"}]]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token string","children":"  })("}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation interpolation-punctuation","children":"$${"}],"graphStr",["$","span",null,{"className":"token punctuation interpolation-punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":");\n"}]]}]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token string","children":"  "}],["$","span",null,{"className":"token string template-punctuation","children":"`"}]]}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," code ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"generateCode"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'./src/index.js'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name console","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],"code",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],["$","ol",null,{"start":"2","children":["$","li",null,{"children":["打包输出 ",["$","code",null,{"children":"➜ bundler node bundler.js | highlight"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"function"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"graph"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"module"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["         ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token function","children":"localRequire"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"relativePath"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["             ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],"graph",["$","span",null,{"className":"token punctuation","children":"["}],"module",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"dependencies"}],["$","span",null,{"className":"token punctuation","children":"["}],"relativePath",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["         ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["         ",["$","span",null,{"className":"token keyword","children":"var"}]," exports ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["         ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"function"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":["require",["$","span",null,{"className":"token punctuation","children":","}]," exports",["$","span",null,{"className":"token punctuation","children":","}]," code"]}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["             ",["$","span",null,{"className":"token function","children":"eval"}],["$","span",null,{"className":"token punctuation","children":"("}],"code",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["         ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],"localRequire",["$","span",null,{"className":"token punctuation","children":","}]," exports",["$","span",null,{"className":"token punctuation","children":","}]," graph",["$","span",null,{"className":"token punctuation","children":"["}],"module",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"code"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["         ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," exports",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'./src/index.js'"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token property string-property","children":"\"./src/index.js\""}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token property string-property","children":"\"dependencies\""}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token property string-property","children":"\"./message.js\""}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token string","children":"\"./src/message.js\""}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token property string-property","children":"\"code\""}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token string","children":"\"\\\"use strict\\\";\\n\\nvar _message = _interopRequireDefault(require(\\\"./message.js\\\"));\\n\\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \\\"default\\\": obj }; }\\n\\nconsole.log(_message[\\\"default\\\"]);\""}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token property string-property","children":"\"./src/message.js\""}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token property string-property","children":"\"dependencies\""}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token property string-property","children":"\"./word.js\""}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token string","children":"\"./src/word.js\""}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token property string-property","children":"\"code\""}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token string","children":"\"\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", {\\n  value: true\\n});\\nexports[\\\"default\\\"] = void 0;\\n\\nvar _word = require(\\\"./word.js\\\");\\n\\nvar message = \\\"say \\\".concat(_word.word);\\nvar _default = message;\\nexports[\\\"default\\\"] = _default;\""}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token property string-property","children":"\"./src/word.js\""}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token property string-property","children":"\"dependencies\""}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token property string-property","children":"\"code\""}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token string","children":"\"\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", {\\n  value: true\\n});\\nexports.word = void 0;\\nvar word = 'hello';\\nexports.word = word;\""}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],["$","ol",null,{"start":"3","children":["$","li",null,{"children":["将打包文件在浏览器控制台执行 打印出 ",["$","code",null,{"children":"say hello"}]," ",["$","img",null,{"alt":"image.png","src":"https://upload-images.jianshu.io/upload_images/4989175-a92739864ffd163d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"}]]}]}],["$","h1",null,{"className":"content-header","id":"4-create-react-app","children":[["$","a",null,{"className":"break-words","href":"#4-create-react-app","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"4. Create-React-App"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://facebook.github.io/create-react-app/","children":"create-react-app"}]," 实现了",["$","code",null,{"children":"css"}],"模块热更新，没有实现",["$","code",null,{"children":"js"}],"模块热更新。"]}],["$","li",null,{"children":["初始化项目 ",["$","code",null,{"children":"➜ webpack create-react-app my-app"}]," ",["$","code",null,{"children":"➜ webpack cd my-app"}]," ",["$","code",null,{"children":"➜ my-app git:(master) npm start"}]]}],["$","li",null,{"children":["弹出",["$","code",null,{"children":"webpack"}],"配置 ",["$","code",null,{"children":"➜ my-app git:(master) ✗ npm run eject"}]," 生成",["$","code",null,{"children":"config"}],"和",["$","code",null,{"children":"scripts"}],"文件夹。"]}]]}],["$","blockquote",null,{"children":["$","p",null,{"children":["使用",["$","code",null,{"children":"Create-React-App"}],"初始化的项目打包配置默认是隐藏的，通过此命令可以展示出来。该命令是不可逆的。"]}]}],["$","ol",null,{"start":"4","children":["$","li",null,{"children":["配置介绍 ",["$","code",null,{"children":"scripts/build.js"}],"：生产环境打包脚本。 ",["$","code",null,{"children":"scripts/start.js"}],"：开发环境打包脚本。 ",["$","code",null,{"children":"config/env.js"}],"：初始化环境变量。 ",["$","code",null,{"children":"config/paths.js"}],"：路径",["$","code",null,{"children":"url"}],"。 ",["$","code",null,{"children":"config/webpack.config.js"}],"：",["$","code",null,{"children":"webpack"}],"配置文件。 ",["$","code",null,{"children":"config/webpackDevServer.config.js"}],"：",["$","code",null,{"children":"webpackDevServer"}],"配置文件。"]}]}],["$","h1",null,{"className":"content-header","id":"5--vue-cli-30","children":[["$","a",null,{"className":"break-words","href":"#5--vue-cli-30","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"5. Vue-Cli 3.0"]}],["$","ol",null,{"children":[["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://cli.vuejs.org/zh/","children":"vue-cli"}]}],["$","li",null,{"children":["初始化项目 ",["$","code",null,{"children":"➜ webpack npm install -g @vue/cli"}]," ",["$","code",null,{"children":"➜ webpack vue create my-project"}]," ",["$","code",null,{"children":"➜ webpack cd my-project"}]," ",["$","code",null,{"children":"➜ my-project git:(master) npm run serve"}]]}],["$","li",null,{"children":["与",["$","code",null,{"children":"create-react-app"}],"不同，",["$","code",null,{"children":"vue-cli"}],"并没有提供类似",["$","code",null,{"children":"eject"}],"的方法，暴露",["$","code",null,{"children":"webpack"}],"打包配置，只提供了一些简单配置项。"]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://cli.vuejs.org/zh/config/","children":"配置参考"}]}],["$","li",null,{"children":["创建",["$","code",null,{"children":"vue.config.js"}]]}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," path ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'path'"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["module",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"exports"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"outputDir"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'build'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token comment","children":"//打包输出文件件"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"devServer"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"//不仅在build文件件中查找，还在static文件中查找"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property literal-property","children":"contentBase"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"path",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"resolve"}],["$","span",null,{"className":"token punctuation","children":"("}],"__dirname",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"'static'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"configureWebpack"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token comment","children":"//可以添加webpack配置"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":["一般不需要直接通过",["$","code",null,{"children":"configureWebpack"}],"添加",["$","code",null,{"children":"webpack"}],"配置。"]}]}],["$","ol",null,{"start":"6","children":[["$","li",null,{"children":["打包 ",["$","code",null,{"children":"➜ my-project git:(master) ✗ npm run serve"}]]}],["$","li",null,{"children":["打开页面 ",["$","img",null,{"alt":"image.png","src":"https://upload-images.jianshu.io/upload_images/4989175-7e731b7724bac122.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"}]]}]]}],["$","p",null,{"children":["$","img",null,{"alt":"image.png","src":"https://upload-images.jianshu.io/upload_images/4989175-0e860234f823d80a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"}]}],["$","h1",null,{"className":"content-header","id":"六-总结","children":[["$","a",null,{"className":"break-words","href":"#六-总结","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"六. 总结"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","code",null,{"children":"webpack"}],"和",["$","code",null,{"children":"grunt"}],"和",["$","code",null,{"children":"gulp"}],"有什么不同？ ",["$","code",null,{"children":"webpack"}],"是一个模块打包器，他可以递归的打包项目中的所有模块，最终生成几个打包后的文件。他和其他的工具最大的不同在于他支持",["$","code",null,{"children":"code-splitting"}],"、模块化(",["$","code",null,{"children":"AMD"}],"、",["$","code",null,{"children":"ES Module"}],"、",["$","code",null,{"children":"CommonJS"}],")、全局分析。"]}],["$","li",null,{"children":["什么是",["$","code",null,{"children":"module"}],"，什么是",["$","code",null,{"children":"chunk"}],"，什么是",["$","code",null,{"children":"bundle"}],"？ ",["$","code",null,{"children":"module"}],"是开发中的单个模块。 ",["$","code",null,{"children":"chunk"}],"是指",["$","code",null,{"children":"webpack"}],"在进行模块的依赖分析的时候，分割出来的代码块。 ",["$","code",null,{"children":"bundle"}],"是由",["$","code",null,{"children":"webpack"}],"打包出来的文件。"]}],["$","li",null,{"children":["什么是",["$","code",null,{"children":"Loader"}],"，什么是",["$","code",null,{"children":"Plugin"}],"？ ",["$","code",null,{"children":"Loader"}],"是用来告诉",["$","code",null,{"children":"webpack"}],"如何转化处理某一类型的文件，并且引入到打包出的文件中。 ",["$","code",null,{"children":"Plugin"}],"是用来自定义",["$","code",null,{"children":"webpack"}],"打包过程的方式，一个插件是含有 ",["$","code",null,{"children":"apply"}],"方法的一个对象，通过这个方法可以参与到",["$","code",null,{"children":"webpack"}],"打包的整个生命周期。"]}],["$","li",null,{"children":[["$","code",null,{"children":"webpack-dev-server"}],"和",["$","code",null,{"children":"http"}],"服务器(例如：",["$","code",null,{"children":"nginx"}],")有什么区别？ ",["$","code",null,{"children":"webpack-dev-server"}],"使用内存来存储",["$","code",null,{"children":"webpack"}],"开发环境下的打包文件，并且可以使用模块热更新。"]}]]}]]}],["$","div",null,{"className":"pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300","children":[["$","a",null,{"className":"break-words","target":"_blank","rel":"nofollow","href":"https://mobile.twitter.com/search?q=https%3A%2F%2Fnmwei.github.io%2Fblog%2FWebpack%2FWebpack4-0%E5%8E%9F%E7%90%86","children":"Discuss on Twitter"}]," • ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/nmwei/nmwei.github.io/blob/main/data/blog/Webpack/Webpack4-0原理.mdx","children":"View on GitHub"}]]}],["$","div",null,{"className":"pt-6 pb-6 text-center text-gray-700 dark:text-gray-300","id":"comment","children":["$","$L17",null,{"slug":"Webpack/Webpack4-0原理"}]}]]}],["$","footer",null,{"children":[["$","div",null,{"className":"divide-gray-200 text-sm leading-5 font-medium xl:col-start-1 xl:row-start-2 xl:divide-y dark:divide-gray-700","children":[["$","div",null,{"className":"py-4 xl:py-8","children":[["$","h2",null,{"className":"text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400","children":"Tags"}],["$","div",null,{"className":"flex flex-wrap","children":[["$","$L5","Webpack",{"href":"/tags/webpack","className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400 mr-3 text-sm font-medium","children":"Webpack"}],["$","$L5","构建工具",{"href":"/tags/构建工具","className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400 mr-3 text-sm font-medium","children":"构建工具"}]]}]]}],["$","div",null,{"className":"flex justify-between py-4 xl:block xl:space-y-8 xl:py-8","children":[["$","div",null,{"children":[["$","h2",null,{"className":"text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400","children":"Previous Article"}],["$","div",null,{"className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":["$","$L5",null,{"className":"break-words","href":"/blog/Webpack/Webpack4-0进阶","children":"Webpack4-0进阶"}]}]]}],["$","div",null,{"children":[["$","h2",null,{"className":"text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400","children":"Next Article"}],["$","div",null,{"className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":["$","$L5",null,{"className":"break-words","href":"/blog/代码质量/架构整洁之道","children":"架构整洁之道"}]}]]}]]}]]}],["$","div",null,{"className":"pt-4 xl:pt-8","children":["$","$L5",null,{"className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","href":"/blog","aria-label":"Back to the blog","children":"← Back to the blog"}]}]]}]]}]]}]}]]}]]
10:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
d:null
e:null
12:[["$","title","0",{"children":"Webpack4-0原理 | 我的博客"}],["$","meta","1",{"name":"description","content":"Webpack4-0原理相关文章"}],["$","meta","2",{"name":"robots","content":"index, follow"}],["$","meta","3",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","link","4",{"rel":"canonical","href":"https://nmwei.github.io/blog/Webpack/Webpack4-0%E5%8E%9F%E7%90%86"}],["$","link","5",{"rel":"alternate","type":"application/rss+xml","href":"https://nmwei.github.io/feed.xml"}],["$","meta","6",{"property":"og:title","content":"Webpack4-0原理"}],["$","meta","7",{"property":"og:description","content":"Webpack4-0原理相关文章"}],["$","meta","8",{"property":"og:url","content":"https://nmwei.github.io/blog/Webpack/Webpack4-0%E5%8E%9F%E7%90%86"}],["$","meta","9",{"property":"og:site_name","content":"我的博客"}],["$","meta","10",{"property":"og:locale","content":"en_US"}],["$","meta","11",{"property":"og:image","content":"https://nmwei.github.io/static/images/webpack.jpg"}],["$","meta","12",{"property":"og:type","content":"article"}],["$","meta","13",{"property":"article:published_time","content":"2019-04-17T00:00:00.000Z"}],["$","meta","14",{"property":"article:modified_time","content":"2019-04-17T00:00:00.000Z"}],["$","meta","15",{"property":"article:author","content":"倪梦威"}],["$","meta","16",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","17",{"name":"twitter:title","content":"Webpack4-0原理"}],["$","meta","18",{"name":"twitter:description","content":"Webpack4-0原理相关文章"}],["$","meta","19",{"name":"twitter:image","content":"https://nmwei.github.io/static/images/webpack.jpg"}]]
