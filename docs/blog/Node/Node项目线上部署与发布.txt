1:"$Sreact.fragment"
2:I[1478,["545","static/chunks/c16f53c3-5b47b7f1ae12d8f6.js","874","static/chunks/874-7cca39d2e0ddd8b8.js","430","static/chunks/430-27ea613f983ffbaf.js","177","static/chunks/app/layout-4f2fc603b9b897e8.js"],"ThemeProviders"]
3:I[9243,["545","static/chunks/c16f53c3-5b47b7f1ae12d8f6.js","874","static/chunks/874-7cca39d2e0ddd8b8.js","430","static/chunks/430-27ea613f983ffbaf.js","177","static/chunks/app/layout-4f2fc603b9b897e8.js"],""]
4:I[7392,["545","static/chunks/c16f53c3-5b47b7f1ae12d8f6.js","874","static/chunks/874-7cca39d2e0ddd8b8.js","430","static/chunks/430-27ea613f983ffbaf.js","177","static/chunks/app/layout-4f2fc603b9b897e8.js"],"KBarSearchProvider"]
5:I[6874,["874","static/chunks/874-7cca39d2e0ddd8b8.js","63","static/chunks/63-2b4206848ffc60fb.js","909","static/chunks/app/blog/%5B...slug%5D/page-28d33eed3f173442.js"],""]
6:I[4159,["545","static/chunks/c16f53c3-5b47b7f1ae12d8f6.js","874","static/chunks/874-7cca39d2e0ddd8b8.js","430","static/chunks/430-27ea613f983ffbaf.js","177","static/chunks/app/layout-4f2fc603b9b897e8.js"],"KBarButton"]
7:I[1762,["545","static/chunks/c16f53c3-5b47b7f1ae12d8f6.js","874","static/chunks/874-7cca39d2e0ddd8b8.js","430","static/chunks/430-27ea613f983ffbaf.js","177","static/chunks/app/layout-4f2fc603b9b897e8.js"],"default"]
8:I[7298,["545","static/chunks/c16f53c3-5b47b7f1ae12d8f6.js","874","static/chunks/874-7cca39d2e0ddd8b8.js","430","static/chunks/430-27ea613f983ffbaf.js","177","static/chunks/app/layout-4f2fc603b9b897e8.js"],"default"]
9:I[7555,[],""]
a:I[1295,[],""]
c:I[9665,[],"OutletBoundary"]
f:I[9665,[],"ViewportBoundary"]
11:I[9665,[],"MetadataBoundary"]
13:I[6614,[],""]
:HL["/_next/static/media/7cba1811e3c25a15-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/f71128b9ac16cc11.css","style"]
:HL["/_next/static/css/5fa3e5bae12b17db.css","style"]
:HL["/_next/static/css/206c8cd9f1135cc1.css","style"]
0:{"P":null,"b":"zD_bYF5SZMVS-oUQR0xRK","p":"","c":["","blog","Node","Node%E9%A1%B9%E7%9B%AE%E7%BA%BF%E4%B8%8A%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%8F%91%E5%B8%83"],"i":false,"f":[[["",{"children":["blog",{"children":[["slug","Node/Node%E9%A1%B9%E7%9B%AE%E7%BA%BF%E4%B8%8A%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%8F%91%E5%B8%83","c"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f71128b9ac16cc11.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/5fa3e5bae12b17db.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"zh-cn","className":"__variable_bc0dcf scroll-smooth","suppressHydrationWarning":true,"children":[["$","link",null,{"rel":"apple-touch-icon","sizes":"76x76","href":"/static/favicons/apple-touch-icon.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"32x32","href":"/static/favicons/favicon-32x32.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"16x16","href":"/static/favicons/favicon-16x16.png"}],["$","link",null,{"rel":"manifest","href":"/static/favicons/site.webmanifest"}],["$","link",null,{"rel":"mask-icon","href":"/static/favicons/safari-pinned-tab.svg","color":"#5bbad5"}],["$","meta",null,{"name":"msapplication-TileColor","content":"#000000"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: light)","content":"#fff"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: dark)","content":"#000"}],["$","link",null,{"rel":"alternate","type":"application/rss+xml","href":"/feed.xml"}],["$","body",null,{"className":"bg-white pl-[calc(100vw-100%)] text-black antialiased dark:bg-gray-950 dark:text-white","children":["$","$L2",null,{"children":[["$undefined","$undefined","$undefined",["$","$L3",null,{"async":true,"defer":true,"src":"https://analytics.umami.is/script.js"}],"$undefined","$undefined"],["$","section",null,{"className":"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0","children":[["$","$L4",null,{"kbarConfig":{"searchDocumentsPath":"/search.json"},"children":[["$","header",null,{"className":"flex items-center w-full bg-white dark:bg-gray-950 justify-between py-10","children":[["$","$L5",null,{"className":"break-words","href":"/","aria-label":"我的博客","children":["$","div",null,{"className":"flex items-center justify-between","children":[["$","div",null,{"className":"mr-3","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","xmlnsXlink":"http://www.w3.org/1999/xlink","width":53.87,"height":43.61,"viewBox":"344.564 330.278 111.737 91.218","children":[["$","defs",null,{"children":[["$","linearGradient",null,{"id":"logo_svg__b","x1":420.97,"x2":420.97,"y1":331.28,"y2":418.5,"gradientUnits":"userSpaceOnUse","children":[["$","stop",null,{"offset":"0%","style":{"stopColor":"#06b6d4","stopOpacity":1}}],["$","stop",null,{"offset":"100%","style":{"stopColor":"#67e8f9","stopOpacity":1}}]]}],["$","linearGradient",null,{"id":"logo_svg__d","x1":377.89,"x2":377.89,"y1":331.28,"y2":418.5,"gradientUnits":"userSpaceOnUse","children":[["$","stop",null,{"offset":"0%","style":{"stopColor":"#06b6d4","stopOpacity":1}}],["$","stop",null,{"offset":"100%","style":{"stopColor":"#67e8f9","stopOpacity":1}}]]}],["$","path",null,{"id":"logo_svg__a","d":"M453.3 331.28v28.57l-64.66 58.65v-30.08z"}],["$","path",null,{"id":"logo_svg__c","d":"M410.23 331.28v28.57l-64.67 58.65v-30.08z"}]]}],["$","use",null,{"xlinkHref":"#logo_svg__a","fill":"url(#logo_svg__b)"}],["$","use",null,{"xlinkHref":"#logo_svg__c","fill":"url(#logo_svg__d)"}]]}]}],["$","div",null,{"className":"hidden h-6 text-2xl font-semibold sm:block","children":"我的博客"}]]}]}],["$","div",null,{"className":"flex items-center space-x-4 leading-5 sm:-mr-6 sm:space-x-6","children":[["$","div",null,{"className":"no-scrollbar hidden max-w-40 items-center gap-x-4 overflow-x-auto sm:flex md:max-w-72 lg:max-w-96","children":[["$","$L5","博客",{"className":"hover:text-primary-500 dark:hover:text-primary-400 m-1 font-medium text-gray-900 dark:text-gray-100","href":"/blog","children":"博客"}],["$","$L5","标签",{"className":"hover:text-primary-500 dark:hover:text-primary-400 m-1 font-medium text-gray-900 dark:text-gray-100","href":"/tags","children":"标签"}],["$","$L5","项目",{"className":"hover:text-primary-500 dark:hover:text-primary-400 m-1 font-medium text-gray-900 dark:text-gray-100","href":"/projects","children":"项目"}],["$","$L5","关于",{"className":"hover:text-primary-500 dark:hover:text-primary-400 m-1 font-medium text-gray-900 dark:text-gray-100","href":"/about","children":"关于"}]]}],["$","$L6",null,{"aria-label":"Search","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","strokeWidth":1.5,"stroke":"currentColor","className":"hover:text-primary-500 dark:hover:text-primary-400 h-6 w-6 text-gray-900 dark:text-gray-100","children":["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","d":"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}]}]}],["$","$L7",null,{}],["$","$L8",null,{}]]}]]}],["$","main",null,{"className":"mb-auto","children":["$","$L9",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","div",null,{"className":"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6","children":[["$","div",null,{"className":"space-x-2 pt-6 pb-8 md:space-y-5","children":["$","h1",null,{"className":"text-6xl leading-9 font-extrabold tracking-tight text-gray-900 md:border-r-2 md:px-6 md:text-8xl md:leading-14 dark:text-gray-100","children":"404"}]}],["$","div",null,{"className":"max-w-md","children":[["$","p",null,{"className":"mb-4 text-xl leading-normal font-bold md:text-2xl","children":"Sorry we couldn't find this page."}],["$","p",null,{"className":"mb-8","children":"But dont worry, you can find plenty of other things on our homepage."}],["$","$L5",null,{"className":"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm leading-5 font-medium text-white shadow-xs transition-colors duration-150 hover:bg-blue-700 focus:outline-hidden dark:hover:bg-blue-500","href":"/","children":"Back to homepage"}]]}]]}],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}],["$","footer",null,{"children":["$","div",null,{"className":"mt-16 flex flex-col items-center","children":[["$","div",null,{"className":"mb-3 flex space-x-4","children":[["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"mailto:254060001@qq.com","children":[["$","span",null,{"className":"sr-only","children":"mail"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 20 20","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"Mail"}],["$","path",null,{"d":"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}],["$","path",null,{"d":"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"}]]}]]}],["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://github.com","children":[["$","span",null,{"className":"sr-only","children":"github"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"GitHub"}],["$","path",null,{"d":"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"}]]}]]}],null,null,null,null,null,null,null,null,null]}],["$","div",null,{"className":"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400","children":[["$","div",null,{"children":"倪梦威"}],["$","div",null,{"children":" • "}],["$","div",null,{"children":"© 2025"}],["$","div",null,{"children":" • "}],["$","$L5",null,{"className":"break-words","href":"/","children":"我的博客"}]]}],false]}]}]]}]]}]}]]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L9",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","Node/Node%E9%A1%B9%E7%9B%AE%E7%BA%BF%E4%B8%8A%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%8F%91%E5%B8%83","c"],["$","$1","c",{"children":[null,["$","$L9",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$Lb","$undefined",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/206c8cd9f1135cc1.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$Lc",null,{"children":["$Ld","$Le",null]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","zPJ56No7gY0vHWjqgRpbP",{"children":[["$","$Lf",null,{"children":"$L10"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],["$","$L11",null,{"children":"$L12"}]]}],false]],"m":"$undefined","G":["$13","$undefined"],"s":false,"S":true}
14:I[1839,["874","static/chunks/874-7cca39d2e0ddd8b8.js","63","static/chunks/63-2b4206848ffc60fb.js","909","static/chunks/app/blog/%5B...slug%5D/page-28d33eed3f173442.js"],"default"]
15:I[3063,["874","static/chunks/874-7cca39d2e0ddd8b8.js","63","static/chunks/63-2b4206848ffc60fb.js","909","static/chunks/app/blog/%5B...slug%5D/page-28d33eed3f173442.js"],"Image"]
16:I[2100,["874","static/chunks/874-7cca39d2e0ddd8b8.js","63","static/chunks/63-2b4206848ffc60fb.js","909","static/chunks/app/blog/%5B...slug%5D/page-28d33eed3f173442.js"],"default"]
17:I[1449,["874","static/chunks/874-7cca39d2e0ddd8b8.js","63","static/chunks/63-2b4206848ffc60fb.js","909","static/chunks/app/blog/%5B...slug%5D/page-28d33eed3f173442.js"],"default"]
b:[["$","script",null,{"type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":\"Node项目线上部署与发布\",\"datePublished\":\"2018-07-04T00:00:00.000Z\",\"dateModified\":\"2018-07-04T00:00:00.000Z\",\"description\":\"Node项目线上部署与发布相关文章\",\"image\":\"/static/images/nodejs.jpg\",\"url\":\"https://nmwei.github.io/blog/Node/Node项目线上部署与发布\",\"author\":[{\"@type\":\"Person\",\"name\":\"倪梦威\"}]}"}}],["$","section",null,{"className":"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0","children":[["$","$L14",null,{}],["$","article",null,{"children":["$","div",null,{"className":"xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700","children":[["$","header",null,{"className":"pt-6 xl:pb-6","children":["$","div",null,{"className":"space-y-1 text-center","children":[["$","dl",null,{"className":"space-y-10","children":["$","div",null,{"children":[["$","dt",null,{"className":"sr-only","children":"Published on"}],["$","dd",null,{"className":"text-base leading-6 font-medium text-gray-500 dark:text-gray-400","children":["$","time",null,{"dateTime":"2018-07-04T00:00:00.000Z","children":"2018年7月4日星期三"}]}]]}]}],["$","div",null,{"children":["$","h1",null,{"className":"text-3xl leading-9 font-extrabold tracking-tight text-gray-900 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14 dark:text-gray-100","children":"Node项目线上部署与发布"}]}]]}]}],["$","div",null,{"className":"grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0 dark:divide-gray-700","children":[["$","dl",null,{"className":"pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700","children":[["$","dt",null,{"className":"sr-only","children":"Authors"}],["$","dd",null,{"children":["$","ul",null,{"className":"flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-y-8 xl:space-x-0","children":[["$","li","倪梦威",{"className":"flex items-center space-x-2","children":[["$","$L15",null,{"src":"/static/images/avatar.png","width":38,"height":38,"alt":"avatar","className":"h-10 w-10 rounded-full"}],["$","dl",null,{"className":"text-sm leading-5 font-medium whitespace-nowrap","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"className":"text-gray-900 dark:text-gray-100","children":"倪梦威"}],["$","dt",null,{"className":"sr-only","children":"Twitter"}],["$","dd",null,{"children":null}]]}]]}]]}]}]]}],["$","div",null,{"className":"divide-y divide-gray-200 xl:col-span-3 xl:row-span-2 xl:pb-0 dark:divide-gray-700","children":[["$","div",null,{"className":"prose dark:prose-invert max-w-none pt-10 pb-8","children":[["$","h2",null,{"className":"content-header","id":"1-linux命令","children":[["$","a",null,{"className":"break-words","href":"#1-linux命令","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1. Linux命令"]}],["$","h3",null,{"className":"content-header","id":"11-常用命令","children":[["$","a",null,{"className":"break-words","href":"#11-常用命令","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1.1 常用命令"]}],["$","ol",null,{"children":[["$","li",null,{"children":["显示文件或目录 ",["$","code",null,{"children":"ls（选项）（参数）"}]," ",["$","code",null,{"children":"-l"}]," 表示",["$","code",null,{"children":"long"}],"，长格式列出 ",["$","code",null,{"children":"-a"}]," 表示",["$","code",null,{"children":"all"}],"，包括隐藏文件"]}],["$","li",null,{"children":["创建目录 ",["$","code",null,{"children":"mkdir 目录"}]]}],["$","li",null,{"children":["打印文件内容 ",["$","code",null,{"children":"cat 文件"}]]}],["$","li",null,{"children":["拷贝文件 ",["$","code",null,{"children":"cp 原文件 新文件"}]]}],["$","li",null,{"children":["移动或重命名 ",["$","code",null,{"children":"mv 原文件 新文件"}]]}],["$","li",null,{"children":["删除文件 ",["$","code",null,{"children":"rm 文件"}]," 注释：",["$","code",null,{"children":"rm -rf 目录"}]," 强制递归删除目录。"]}],["$","li",null,{"children":["查看当前路径 ",["$","code",null,{"children":"pwd"}]]}],["$","li",null,{"children":["删除空目录 ",["$","code",null,{"children":"rmdir 目录"}]]}],["$","li",null,{"children":["查找文件/目录 ",["$","code",null,{"children":"find 文件/目录"}]]}],["$","li",null,{"children":["创建空文件 ",["$","code",null,{"children":"touch 文件"}]]}]]}],["$","h3",null,{"className":"content-header","id":"12-打包压缩","children":[["$","a",null,{"className":"break-words","href":"#12-打包压缩","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1.2 打包压缩"]}],["$","ol",null,{"children":[["$","li",null,{"children":["语法 ",["$","code",null,{"children":"tar (选项) (参数)"}]," 选项：",["$","code",null,{"children":"-c"}]," 归档文件，",["$","code",null,{"children":" -x"}]," 解压，",["$","code",null,{"children":"-z"}]," ",["$","code",null,{"children":"gzip"}],"压缩文件，",["$","code",null,{"children":"-j"}]," ",["$","code",null,{"children":"bzip2"}],"压缩文件，",["$","code",null,{"children":"-v"}]," 显示压缩或解压缩过程 ",["$","code",null,{"children":"v(view)"}],"，",["$","code",null,{"children":"-f"}]," 使用档案名字(这个参数是最后一个参数，后面只能接档案名)"]}],["$","li",null,{"children":["用法 (1) 压缩 ",["$","code",null,{"children":"tar -cvf /home/abc.tar /home/abc"}]," 只打包，不压缩 ",["$","code",null,{"children":"tar -zcvf /home/abc.tar.gz /home/abc"}]," 打包，并用",["$","code",null,{"children":"gzip"}],"压缩 ",["$","code",null,{"children":"tar -jcvf /home/abc.tar.bz2 /home/abc"}]," 打包，并用",["$","code",null,{"children":"bzip2"}],"压缩 (2) 解压 替换上面的命令",["$","code",null,{"children":"tar -cvf / tar -zcvf / tar -jcvf"}]," 中的",["$","code",null,{"children":"c"}],"换成",["$","code",null,{"children":"x"}],"。"]}]]}],["$","h3",null,{"className":"content-header","id":"13-vim使用","children":[["$","a",null,{"className":"break-words","href":"#13-vim使用","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1.3 vim使用"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","code",null,{"children":"vim"}],"有三种模式：命令模式、插入模式、编辑模式。 使用",["$","code",null,{"children":"ESC"}],"或",["$","code",null,{"children":"i"}],"或",["$","code",null,{"children":":"}],"来切换模式。"]}],["$","li",null,{"children":["命令模式下 (1) ",["$","strong",null,{"children":[["$","code",null,{"children":"vi 文件名"}]," 编辑或创建文件"]}]," (2) ",["$","code",null,{"children":"dd"}]," 删除当前行 (3) ",["$","code",null,{"children":"ndd"}]," 删除",["$","code",null,{"children":"n"}],"行 (4) ",["$","code",null,{"children":"yy"}]," 复制当前行 (5) ",["$","code",null,{"children":"nyy"}]," 复制",["$","code",null,{"children":"n"}],"行 (6) ",["$","code",null,{"children":"p"}]," 粘贴 (7) ",["$","code",null,{"children":":q"}]," 退出 (8) ",["$","code",null,{"children":":q!"}]," 强制退出 (9) ",["$","code",null,{"children":":wq"}]," 保存并退出"]}]]}],["$","h3",null,{"className":"content-header","id":"14-用户及用户组","children":[["$","a",null,{"className":"break-words","href":"#14-用户及用户组","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1.4 用户及用户组"]}],["$","ol",null,{"children":[["$","li",null,{"children":["创建用户 ",["$","code",null,{"children":"adduser 用户名"}]]}],["$","li",null,{"children":["将用户添加到指定用户组 ",["$","code",null,{"children":"gpasswd -a nmwei sudo"}]]}]]}],["$","h3",null,{"className":"content-header","id":"15-文件权限","children":[["$","a",null,{"className":"break-words","href":"#15-文件权限","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1.5 文件权限"]}],["$","ol",null,{"children":[["$","li",null,{"children":["三种基本权限 （1）",["$","code",null,{"children":"r"}]," 读 数值表示为4 （2）",["$","code",null,{"children":"w"}]," 写 数值表示为2 （3）",["$","code",null,{"children":"x"}]," 可执行 数值表示为1"]}],["$","li",null,{"children":"权限查看"}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"workspace$ ls ",["$","span",null,{"className":"token operator","children":"-"}],"l\n"]}],["$","span",null,{"className":"code-line","children":["total ",["$","span",null,{"className":"token number","children":"12"}],"\n"]}],["$","span",null,{"className":"code-line","children":["drwxrwxr",["$","span",null,{"className":"token operator","children":"-"}],"x ",["$","span",null,{"className":"token number","children":"3"}]," nmwei nmwei ",["$","span",null,{"className":"token number","children":"4096"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Jul"}]," ",["$","span",null,{"className":"token number","children":"21"}]," ",["$","span",null,{"className":"token number","children":"12"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"00"}]," imoocmall\n"]}],["$","span",null,{"className":"code-line","children":["drwxrwxr",["$","span",null,{"className":"token operator","children":"-"}],"x ",["$","span",null,{"className":"token number","children":"2"}]," nmwei nmwei ",["$","span",null,{"className":"token number","children":"4096"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Jul"}]," ",["$","span",null,{"className":"token number","children":"21"}]," ",["$","span",null,{"className":"token number","children":"21"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"04"}]," website\n"]}],["$","span",null,{"className":"code-line","children":["drwxrwxr",["$","span",null,{"className":"token operator","children":"-"}],"x ",["$","span",null,{"className":"token number","children":"2"}]," nmwei nmwei ",["$","span",null,{"className":"token number","children":"4096"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Jul"}]," ",["$","span",null,{"className":"token number","children":"22"}]," ",["$","span",null,{"className":"token number","children":"09"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"56"}]," weixinapp\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"workspace$ \n"]}]]}]}],["$","ol",null,{"start":"3","children":[["$","li",null,{"children":["权限分析 ",["$","code",null,{"children":"drwxrwxr-x"}],"一共十个字符，分成四段。 (1) 第",["$","code",null,{"children":"1"}],"个字符",["$","code",null,{"children":"d"}],"表示目录，",["$","code",null,{"children":"-"}],"表示普通文件，",["$","code",null,{"children":"l"}],"表示链接。 (2) 第",["$","code",null,{"children":"2-4"}],"个字符",["$","code",null,{"children":"rwx"}],"表示当前所属用户的权限，用数值表示为",["$","code",null,{"children":"4+2+1=7"}],"。 (3) 第",["$","code",null,{"children":"5-7"}],"个字符",["$","code",null,{"children":"rwx"}],"表示当前所属群组的权限，用数值表示为",["$","code",null,{"children":"4+2+1=7"}],"。 (4) 第",["$","code",null,{"children":"8-10"}],"个字符",["$","code",null,{"children":"r-x"}],"表示其他用户的权限，用数值表示为",["$","code",null,{"children":"4+1=5"}],"。 (5) 操作此文件的权限用数值表示为",["$","code",null,{"children":"775"}],"。"]}],["$","li",null,{"children":["权限更改 ",["$","code",null,{"children":"sudo chmod 765 filename"}]]}]]}],["$","h3",null,{"className":"content-header","id":"16-系统软硬件及开发工具","children":[["$","a",null,{"className":"break-words","href":"#16-系统软硬件及开发工具","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1.6 系统、软硬件及开发工具"]}],["$","ol",null,{"children":[["$","li",null,{"children":["以系统管理员(",["$","code",null,{"children":"root"}],")权限执行命令 ",["$","code",null,{"children":"sudo + 命令"}]]}],["$","li",null,{"children":["查看某端口对应进程",["$","code",null,{"children":"PID"}]," ",["$","code",null,{"children":"lsof -i:3000"}]]}],["$","li",null,{"children":["结束",["$","code",null,{"children":"PID"}],"对应的某进程 ",["$","code",null,{"children":"kill -9 PID"}]]}],["$","li",null,{"children":["重启",["$","code",null,{"children":"ssh"}]," ",["$","code",null,{"children":"sudo service ssh restart"}]]}],["$","li",null,{"children":["启动、重新启动或关闭",["$","code",null,{"children":"mongodb"}]," ",["$","code",null,{"children":"service mongod start/restart/stop"}]]}],["$","li",null,{"children":["更新软件包列表 ",["$","code",null,{"children":"apt-get update"}]]}],["$","li",null,{"children":["更新已安装的软件包 ",["$","code",null,{"children":"apt-get upgrade"}]," 注释：执行",["$","code",null,{"children":"apt-get upgrade"}],"命令之前应该先执行",["$","code",null,{"children":"apt-get update"}],"。"]}],["$","li",null,{"children":["安装",["$","code",null,{"children":"nginx"}]," ",["$","code",null,{"children":"apt-get install nginx"}]]}],["$","li",null,{"children":["查看数据盘 ",["$","code",null,{"children":"fdisk -l"}]]}],["$","li",null,{"children":["查看磁盘使用情况 ",["$","code",null,{"children":"df -h"}]]}]]}],["$","h2",null,{"className":"content-header","id":"2-项目部署","children":[["$","a",null,{"className":"break-words","href":"#2-项目部署","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2. 项目部署"]}],["$","p",null,{"children":["$","img",null,{"alt":"部署之路","src":"https://upload-images.jianshu.io/upload_images/4989175-e41d370e001f6afc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"}]}],["$","h3",null,{"className":"content-header","id":"21-选购域名服务器及备案","children":[["$","a",null,{"className":"break-words","href":"#21-选购域名服务器及备案","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.1 选购域名服务器及备案"]}],["$","ol",null,{"children":[["$","li",null,{"children":["域名提供厂商 爱名网、",["$","code",null,{"children":"GoDaddy"}],"、",["$","strong",null,{"children":"阿里云"}]," 注释：",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://wanwang.aliyun.com/domain","children":"阿里云域名注册"}]]}],["$","li",null,{"children":["服务器提供厂商 (1) 国外：亚马逊",["$","code",null,{"children":"AWS"}],"、",["$","code",null,{"children":"Linode"}],"、",["$","code",null,{"children":"DigitOcean"}],"/",["$","code",null,{"children":"HeroKu"}]," (2) 国内：",["$","strong",null,{"children":["阿里云",["$","code",null,{"children":"ECS"}]]}],"、青云/",["$","code",null,{"children":"UCloud"}],"/百度云"]}],["$","li",null,{"children":["阿里云服务器 (1) ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.aliyun.com/product/ecs","children":"服务器ECS选购"}]," ① 操作系统选择：",["$","code",null,{"children":"Ubuntu 14.04 64位"}]," ② 自定义密码(",["$","code",null,{"children":"root"}],")：",["$","code",null,{"children":"Aa*********"}]," ③ 安全组：类似防火墙功能，用于设置网络访问控制。 注释：阿里云 - 云服务器ECS - 立即购买 - 一键购买 - 推荐配置 - 入门型 - ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://promotion.aliyun.com/ntms/act/qwbk.html#floor1","children":"立即购买"}]," (2) ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://ecs.console.aliyun.com/#/home","children":"云服务器ECS查看"}]," 注释：使用阿里云遇到问题时，可以通过提交工单进行提问。"]}],["$","li",null,{"children":["域名备案 导航栏 - 备案 - 备案服务号申请/备案服务号管理 注释：",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://help.aliyun.com/knowledge_detail/36893.html","children":"阿里云ECS服务器可备案几个网站"}]]}]]}],["$","h3",null,{"className":"content-header","id":"22-远程登录服务器","children":[["$","a",null,{"className":"break-words","href":"#22-远程登录服务器","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.2 远程登录服务器"]}],["$","h4",null,{"className":"content-header","id":"221-root超级管理员权限登录","children":[["$","a",null,{"className":"break-words","href":"#221-root超级管理员权限登录","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.2.1 root超级管理员权限登录"]}],["$","ol",null,{"children":[["$","li",null,{"children":["第一次",["$","code",null,{"children":"root"}],"登录 命令行输入：",["$","code",null,{"children":"ssh root@47.96.***.***"}]," 密码：",["$","code",null,{"children":"Aa*********"}]," 注释：①",["$","code",null,{"children":"SSH"}],"是每一台",["$","code",null,{"children":"Linux"}],"电脑的标准配置(",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html","children":[["$","code",null,{"children":"SSH"}],"原理与运用"]}],")。 ② 退出",["$","code",null,{"children":"ssh"}],"登录命令为",["$","code",null,{"children":"control + d"}]," 。 注意：① ",["$","code",null,{"children":"root"}],"是超级管理员用户，使用",["$","code",null,{"children":"root"}],"权限操作服务器有一定的安全隐患。② 增强安全配置后的登录方式",["$","code",null,{"children":"ssh -p 39999 nmwei@47.96.***.***"}],"。"]}],["$","li",null,{"children":["查看硬盘信息 ",["$","code",null,{"children":"sudo fdisk -l"}]]}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Disk"}]," ",["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"vda",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"42.9"}]," ",["$","span",null,{"className":"token constant","children":"GB"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"42949672960"}]," bytes\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"255"}]," heads",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"63"}]," sectors",["$","span",null,{"className":"token operator","children":"/"}],"track",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"5221"}]," cylinders",["$","span",null,{"className":"token punctuation","children":","}]," total ",["$","span",null,{"className":"token number","children":"83886080"}]," sectors\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Units"}]," ",["$","span",null,{"className":"token operator","children":"="}]," sectors ",["$","span",null,{"className":"token keyword","children":"of"}]," ",["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token operator","children":"*"}]," ",["$","span",null,{"className":"token number","children":"512"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"512"}]," bytes\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Sector"}]," ",["$","span",null,{"className":"token function","children":"size"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"logical",["$","span",null,{"className":"token operator","children":"/"}],"physical",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"512"}]," bytes ",["$","span",null,{"className":"token operator","children":"/"}]," ",["$","span",null,{"className":"token number","children":"512"}]," bytes\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"I"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"O"}]," ",["$","span",null,{"className":"token function","children":"size"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"minimum",["$","span",null,{"className":"token operator","children":"/"}],"optimal",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"512"}]," bytes ",["$","span",null,{"className":"token operator","children":"/"}]," ",["$","span",null,{"className":"token number","children":"512"}]," bytes\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Disk"}]," identifier",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"0x00040f1a"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["   ",["$","span",null,{"className":"token maybe-class-name","children":"Device"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Boot"}],"      ",["$","span",null,{"className":"token maybe-class-name","children":"Start"}],"         ",["$","span",null,{"className":"token maybe-class-name","children":"End"}],"      ",["$","span",null,{"className":"token maybe-class-name","children":"Blocks"}],"   ",["$","span",null,{"className":"token maybe-class-name","children":"Id"}],"  ",["$","span",null,{"className":"token maybe-class-name","children":"System"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"vda1   ",["$","span",null,{"className":"token operator","children":"*"}],"        ",["$","span",null,{"className":"token number","children":"2048"}],"    ",["$","span",null,{"className":"token number","children":"83884031"}],"    ",["$","span",null,{"className":"token number","children":"41940992"}],"   ",["$","span",null,{"className":"token number","children":"83"}],"  ",["$","span",null,{"className":"token maybe-class-name","children":"Linux"}],"\n"]}]]}]}],["$","ol",null,{"start":"3","children":["$","li",null,{"children":["查看硬盘使用信息 ",["$","code",null,{"children":"df -h"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Filesystem"}],"      ",["$","span",null,{"className":"token maybe-class-name","children":"Size"}],"  ",["$","span",null,{"className":"token maybe-class-name","children":"Used"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Avail"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Use"}],["$","span",null,{"className":"token operator","children":"%"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Mounted"}]," on\n"]}],["$","span",null,{"className":"code-line","children":["udev            484M  ",["$","span",null,{"className":"token number","children":"4"}],["$","span",null,{"className":"token punctuation","children":"."}],"0K  484M   ",["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token operator","children":"%"}]," ",["$","span",null,{"className":"token operator","children":"/"}],"dev\n"]}],["$","span",null,{"className":"code-line","children":["tmpfs           100M  360K   99M   ",["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token operator","children":"%"}]," ",["$","span",null,{"className":"token operator","children":"/"}],"run\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"vda1        40G  ",["$","span",null,{"className":"token number","children":"3"}],["$","span",null,{"className":"token punctuation","children":"."}],"1G   35G   ",["$","span",null,{"className":"token number","children":"9"}],["$","span",null,{"className":"token operator","children":"%"}]," ",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}],["$","span",null,{"className":"code-line","children":["none            ",["$","span",null,{"className":"token number","children":"4"}],["$","span",null,{"className":"token punctuation","children":"."}],"0K     ",["$","span",null,{"className":"token number","children":"0"}],"  ",["$","span",null,{"className":"token number","children":"4"}],["$","span",null,{"className":"token punctuation","children":"."}],"0K   ",["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token operator","children":"%"}]," ",["$","span",null,{"className":"token operator","children":"/"}],"sys",["$","span",null,{"className":"token operator","children":"/"}],"fs",["$","span",null,{"className":"token operator","children":"/"}],"cgroup\n"]}],["$","span",null,{"className":"code-line","children":["none            ",["$","span",null,{"className":"token number","children":"5"}],["$","span",null,{"className":"token punctuation","children":"."}],"0M     ",["$","span",null,{"className":"token number","children":"0"}],"  ",["$","span",null,{"className":"token number","children":"5"}],["$","span",null,{"className":"token punctuation","children":"."}],"0M   ",["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token operator","children":"%"}]," ",["$","span",null,{"className":"token operator","children":"/"}],"run",["$","span",null,{"className":"token operator","children":"/"}],"lock\n"]}],["$","span",null,{"className":"code-line","children":["none            497M     ",["$","span",null,{"className":"token number","children":"0"}],"  497M   ",["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token operator","children":"%"}]," ",["$","span",null,{"className":"token operator","children":"/"}],"run",["$","span",null,{"className":"token operator","children":"/"}],"shm\n"]}],["$","span",null,{"className":"code-line","children":["none            100M     ",["$","span",null,{"className":"token number","children":"0"}],"  100M   ",["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token operator","children":"%"}]," ",["$","span",null,{"className":"token operator","children":"/"}],"run",["$","span",null,{"className":"token operator","children":"/"}],"user\n"]}]]}]}],["$","h4",null,{"className":"content-header","id":"222-创建用户及配置权限","children":[["$","a",null,{"className":"break-words","href":"#222-创建用户及配置权限","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.2.2 创建用户及配置权限"]}],["$","ol",null,{"children":[["$","li",null,{"children":["创建新用户 添加新用户: ",["$","code",null,{"children":"adduser nmwei"}]," 输入密码: ",["$","code",null,{"children":"Nmw*********"}]]}],["$","li",null,{"children":["给新用户添加权限 (1) 将",["$","code",null,{"children":"nmwei"}],"用户添加到",["$","code",null,{"children":"sudo"}],"分组 ",["$","code",null,{"children":"gpasswd -a nmwei sudo"}]," (2) 设置权限 ① 打开配置文件 ",["$","code",null,{"children":"sudo visudo"}]," ② 修改配置文件 ",["$","code",null,{"children":"# User privilege specification"}]," ",["$","code",null,{"children":"root ALL=(ALL:ALL) ALL"}]," ",["$","code",null,{"children":"nmwei ALL=(ALL:ALL) ALL"}]," ",["$","strong",null,{"children":["注意：配置文件中新添加内容(",["$","code",null,{"children":"nmwei ALL=(ALL:ALL) ALL "}],")表示",["$","code",null,{"children":"nmwei"}],"用户可以以",["$","code",null,{"children":"sudo + 命令"}],"的方式调用",["$","code",null,{"children":"root"}],"权限执行所有命令。"]}]," ③ 保存配置文件 退出：",["$","code",null,{"children":"control + X"}]," 保存：",["$","code",null,{"children":"shift + Y"}]," 确认：",["$","code",null,{"children":"return(回车)"}]," (3) 重启",["$","code",null,{"children":"ssh"}]," ",["$","code",null,{"children":"sudo service ssh restart"}]]}],["$","li",null,{"children":["使用新用户登录 登录：",["$","code",null,{"children":" ssh nmwei@47.96.***.***"}]," 密码：",["$","code",null,{"children":"Nmw*********"}]," 注释：① 登录成功之后，默认所在路径为",["$","code",null,{"children":"/home/nmwei"}],"。② ",["$","code",null,{"children":"~"}],"对应路径即为",["$","code",null,{"children":"/home/nmwei"}],"。"]}]]}],["$","h4",null,{"className":"content-header","id":"223-本地无密码ssh登录","children":[["$","a",null,{"className":"break-words","href":"#223-本地无密码ssh登录","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.2.3 本地无密码SSH登录"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","code",null,{"children":"SSH"}],"无密码登录介绍 (1) 操作过程：本地生成私钥和公钥，公钥添加到服务器 (2) 登录原理：本地私钥 → 本地添加到服务器的公钥 → 秘钥算法比对 → 登录成功 注意：如果本地之前已经生成过秘钥，则不用重新生成。否则会覆盖当前秘钥，导致无法连接之前比对成功的远程服务器",["$","code",null,{"children":"git"}],"仓库。"]}],["$","li",null,{"children":"本地生成秘钥 (1) 查看是否已有秘钥"}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["➜  ",["$","span",null,{"className":"token operator","children":"~"}]," pwd   #查看根路径\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token maybe-class-name","children":"Users"}],["$","span",null,{"className":"token operator","children":"/"}],"nimengwei\n"]}],["$","span",null,{"className":"code-line","children":["➜  ",["$","span",null,{"className":"token operator","children":"~"}]," ls ",["$","span",null,{"className":"token operator","children":"-"}],"a   ",["$","span",null,{"className":"token function","children":"#查看根目录下所有文件"}],["$","span",null,{"className":"token punctuation","children":"("}],"夹",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["➜  ",["$","span",null,{"className":"token operator","children":"~"}]," cd ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ssh"}],"   #进入",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ssh文件夹"}]," \n"]}],["$","span",null,{"className":"code-line","children":["➜  ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ssh"}]," ls   #查看",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"ssh文件夹下所有文件"}],["$","span",null,{"className":"token punctuation","children":"("}],"夹",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["id_rsa      id_rsa",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"pub"}],"  known_hosts\n"]}]]}]}],["$","p",null,{"children":["注释：①",["$","code",null,{"children":".ssh"}],"目录位置为",["$","code",null,{"children":"/Users/nimengwei/.ssh"}],"。 ②当前已经有",["$","code",null,{"children":".ssh"}],"目录以及",["$","code",null,{"children":"id_rsa"}],"(私钥)、 ",["$","code",null,{"children":"id_rsa.pub"}],"(公钥)文件，则表示本地已经生成过秘钥。 (2) 生成秘钥 如果本地没有生成过秘钥，则需要生成秘钥。"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["➜  ",["$","span",null,{"className":"token operator","children":"~"}]," ssh",["$","span",null,{"className":"token operator","children":"-"}],"keygen ",["$","span",null,{"className":"token operator","children":"-"}],"t rsa ",["$","span",null,{"className":"token operator","children":"-"}],"b ",["$","span",null,{"className":"token number","children":"4096"}]," ",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"C"}]," ",["$","span",null,{"className":"token string","children":"\"254060001@qq.com\""}],"  ",["$","span",null,{"className":"token function","children":"#连续回车"}],["$","span",null,{"className":"token punctuation","children":"("}],"不需要输入密码",["$","span",null,{"className":"token punctuation","children":")"}],"，则创建成功\n"]}]}]}],["$","p",null,{"children":["(3) 查看秘钥内容 查看私钥内容：",["$","code",null,{"children":"cat id_rsa"}]," 查看公钥内容：",["$","code",null,{"children":"cat id_rsa.pub"}]," (4) 加入代理 运行",["$","code",null,{"children":"ssh-agent"}],"代理：",["$","code",null,{"children":"eval \"$(ssh-agent -s)”"}]," 加入代理：",["$","code",null,{"children":"ssh-add ~/.ssh/id_rsa"}]," 3. 服务器生成秘钥 登录服务器：",["$","code",null,{"children":"ssh nmwei@47.96.***.***"}]," 查看有没有",["$","code",null,{"children":".ssh"}],"文件：",["$","code",null,{"children":"ls -a "}],"生成秘钥：",["$","code",null,{"children":"ssh-keygen -t rsa -b 4096 -C \"254060001@qq.com\""}]," 运行",["$","code",null,{"children":"ssh-agent"}],"代理：",["$","code",null,{"children":"eval \"$(ssh-agent -s)\""}]," 加入代理：",["$","code",null,{"children":"ssh-add ~/.ssh/id_rsa "}],"4. 添加本地公钥到服务器认证 (1) 复制本地公钥"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["➜  ",["$","span",null,{"className":"token operator","children":"~"}]," cd ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ssh"}],"\n"]}],["$","span",null,{"className":"code-line","children":["➜  ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ssh"}]," ls  \n"]}],["$","span",null,{"className":"code-line","children":["id_rsa      id_rsa",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"pub"}],"  known_hosts\n"]}],["$","span",null,{"className":"code-line","children":["➜  ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ssh"}]," cat id_rsa",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"pub"}]," \n"]}],["$","span",null,{"className":"code-line","children":["ssh",["$","span",null,{"className":"token operator","children":"-"}],"rsa ",["$","span",null,{"className":"token maybe-class-name","children":"AAAAB3NzaC1yc2EAAAADAQ"}],["$","span",null,{"className":"token operator spread","children":"..."}]," ",["$","span",null,{"className":"token number","children":"254060001"}],"@qq",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"com"}],"\n"]}],["$","span",null,{"className":"code-line","children":["➜  ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ssh"}]," \n"]}]]}]}],["$","p",null,{"children":["(2) 添加本地公钥 ① 创建/打开",["$","code",null,{"children":"authorized_keys"}],"文件"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ssh$"}]," vi authorized_keys\n"]}]}]}],["$","p",null,{"children":"② 切换到编辑模式"}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"ESC"}],"\n"]}]}]}],["$","p",null,{"children":"③ 粘贴本地公钥"}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["ssh",["$","span",null,{"className":"token operator","children":"-"}],"rsa ",["$","span",null,{"className":"token maybe-class-name","children":"AAAAB3NzaC1yc2EAAAAD"}],["$","span",null,{"className":"token operator spread","children":"..."}]," ",["$","span",null,{"className":"token number","children":"254060001"}],"@qq",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"com"}],"\n"]}]}]}],["$","p",null,{"children":"④ 保存并退出"}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["shift ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["wq",["$","span",null,{"className":"token operator","children":"!"}],"\n"]}]]}]}],["$","p",null,{"children":"(3) 授权并重启服务器"}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ssh$"}]," chmod ",["$","span",null,{"className":"token number","children":"600"}]," authorized_keys\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ssh$"}]," sudo service ssh restart\n"]}]]}]}],["$","ol",null,{"start":"5","children":["$","li",null,{"children":[["$","code",null,{"children":"ssh"}],"无密码登录"]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["➜  ",["$","span",null,{"className":"token operator","children":"~"}]," ssh nmwei@",["$","span",null,{"className":"token number","children":"47.96"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"*"}],"\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ \n"]}]]}]}],["$","ol",null,{"start":"6","children":["$","li",null,{"children":[["$","code",null,{"children":"ssh"}],"认证的其它使用场景 ",["$","code",null,{"children":"Github"}],"、",["$","code",null,{"children":"Bitbucket"}],"以及",["$","code",null,{"children":"Gitee"}],"等代码托管平台设置本地",["$","code",null,{"children":"SSH"}],"公钥(",["$","code",null,{"children":"id_rsa.pub"}],")，就可以使用",["$","code",null,{"children":"SSH"}],"认证进行克隆上传代码，否则只能使用",["$","code",null,{"children":"Https"}],"访问。 例如",["$","code",null,{"children":"Github"}],"：",["$","code",null,{"children":"Settings - SSH and GPG keys - New SSH key"}]]}]}],["$","h3",null,{"className":"content-header","id":"23-增强服务器安全等级","children":[["$","a",null,{"className":"break-words","href":"#23-增强服务器安全等级","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.3 增强服务器安全等级"]}],["$","h4",null,{"className":"content-header","id":"231-修改服务器默认登录端口","children":[["$","a",null,{"className":"break-words","href":"#231-修改服务器默认登录端口","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.3.1 修改服务器默认登录端口"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","code",null,{"children":"Liunx"}],"服务器默认登录端口为",["$","code",null,{"children":"22"}],"，使用默认登录端口有一定的安全隐患。可将服务器默认端口修改为其他端口。"]}],["$","li",null,{"children":"打开配置文件"}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ sudo vi ",["$","span",null,{"className":"token operator","children":"/"}],"etc",["$","span",null,{"className":"token operator","children":"/"}],"ssh",["$","span",null,{"className":"token operator","children":"/"}],"sshd_config\n"]}]}]}],["$","ol",null,{"start":"3","children":["$","li",null,{"children":"编辑配置文件"}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["# ",["$","span",null,{"className":"token maybe-class-name","children":"What"}]," ports",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token maybe-class-name","children":"IPs"}]," and protocols we listen ",["$","span",null,{"className":"token keyword control-flow","children":"for"}],"\n"]}],["$","span",null,{"className":"code-line","children":["# ",["$","span",null,{"className":"token maybe-class-name","children":"Port"}]," ",["$","span",null,{"className":"token number","children":"22"}],"  #禁用默认端口",["$","span",null,{"className":"token number","children":"22"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Port"}]," ",["$","span",null,{"className":"token number","children":"39999"}],"  #添加一个",["$","span",null,{"className":"token number","children":"39999"}],"登录端口\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator spread","children":"..."}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token punctuation","children":"."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token property-access","children":["$","span",null,{"className":"token maybe-class-name","children":"AllowUsers"}]}]," root nmwei #服务器只允许root和nmwei用户登录\n"]}]]}]}],["$","p",null,{"children":["注意：① 修改",["$","code",null,{"children":"sshd_config"}],"配置文件之前，应新开一个终端并登录到服务器，避免配置文件修改失败之后无法登录。② ",["$","code",null,{"children":"1-1024"}],"之间的端口被系统占用，不要使用。最大端口号可设置为",["$","code",null,{"children":"65536"}],"。③ 可以设置多个登录端口，即设置多行 ",["$","code",null,{"children":"Port ****"}]," 。 4. 重启",["$","code",null,{"children":"ssh"}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ sudo service ssh restart\n"]}]}]}],["$","ol",null,{"start":"5","children":[["$","li",null,{"children":["配置阿里云",["$","code",null,{"children":"ECS"}],"安全组规则 ",["$","img",null,{"alt":"ECS安全组配置","src":"https://upload-images.jianshu.io/upload_images/4989175-3632dba259bd932c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"}]]}],["$","li",null,{"children":["验证",["$","code",null,{"children":"ssh"}],"登录接口"]}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["➜  ",["$","span",null,{"className":"token operator","children":"~"}]," ssh nmwei@",["$","span",null,{"className":"token number","children":"47.96"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"*"}],"            \n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token property literal-property","children":"ssh"}],["$","span",null,{"className":"token operator","children":":"}]," connect to host ",["$","span",null,{"className":"token number","children":"47.96"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"*"}]," port ",["$","span",null,{"className":"token number","children":"22"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Connection"}]," refused\n"]}],["$","span",null,{"className":"code-line","children":["➜  ",["$","span",null,{"className":"token operator","children":"~"}]," ssh ",["$","span",null,{"className":"token operator","children":"-"}],"p ",["$","span",null,{"className":"token number","children":"39999"}]," nmwei@",["$","span",null,{"className":"token number","children":"47.96"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"*"}],"\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ \n"]}]]}]}],["$","p",null,{"children":["注释：①",["$","code",null,{"children":"22"}],"默认端口无法登录，只能通过",["$","code",null,{"children":"39999"}],"登录端口。 ②此时服务器有",["$","code",null,{"children":"ssh -p 39999 root@47.96.***.***"}],"和",["$","code",null,{"children":"ssh -p 39999 nmwei@47.96.***.***"}],"两种登录方式。"]}],["$","h4",null,{"className":"content-header","id":"232-关闭服务器root登录权限","children":[["$","a",null,{"className":"break-words","href":"#232-关闭服务器root登录权限","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.3.2 关闭服务器root登录权限"]}],["$","ol",null,{"children":[["$","li",null,{"children":["阿里云服务超级管理员用户名都为",["$","code",null,{"children":"root"}],"，有一定的安全隐患。可将",["$","code",null,{"children":"root"}],"超级管理员登录权限关闭。"]}],["$","li",null,{"children":"打开配置文件"}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ sudo vi ",["$","span",null,{"className":"token operator","children":"/"}],"etc",["$","span",null,{"className":"token operator","children":"/"}],"ssh",["$","span",null,{"className":"token operator","children":"/"}],"sshd_config\n"]}]}]}],["$","ol",null,{"start":"3","children":["$","li",null,{"children":"编辑配置文件"}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"PermitRootLogin"}]," no #不允许root登录\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"PasswordAuthentication"}]," yes #允许使用密码登录\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"AllowUsers"}]," nmwei #只允许nmwei用户登录\n"]}]]}]}],["$","ol",null,{"start":"4","children":["$","li",null,{"children":["重启",["$","code",null,{"children":"ssh"}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ sudo service ssh restart\n"]}]}]}],["$","ol",null,{"start":"5","children":["$","li",null,{"children":["验证",["$","code",null,{"children":"root"}],"登录"]}]}],["$","$L16",null,{"className":"language-vim","children":["$","code",null,{"className":"code-highlight language-vim","children":[["$","span",null,{"className":"code-line","children":["➜  ~ ssh ",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token keyword","children":"p"}]," ",["$","span",null,{"className":"token number","children":"39999"}]," root@",["$","span",null,{"className":"token number","children":"47.96"}],["$","span",null,{"className":"token operator","children":"."}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token operator","children":"."}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token operator","children":"*"}],"\n"]}],["$","span",null,{"className":"code-line","children":["root@",["$","span",null,{"className":"token number","children":"47.96"}],["$","span",null,{"className":"token operator","children":"."}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token operator","children":"."}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token operator","children":"*"}],"'s password",["$","span",null,{"className":"token punctuation","children":":"}]," \n"]}],["$","span",null,{"className":"code-line","children":["Permission denied",["$","span",null,{"className":"token punctuation","children":","}]," please ",["$","span",null,{"className":"token keyword","children":"try"}]," again",["$","span",null,{"className":"token operator","children":"."}],"\n"]}],["$","span",null,{"className":"code-line","children":["➜  ~ ssh ",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token keyword","children":"p"}]," ",["$","span",null,{"className":"token number","children":"39999"}]," nmwei@",["$","span",null,{"className":"token number","children":"47.96"}],["$","span",null,{"className":"token operator","children":"."}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token operator","children":"."}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token operator","children":"*"}],"\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token punctuation","children":":"}],"~$ \n"]}]]}]}],["$","p",null,{"children":["注释：①",["$","code",null,{"children":"root"}],"超级管理员无法登录，只有",["$","code",null,{"children":"nmwei"}],"用户可以登录。②当前服务器只有",["$","code",null,{"children":"ssh -p 39999 nmwei@47.96.***.***"}],"一种登录方式。"]}],["$","h3",null,{"className":"content-header","id":"233-配置-iptables-和-fail2ban","children":[["$","a",null,{"className":"break-words","href":"#233-配置-iptables-和-fail2ban","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.3.3 配置 iptables 和 Fail2Ban"]}],["$","h3",null,{"className":"content-header","id":"24-搭建-nodejs-生产环境","children":[["$","a",null,{"className":"break-words","href":"#24-搭建-nodejs-生产环境","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.4 搭建 Nodejs 生产环境"]}],["$","h4",null,{"className":"content-header","id":"241-搭建node环境","children":[["$","a",null,{"className":"break-words","href":"#241-搭建node环境","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.4.1 搭建Node环境"]}],["$","ol",null,{"children":[["$","li",null,{"children":["更新软件包列表 ",["$","code",null,{"children":"sudo apt-get update"}]]}],["$","li",null,{"children":["安装",["$","code",null,{"children":"linux"}],"软件包文件 ",["$","code",null,{"children":"sudo apt-get install vim openssl build-essential libssl-dev wget curl git"}]]}],["$","li",null,{"children":["安装",["$","code",null,{"children":"Nodejs"}]," ① 安装",["$","code",null,{"children":"nvm"}]," ",["$","code",null,{"children":"wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash"}]," 注释：",["$","code",null,{"children":"nvm"}],"被安装到了",["$","code",null,{"children":"~/.nvm"}],"目录。 ② 使用",["$","code",null,{"children":"nvm"}],"安装",["$","code",null,{"children":"Nodejs"}]," ",["$","code",null,{"children":"nvm install v8.11.3"}]," ③ 使用该",["$","code",null,{"children":"Nodejs"}],"版本 ",["$","code",null,{"children":"nvm use v8.11.3"}]," ④ 将该",["$","code",null,{"children":"Nodejs"}],"版本设置为默认版本 ",["$","code",null,{"children":"nvm alias default v8.11.3"}]," 注释：使用",["$","code",null,{"children":"nvm"}],"安装的",["$","code",null,{"children":"node"}],"目录为",["$","code",null,{"children":"~/.nvm/versions/node"}],"。例如，",["$","code",null,{"children":"v8.11.3"}],"版本",["$","code",null,{"children":"node"}],"安装目录为",["$","code",null,{"children":"~/.nvm/versions/node/v8.11.3/bin"}],"，全局安装的",["$","code",null,{"children":"node_modules"}],"目录为",["$","code",null,{"children":"~/.nvm/versions/node/v8.11.3/lib"}],"。 参考：",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/creationix/nvm","children":"nvm"}]]}],["$","li",null,{"children":["安装",["$","code",null,{"children":"npm"}],"(指定国内镜像源) ",["$","code",null,{"children":"npm --registry=https://registry.npm.taobao.org install -g npm"}]," 注释：① 临时使用淘宝镜像源安装",["$","code",null,{"children":"npm --registry https://registry.npm.taobao.org install express"}],"。② 持久使用淘宝镜像源",["$","code",null,{"children":"npm config set registry https://registry.npm.taobao.org"}],"。"]}],["$","li",null,{"children":["安装",["$","code",null,{"children":"cnpm"}]," ",["$","code",null,{"children":"npm install -g cnpm"}]]}],["$","li",null,{"children":["修改系统文件监督数目 ",["$","code",null,{"children":"echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf && sudo sysctl -p"}]]}],["$","li",null,{"children":["安装",["$","code",null,{"children":"npm"}],"包文件 ",["$","code",null,{"children":"npm i pm2 webpack gulp grunt-cli -g"}]]}]]}],["$","h4",null,{"className":"content-header","id":"242-pm2使用介绍","children":[["$","a",null,{"className":"break-words","href":"#242-pm2使用介绍","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.4.2 PM2使用介绍"]}],["$","ol",null,{"children":[["$","li",null,{"children":["开启一个服务 ",["$","code",null,{"children":"pm2 start app.js"}]]}],["$","li",null,{"children":["关闭一个服务 ",["$","code",null,{"children":"pm2 stop app.js"}]]}],["$","li",null,{"children":["删除一个服务 ",["$","code",null,{"children":"pm2 delete app.js"}]]}],["$","li",null,{"children":["查看服务列表 ",["$","code",null,{"children":"pm2 list"}]]}],["$","li",null,{"children":["展示一个服务信息 ",["$","code",null,{"children":"pm2 show app"}]," 注释：可以查看到服务对应的文件地址(",["$","code",null,{"children":"script path"}],")以及日志地址(",["$","code",null,{"children":"log path"}],")。"]}],["$","li",null,{"children":["展示所有服务日志 ",["$","code",null,{"children":"pm2 logs"}]]}],["$","li",null,{"children":["清除所有日志 ",["$","code",null,{"children":"pm2 flush"}]]}]]}],["$","h3",null,{"className":"content-header","id":"25-配置-nginx-实现反向代理","children":[["$","a",null,{"className":"break-words","href":"#25-配置-nginx-实现反向代理","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.5 配置 Nginx 实现反向代理"]}],["$","ol",null,{"children":[["$","li",null,{"children":["安装",["$","code",null,{"children":"Nginx"}]," (1) 更新包列表 ",["$","code",null,{"children":"sudo apt-get update"}]," (2) 安装",["$","code",null,{"children":"nginx"}]," ",["$","code",null,{"children":"sudo apt-get install nginx"}]," (3) 查看",["$","code",null,{"children":"nginx"}],"版本 ",["$","code",null,{"children":"nginx -v"}]]}],["$","li",null,{"children":[["$","code",null,{"children":"nginx"}],"配置代理转发 (1) 创建/打开",["$","code",null,{"children":"nginx"}],"代理配置文件"]}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"$$ cd ",["$","span",null,{"className":"token operator","children":"/"}],"etc",["$","span",null,{"className":"token operator","children":"/"}],"nginx",["$","span",null,{"className":"token operator","children":"/"}],"conf",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"d"}],"\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"etc",["$","span",null,{"className":"token operator","children":"/"}],"nginx",["$","span",null,{"className":"token operator","children":"/"}],"conf",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"d$"}]," sudo vi  www",["$","span",null,{"className":"token operator","children":"-"}],"nimengwei",["$","span",null,{"className":"token operator","children":"-"}],"com",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token number","children":"3000"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"conf"}],"\n"]}]]}]}],["$","p",null,{"children":["注释：",["$","code",null,{"children":"nginx"}],"安装目录为",["$","code",null,{"children":"/etc/nginx"}],"。② ",["$","code",null,{"children":"nginx"}],"配置文件目录为",["$","code",null,{"children":"/etc/nginx/conf.d"}],"。 (2) 编辑",["$","code",null,{"children":"nginx"}],"代理配置文件"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["upstream website ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  server ",["$","span",null,{"className":"token number","children":"127.0"}],["$","span",null,{"className":"token number","children":".0"}],["$","span",null,{"className":"token number","children":".1"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"3000"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["server ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" listen ",["$","span",null,{"className":"token number","children":"80"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" server_name ",["$","span",null,{"className":"token number","children":"47.96"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token dom variable","children":"location"}]," ",["$","span",null,{"className":"token operator","children":"/"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token constant","children":"X"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"Real"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"IP"}]," $remote_addr",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token constant","children":"X"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"Forward"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"For"}]," $proxy_add_x_forwarded_for",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token maybe-class-name","children":"Host"}]," $http_host",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token constant","children":"X"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"Nginx"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token class-name known-class-name","children":"Proxy"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_pass http",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token operator","children":"/"}],"website",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_redirect off",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","p",null,{"children":["注释：该",["$","code",null,{"children":"nginx"}],"代理配置文件的含义为当用户访问",["$","code",null,{"children":"47.96.***.***"}],"时，转发到本机的",["$","code",null,{"children":"http:127.0.0.1:3000"}],"。 (3) ",["$","code",null,{"children":"nginx"}],"测试及重启 测试",["$","code",null,{"children":"nginx"}],"配置文件是否正确：",["$","code",null,{"children":"sudo nginx -t"}]," ",["$","code",null,{"children":"nginx"}],"重启：",["$","code",null,{"children":"sudo nginx -s reload"}]," 注释：",["$","code",null,{"children":"nginx"}],"主页路径为",["$","code",null,{"children":"/usr/share/nginx/html"}]," 3. 返回头隐藏",["$","code",null,{"children":"nginx"}],"版本信息 (1) 通过",["$","code",null,{"children":"nginx"}],"代理的服务会返回",["$","code",null,{"children":"nginx"}],"版本信息 响应头",["$","code",null,{"children":"Response Headers"}],"中",["$","code",null,{"children":"Server"}],"字段值为",["$","code",null,{"children":"nginx/1.4.6 (Ubuntu)"}],"。 (2) 编辑",["$","code",null,{"children":"nginx"}],"配置文件"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ cd ",["$","span",null,{"className":"token operator","children":"/"}],"etc",["$","span",null,{"className":"token operator","children":"/"}],"nginx\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"etc",["$","span",null,{"className":"token operator","children":"/"}],"nginx$ ls\n"]}],["$","span",null,{"className":"code-line","children":["conf",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"d"}],"          mime",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"types"}],"           nginx",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"conf"}],"       sites",["$","span",null,{"className":"token operator","children":"-"}],"enabled\n"]}],["$","span",null,{"className":"code-line","children":["fastcgi_params  naxsi_core",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"rules"}],"     proxy_params     uwsgi_params\n"]}],["$","span",null,{"className":"code-line","children":["koi",["$","span",null,{"className":"token operator","children":"-"}],"utf         naxsi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"rules"}],"          scgi_params      win",["$","span",null,{"className":"token operator","children":"-"}],"utf\n"]}],["$","span",null,{"className":"code-line","children":["koi",["$","span",null,{"className":"token operator","children":"-"}],"win         naxsi",["$","span",null,{"className":"token operator","children":"-"}],"ui",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"conf"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token number","children":"1.4"}],["$","span",null,{"className":"token number","children":".1"}],"  sites",["$","span",null,{"className":"token operator","children":"-"}],"available\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"etc",["$","span",null,{"className":"token operator","children":"/"}],"nginx$ sudo vi nginx",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"conf"}],"\n"]}]]}]}],["$","p",null,{"children":["(3) 取消",["$","code",null,{"children":"server_tokens"}],"字段注释"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["server_tokens off",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]}]}],["$","p",null,{"children":["(4) ",["$","code",null,{"children":"nginx"}],"重启 ",["$","code",null,{"children":"sudo nginx -s reload"}]," 注释：此时响应头",["$","code",null,{"children":"Response Headers"}],"中",["$","code",null,{"children":"Server"}],"字段值为",["$","code",null,{"children":"nginx"}],"。"]}],["$","h3",null,{"className":"content-header","id":"26-管理域名解析","children":[["$","a",null,{"className":"break-words","href":"#26-管理域名解析","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.6 管理域名解析"]}],["$","h4",null,{"className":"content-header","id":"261-域名dns服务器","children":[["$","a",null,{"className":"break-words","href":"#261-域名dns服务器","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.6.1 域名DNS服务器"]}],["$","ol",null,{"children":[["$","li",null,{"children":["域名解析需要一个",["$","code",null,{"children":"DNS"}],"服务器 ",["$","code",null,{"children":"DNS"}],"服务器可以将域名匹配到对应的",["$","code",null,{"children":"IP"}],"地址。 一个域名只能够对应一个",["$","code",null,{"children":"IP"}],"地址，但一个",["$","code",null,{"children":"IP"}],"地址可以对应多个域名。"]}],["$","li",null,{"children":["阿里云提供了云解析",["$","code",null,{"children":"DNS"}],"服务 当前分域名配的DNS服务器是：",["$","code",null,{"children":"dns30.hichina.com"}],", ",["$","code",null,{"children":"dns29.hichina.com"}]]}],["$","li",null,{"children":["如何修改阿里云购买域名的",["$","code",null,{"children":"DNS"}],"服务器 登录阿里云 - 控制台 - 域名 - 管理 -修改",["$","code",null,{"children":"DNS"}]," 参考：",["$","code",null,{"children":"DNSPod"}],"官网 - 常见问题 - 功能介绍及使用教程 - 各个注册商修改域名",["$","code",null,{"children":"DNS"}],"地址的方法 - ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://support.dnspod.cn/Kb/showarticle/tsid/40/","children":"万网注册商域名修改DNS地址"}]]}]]}],["$","h4",null,{"className":"content-header","id":"262-域名解析","children":[["$","a",null,{"className":"break-words","href":"#262-域名解析","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.6.2 域名解析"]}],["$","ol",null,{"children":["$","li",null,{"children":"主机记录"}]}],["$","div",null,{"className":"w-full overflow-x-auto","children":["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"主机记录"}],["$","th",null,{"children":"含义"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"www"}]}],["$","td",null,{"children":["解析后的域名为 ",["$","code",null,{"children":"www.nimengwei.com"}]]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"@"}]}],["$","td",null,{"children":["直接解析主域名 ",["$","code",null,{"children":"nimengwei.com"}]]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"*"}]}],["$","td",null,{"children":["泛解析，匹配其他所有域名 ",["$","code",null,{"children":"*.nimengwei.com"}]]}]]}]]}]]}]}],["$","ol",null,{"start":"2","children":["$","li",null,{"children":"记录类型"}]}],["$","div",null,{"className":"w-full overflow-x-auto","children":["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"记录类型"}],["$","th",null,{"children":"使用场景"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":["$","code",null,{"children":"A记录"}]}]}],["$","td",null,{"children":["地址记录，用来指定域名的**",["$","code",null,{"children":"IPv4"}],"地址**（如：",["$","code",null,{"children":"8.8.8.8"}],"），如果需要将域名指向一个",["$","code",null,{"children":"IP"}],"地址，就需要添加",["$","code",null,{"children":"A"}],"记录。"]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":["$","code",null,{"children":"CNAME"}]}]}],["$","td",null,{"children":["如果需要将域名指向",["$","strong",null,{"children":"另一个域名"}],"，再由另一个域名提供",["$","code",null,{"children":"ip"}],"地址，就需要添加",["$","code",null,{"children":"CNAME"}],"记录。"]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":["$","code",null,{"children":"TXT"}]}]}],["$","td",null,{"children":["在这里可以填写任何东西，长度限制",["$","code",null,{"children":"255"}],"。绝大多数的",["$","code",null,{"children":"TXT"}],"记录是用来做",["$","code",null,{"children":"SPF"}],"记录（反垃圾邮件）。"]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"NS"}]}],["$","td",null,{"children":["域名服务器记录，如果需要把子域名交给其他",["$","code",null,{"children":"DNS"}],"服务商解析，就需要添加",["$","code",null,{"children":"NS"}],"记录。"]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"AAAA"}]}],["$","td",null,{"children":["用来指定主机名（或域名）对应的",["$","code",null,{"children":"IPv6"}],"地址（例如：",["$","code",null,{"children":"ff06:0:0:0:0:0:0:c3"}],"）记录 。"]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":["$","code",null,{"children":"MX"}]}]}],["$","td",null,{"children":["如果需要设置邮箱，让邮箱能收到邮件，就需要添加",["$","code",null,{"children":"MX"}],"记录。"]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["显性",["$","code",null,{"children":"URL"}]]}],["$","td",null,{"children":["从一个地址",["$","code",null,{"children":"301"}],"重定向到另一个地址的时候，就需要添加显性",["$","code",null,{"children":"URL"}],"记录（注：",["$","code",null,{"children":"DNSPod"}],"目前只支持",["$","code",null,{"children":"301"}],"重定向）。"]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["隐性",["$","code",null,{"children":"URL"}]]}],["$","td",null,{"children":["类似于显性",["$","code",null,{"children":"URL"}],"，区别在于隐性",["$","code",null,{"children":"URL"}],"不会改变地址栏中的域名。"]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"SRV"}]}],["$","td",null,{"children":["记录了哪台计算机提供了哪个服务。格式为：服务的名字、点、协议的类型，例如：",["$","code",null,{"children":"_xmpp-server._tcp"}],"。"]}]]}]]}]]}]}],["$","ol",null,{"start":"3","children":["$","li",null,{"children":["设置",["$","code",null,{"children":"DNS"}],"解析实现域名访问七牛云资源"]}]}],["$","p",null,{"children":["(1) 操作七牛云 进入七牛云 - 资源主页 - 对象存储 - 新建/选择存储空间 - 融合",["$","code",null,{"children":"CDN"}],"加速域名 - 立即绑定一个域名 - 加速域名(",["$","code",null,{"children":"weixin.cloud.nimengwei.com"}],") 进入七牛云 - 资源主页 - 融合",["$","code",null,{"children":"CDN"}]," -域名管理 - 复制",["$","code",null,{"children":"CNAME"}],"记录值 (2) 操作阿里云 - 登录阿里云 - 控制台 - 域名 - 解析 添加记录 - 选择",["$","code",null,{"children":"CNAME"}]," - 填写主机记录(",["$","code",null,{"children":"weixin.cloud"}],") - 粘贴记录值 - 添加 ",["$","img",null,{"alt":"DNS解析七牛云资源","src":"https://upload-images.jianshu.io/upload_images/4989175-ffd7cb7dd77b9c8d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"}]]}],["$","p",null,{"children":["(3) 测试 进入七牛云 - 资源主页 - 对象存储 - 选择存储空间 - 内容管理 - 选择一张图片 - 复制外链 - 打开外链 - 将",["$","code",null,{"children":"url"}],"中七牛默认外链域名",["$","code",null,{"children":"pdrecbudd.bkt.clouddn.com"}],"替换为",["$","code",null,{"children":"weixin.cloud.nimengwei.com"}]," - 成功访问"]}],["$","h3",null,{"className":"content-header","id":"27-服务器配置安装-mongodb","children":[["$","a",null,{"className":"break-words","href":"#27-服务器配置安装-mongodb","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.7 服务器配置安装 MongoDB"]}],["$","h4",null,{"className":"content-header","id":"271-ubuntu-1404系统安装-mongodb","children":[["$","a",null,{"className":"break-words","href":"#271-ubuntu-1404系统安装-mongodb","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.7.1 Ubuntu 14.04系统安装 MongoDB"]}],["$","ol",null,{"children":[["$","li",null,{"children":["必应搜索",["$","code",null,{"children":"install mongodb on ubuntu"}]," ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/","children":"安装文档：Install MongoDB Community Edition on Ubuntu"}]," 注释：社区版本(",["$","code",null,{"children":"Community"}],")是免费的，企业版本(",["$","code",null,{"children":"Enterprise"}],")是收费的。"]}],["$","li",null,{"children":["安装",["$","code",null,{"children":"MongoDB"}]]}]]}],["$","p",null,{"children":["(1) ",["$","code",null,{"children":"Import the public key used by the package management system."}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["sudo apt",["$","span",null,{"className":"token operator","children":"-"}],"key adv ",["$","span",null,{"className":"token operator","children":"--"}],"keyserver hkp",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token operator","children":"/"}],"keyserver",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ubuntu"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"com"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"80"}]," ",["$","span",null,{"className":"token operator","children":"--"}],"recv 9DA31620334BD75D9DCB49F368818C72E52529D4\n"]}]}]}],["$","p",null,{"children":["(2) ",["$","code",null,{"children":"Create a list file for MongoDB."}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["echo ",["$","span",null,{"className":"token string","children":"\"deb [ arch=amd64 ] https://repo.mongodb.org/apt/ubuntu trusty/mongodb-org/4.0 multiverse\""}]," ",["$","span",null,{"className":"token operator","children":"|"}]," sudo tee ",["$","span",null,{"className":"token operator","children":"/"}],"etc",["$","span",null,{"className":"token operator","children":"/"}],"apt",["$","span",null,{"className":"token operator","children":"/"}],"sources",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"list"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"d"}],["$","span",null,{"className":"token operator","children":"/"}],"mongodb",["$","span",null,{"className":"token operator","children":"-"}],"org",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token number","children":"4.0"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"list"}],"\n"]}]}]}],["$","p",null,{"children":["(3) ",["$","code",null,{"children":"Reload local package database."}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["sudo apt",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token keyword","children":"get"}]," update\n"]}]}]}],["$","p",null,{"children":["(4) ",["$","code",null,{"children":"Install the MongoDB packages."}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["sudo apt",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token keyword","children":"get"}]," install ",["$","span",null,{"className":"token operator","children":"-"}],"y mongodb",["$","span",null,{"className":"token operator","children":"-"}],"org\n"]}]}]}],["$","ol",null,{"start":"3","children":["$","li",null,{"children":["操作",["$","code",null,{"children":"MongoDB"}]]}]}],["$","p",null,{"children":["(1) 启动",["$","code",null,{"children":"MongoDB"}]," ",["$","code",null,{"children":"sudo service mongod start"}]," (2) 重新启动",["$","code",null,{"children":"MongoDB"}]," ",["$","code",null,{"children":"sudo service mongod restart"}]," (3) 关闭",["$","code",null,{"children":"MongoDB"}]," ",["$","code",null,{"children":"sudo service mongod stop"}]," (4) ",["$","strong",null,{"children":["修改",["$","code",null,{"children":"MongoDB"}],"默认端口"]}]," 编辑文件配置文件：",["$","code",null,{"children":"sudo vi /etc/mongod.conf"}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token property literal-property","children":"net"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"port"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"19999"}],"\n"]}]]}]}],["$","p",null,{"children":["(5) 连接",["$","code",null,{"children":"MongoDB"}],": ",["$","code",null,{"children":"mongo --port 19999"}]]}],["$","h4",null,{"className":"content-header","id":"272-mongodb单表及数据库的导入导出","children":[["$","a",null,{"className":"break-words","href":"#272-mongodb单表及数据库的导入导出","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.7.2 MongoDB单表及数据库的导入导出"]}],["$","ol",null,{"children":[["$","li",null,{"children":["上传数据库 (1) ",["$","strong",null,{"children":"本地"}],"数据库备份 ",["$","code",null,{"children":"mongodump -h 127.0.0.1:27017 -d dumall(数据库名字) -o dumall-backup(生成备份文件夹名字)"}]," 注释：授权启动的",["$","code",null,{"children":"MongoDB"}],"导出数据库的命令为：",["$","code",null,{"children":"mongodump -h 127.0.0.1:27017 -d dumall(数据库名字) -u dumall_manager(数据库用户名) -p dumall*********(数据库用户密码) -o dumall-backup(生成备份文件夹名字)"}],"。与未授权启动相比，新增用户名密码参数：",["$","code",null,{"children":"-u 数据库用户名 -p 数据库用户密码"}],"。 (2) 上传数据库备份 方法一：命令行上传 ① ",["$","strong",null,{"children":"本地"}],"打包压缩",["$","code",null,{"children":"dumall-backup"}],"文件夹 ",["$","code",null,{"children":"tar zcvf dumall.tar.gz(要生成的压缩包名字) dumall-backup(要打包的源文件夹)"}]," ② ",["$","strong",null,{"children":"本地"}],"上传压缩包 ",["$","code",null,{"children":"scp -P 39999 ./dumall.tar.gz nmwei@47.96.***.***:/home/nmwei/dbbackup/dumall-backup(上传到服务器的目录)"}]," ③ ",["$","strong",null,{"children":"服务器端"}],"解压缩包 ",["$","code",null,{"children":"tar xvf dumall.tar.gz "}],"方法二：客户端上传 使用",["$","code",null,{"children":"FileZillia"}],"客户端将",["$","code",null,{"children":"dumall-backup"}],"文件夹上传到服务器 (3) 在",["$","strong",null,{"children":"服务器端"}],"导入",["$","code",null,{"children":"dumall-backup"}],"数据库 ",["$","code",null,{"children":"mongorestore -h 127.0.0.1:19999 -d dumall(生成的数据库名称) ./dbbackup/dumall-backup/dumall/(数据库表文件夹)"}]," 注释：向授权启动的",["$","code",null,{"children":"MongoDB"}],"导入数据库，则新增用户名密码参数：",["$","code",null,{"children":"-u 数据库用户名 -p 数据库用户密码"}],"。"]}],["$","li",null,{"children":["上传数据库表 (1) ",["$","strong",null,{"children":"本地"}],"数据库表导出 方法一：",["$","code",null,{"children":"MongoHub"}],"导出 方法二：本地命令行导出 ",["$","code",null,{"children":"mongoexport -d(指定数据库) demo -c(指定表名称) user -q(过滤条件，可以省略) '{\"name\": {$ne: null}}' -o(导出文件名) ./user.json"}]," 注释：授权启动的",["$","code",null,{"children":"MongoDB"}],"导出数据库表，则新增用户名密码参数：",["$","code",null,{"children":"-u 数据库用户名 -p 数据库用户密码"}],"。 (2) ",["$","strong",null,{"children":"本地"}],"上传数据库表 方法一：命令行上传 ",["$","code",null,{"children":"scp -P 39999 ./user.json(本地文件) nmwei@47.96.***.***:/home/nmwei/dbbackup/dumall-backup/(上传到服务器的目录)"}]," 注释：从服务器下载文件命令为：",["$","code",null,{"children":"scp -P 39999 nmwei@47.96.***.***:/home/nmwei/dbbackup/dumall-backup/user.json(服务器文件) ./(本地文件目录)"}]," 方法二：客户端上传 使用",["$","code",null,{"children":"FileZillia"}],"客户端将",["$","code",null,{"children":"user.json"}],"上传到服务器。 (3) 在",["$","strong",null,{"children":"服务器端"}],"导入",["$","code",null,{"children":"user.json"}],"表 ",["$","code",null,{"children":"mongoimport -h 127.0.0.1:19999 -d(指定数据库) demo -c(指定表名称) user ./dbbackup/dumall-backup/user.json"}]," 注释：向授权启动的",["$","code",null,{"children":"MongoDB"}],"导入数据表，新增用户名密码参数：",["$","code",null,{"children":"-u 数据库用户名 -p 数据库用户密码"}],"。"]}]]}],["$","h4",null,{"className":"content-header","id":"273-线上mongodb配置读写权限","children":[["$","a",null,{"className":"break-words","href":"#273-线上mongodb配置读写权限","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.7.3 线上MongoDB配置读写权限"]}],["$","ol",null,{"children":["$","li",null,{"children":"创建用户"}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ mongo ",["$","span",null,{"className":"token operator","children":"--"}],"port ",["$","span",null,{"className":"token number","children":"19999"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":">"}]," use admin\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":">"}]," db",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"createUser"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token property literal-property","children":"user"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token string","children":"'userAdmin'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token property literal-property","children":"pwd"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token string","children":"'userAdmin*********'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token property literal-property","children":"roles"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"\"userAdminAnyDatabase\""}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":">"}]," db",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"createUser"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token property literal-property","children":"user"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token string","children":"\"dbAdmin\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token property literal-property","children":"pwd"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token string","children":"\"dbAdmin*********\""}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token property literal-property","children":"roles"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"\"readWriteAnyDatabase\""}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token string","children":"\"dbAdminAnyDatabase\""}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token string","children":"\"clusterAdmin\""}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":">"}]," use dumall\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":">"}]," db",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"createUser"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token property literal-property","children":"user"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token string","children":"'dumall'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token property literal-property","children":"pwd"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token string","children":"'dumall*********'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token property literal-property","children":"roles"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token property literal-property","children":"role"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token string","children":"'readWrite'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token property literal-property","children":"db"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'dumall'"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":">"}]," use admin\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":">"}]," db",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"system"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"users"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"find"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"count"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"3"}],"\n"]}]]}]}],["$","p",null,{"children":["注释：① 创建",["$","code",null,{"children":"dumall"}],"用户需要先使用",["$","code",null,{"children":"use dumall"}],"命令进入",["$","code",null,{"children":"dumall"}],"数据库。② ",["$","code",null,{"children":"userAdmin"}],"管理员(",["$","code",null,{"children":"[\"userAdminAnyDatabase\"]"}],")，可在",["$","code",null,{"children":"admin"}],"中创建用户。",["$","code",null,{"children":"dbAdmin"}],"管理员(",["$","code",null,{"children":"[\"readWriteAnyDatabase\",\"dbAdminAnyDatabase\",\"clusterAdmin\"]"}],")，拥有增删改查任意数据库、复制、集群操作的权限。"]}],["$","ol",null,{"start":"2","children":["$","li",null,{"children":["认证登录 (1) 打开配置文件 ",["$","code",null,{"children":"sudo vi /etc/mongod.conf"}]," (2) 编辑配置文件　 ",["$","code",null,{"children":"security: #打开认证"}]," 　",["$","code",null,{"children":"authorization: enabled"}]," 注意：不但要添加",["$","code",null,{"children":"authorization: enabled"}],"，还要取消",["$","code",null,{"children":"security"}],"注释。 (3) 重启数据库 ",["$","code",null,{"children":"sudo service mongod restart"}]]}]}],["$","h4",null,{"className":"content-header","id":"274-数据库定时备份","children":[["$","a",null,{"className":"break-words","href":"#274-数据库定时备份","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.7.4 数据库定时备份"]}],["$","ol",null,{"children":["$","li",null,{"children":"定时备份数据库到服务器 (1) 创建备份文件夹、任务文件夹以及备份任务文件"}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ ls\n"]}],["$","span",null,{"className":"code-line","children":"workspace\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//创建备份文件夹"}],"\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ mkdir backup\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//创建任务文件夹"}],"\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ mkdir tasks\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//创建db备份文件夹"}],"\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ cd ",["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"backup\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"backup$ mkdir db\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//创建dumall数据库备份文件夹"}],"\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"backup$ cd db\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"backup",["$","span",null,{"className":"token operator","children":"/"}],"db$ mkdir dumall\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//创建dumall数据库备份任务脚本"}],"\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"backup",["$","span",null,{"className":"token operator","children":"/"}],"db$ cd ",["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"tasks\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"tasks$ vi dumalldb",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"backup"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"sh"}],"\n"]}]]}]}],["$","p",null,{"children":["注释：目录结构为",["$","code",null,{"children":"~/backup/db/dumall"}],"和",["$","code",null,{"children":"~/tasks/dumalldb.backup.sh"}],"。 (2) 编辑",["$","code",null,{"children":"dumall"}],"数据库备份任务脚本"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment hashbang","children":"#!/bin/sh"}],"\n"]}],["$","span",null,{"className":"code-line","children":["backUpFolder",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token operator","children":"/"}],"home",["$","span",null,{"className":"token operator","children":"/"}],"nmwei",["$","span",null,{"className":"token operator","children":"/"}],"backup",["$","span",null,{"className":"token operator","children":"/"}],"db",["$","span",null,{"className":"token operator","children":"/"}],"dumall\n"]}],["$","span",null,{"className":"code-line","children":["date_now",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token string template-punctuation","children":"`"}],["$","span",null,{"className":"token string","children":"date +%Y%m%d%H%M"}],["$","span",null,{"className":"token string template-punctuation","children":"`"}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":["backFileName",["$","span",null,{"className":"token operator","children":"="}],"dumall_$date_now\n"]}],["$","span",null,{"className":"code-line","children":"cd $backUpFolder\n"}],["$","span",null,{"className":"code-line","children":["mkdir ",["$","span",null,{"className":"token operator","children":"-"}],"p $backFileName\n"]}],["$","span",null,{"className":"code-line","children":["mongodump ",["$","span",null,{"className":"token operator","children":"-"}],"h ",["$","span",null,{"className":"token number","children":"127.0"}],["$","span",null,{"className":"token number","children":".0"}],["$","span",null,{"className":"token number","children":".1"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"19999"}]," ",["$","span",null,{"className":"token operator","children":"-"}],"d dumall ",["$","span",null,{"className":"token operator","children":"-"}],"u dumall ",["$","span",null,{"className":"token operator","children":"-"}],"p dumall",["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"*"}]," ",["$","span",null,{"className":"token operator","children":"-"}],"o $backFileName\n"]}],["$","span",null,{"className":"code-line","children":["tar zcvf $backFileName",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"tar"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"gz"}]," $backFileName\n"]}],["$","span",null,{"className":"code-line","children":["rm ",["$","span",null,{"className":"token operator","children":"-"}],"rf $backFileName\n"]}]]}]}],["$","p",null,{"children":["(3) 执行",["$","code",null,{"children":"dumall"}],"数据库备份任务脚本"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ sh ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"/"}],"tasks",["$","span",null,{"className":"token operator","children":"/"}],"dumalldb",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"backup"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"sh"}]," \n"]}]}]}],["$","p",null,{"children":["注释：生成",["$","code",null,{"children":"~/backup/db/dumall/dumall_201808232214.tar.gz"}],"备份文件。 (4) 进入系统定时任务"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ crontab ",["$","span",null,{"className":"token operator","children":"-"}],"e\n"]}]}]}],["$","p",null,{"children":"(5) 编辑系统定时任务"}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":"# m h  dom mon dow   command\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"30"}]," ",["$","span",null,{"className":"token number","children":"22"}]," ",["$","span",null,{"className":"token number","children":"23"}]," ",["$","span",null,{"className":"token operator","children":"*"}]," ",["$","span",null,{"className":"token operator","children":"*"}]," sh ",["$","span",null,{"className":"token operator","children":"/"}],"home",["$","span",null,{"className":"token operator","children":"/"}],"nmwei",["$","span",null,{"className":"token operator","children":"/"}],"tasks",["$","span",null,{"className":"token operator","children":"/"}],"dumalldb",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"backup"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"sh"}],"\n"]}]]}]}],["$","p",null,{"children":["(6) 退出系统定时任务 ",["$","code",null,{"children":"Control + x"}]," ",["$","code",null,{"children":"Shift + y"}]," ",["$","code",null,{"children":"Enter 回车"}]," 注释：",["$","code",null,{"children":"m"}],"表示分钟，",["$","code",null,{"children":"h"}],"表示小时，",["$","code",null,{"children":"dom"}],"表示日期，",["$","code",null,{"children":"mon"}],"表示月份，",["$","code",null,{"children":"dow"}],"表示星期，",["$","code",null,{"children":"command"}],"表示命令。 2. 定时上传数据库备份到七牛云"]}],["$","p",null,{"children":["(1) 创建上传七牛云",["$","code",null,{"children":"js"}],"文件"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"tasks$ vi dumalldb",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"upload"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"js"}],"\n"]}]}]}],["$","p",null,{"children":["(2) 编辑上传七牛云",["$","code",null,{"children":"js"}],"文件"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," qiniu ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'qiniu'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," parts ",["$","span",null,{"className":"token operator","children":"="}]," process",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"env"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token constant","children":"NODE_ENV"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"split"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'@'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," file ",["$","span",null,{"className":"token operator","children":"="}]," parts",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"'.tar.gz'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," filePath ",["$","span",null,{"className":"token operator","children":"="}]," parts",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"'/'"}]," ",["$","span",null,{"className":"token operator","children":"+"}]," file",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//上传凭证"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," accessKey ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"'ihsp5CZpo_-nPnTefUS_dXeWLd7tEOSEmOba9IlD'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," secretKey ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"'w-VB9Q2wjeaLnq5rQ4sHEjiuqXNxrlR88azhKFos'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//创建鉴定对象mac"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," mac ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["qiniu",["$","span",null,{"className":"token punctuation","children":"."}],"auth",["$","span",null,{"className":"token punctuation","children":"."}],"digest",["$","span",null,{"className":"token punctuation","children":"."}],"Mac"]}],["$","span",null,{"className":"token punctuation","children":"("}],"accessKey",["$","span",null,{"className":"token punctuation","children":","}]," secretKey",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//上传位置"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," bucket ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"'dbbackup'"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token comment","children":"//要上传的空间"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," key ",["$","span",null,{"className":"token operator","children":"="}]," file",["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token comment","children":"//要生成的文件名"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," options ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property literal-property","children":"scope"}],["$","span",null,{"className":"token operator","children":":"}]," bucket ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"':'"}]," ",["$","span",null,{"className":"token operator","children":"+"}]," key\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//生成uploadToken"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," putPolicy ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["qiniu",["$","span",null,{"className":"token punctuation","children":"."}],"rs",["$","span",null,{"className":"token punctuation","children":"."}],"PutPolicy"]}],["$","span",null,{"className":"token punctuation","children":"("}],"options",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," uploadToken",["$","span",null,{"className":"token operator","children":"="}],"putPolicy",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"uploadToken"}],["$","span",null,{"className":"token punctuation","children":"("}],"mac",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," config ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["qiniu",["$","span",null,{"className":"token punctuation","children":"."}],"conf",["$","span",null,{"className":"token punctuation","children":"."}],"Config"]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," formUploader ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["qiniu",["$","span",null,{"className":"token punctuation","children":"."}],"form_up",["$","span",null,{"className":"token punctuation","children":"."}],"FormUploader"]}],["$","span",null,{"className":"token punctuation","children":"("}],"config",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," putExtra ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["qiniu",["$","span",null,{"className":"token punctuation","children":"."}],"form_up",["$","span",null,{"className":"token punctuation","children":"."}],"PutExtra"]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// 文件上传"}],"\n"]}],["$","span",null,{"className":"code-line","children":["formUploader",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"putFile"}],["$","span",null,{"className":"token punctuation","children":"("}],"uploadToken",["$","span",null,{"className":"token punctuation","children":","}]," key",["$","span",null,{"className":"token punctuation","children":","}]," filePath",["$","span",null,{"className":"token punctuation","children":","}]," putExtra",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"function"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":["respErr",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token parameter","children":["  respBody",["$","span",null,{"className":"token punctuation","children":","}]," respInfo"]}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"respErr",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword control-flow","children":"throw"}]," respErr",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"respInfo",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"statusCode"}]," ",["$","span",null,{"className":"token operator","children":"=="}]," ",["$","span",null,{"className":"token number","children":"200"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token class-name console","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],"respBody",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword control-flow","children":"else"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token class-name console","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],"respInfo",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"statusCode"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token class-name console","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],"respBody",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],["$","p",null,{"children":["参考：七牛云 - 开发者中心 -SDK -官方SDK - 对象存储 - ",["$","code",null,{"children":"Node.js"}]," (服务端) - ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://developer.qiniu.com/kodo/sdk/1289/nodejs#5","children":"文件上传"}]," (3) 打开",["$","code",null,{"children":"dumall"}],"数据库备份任务脚本"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"tasks$ vi dumalldb",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"backup"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"sh"}],"\n"]}]}]}],["$","p",null,{"children":["(4) 编辑",["$","code",null,{"children":"dumall"}],"数据库备份任务脚本 结尾添加以下脚本："]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"NODE_ENV"}],["$","span",null,{"className":"token operator","children":"="}],"$$backUpFolder@$backFileName node ",["$","span",null,{"className":"token operator","children":"/"}],"home",["$","span",null,{"className":"token operator","children":"/"}],"nmwei",["$","span",null,{"className":"token operator","children":"/"}],"tasks",["$","span",null,{"className":"token operator","children":"/"}],"dumalldb",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"upload"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"js"}],"\n"]}]}]}],["$","p",null,{"children":["(5) ",["$","code",null,{"children":"tasks"}],"目录下安装",["$","code",null,{"children":"qiniu"}],"模块"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"tasks$ npm install qiniu\n"]}]}]}],["$","p",null,{"children":["注释：",["$","code",null,{"children":"npm install -g"}],"安装的",["$","code",null,{"children":"npm"}],"包可以在命令行使用，而不是可以在任意项目中使用。 (6) 执行",["$","code",null,{"children":"dumall"}],"数据库备份任务脚本"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"tasks$ sh ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"/"}],"dumalldb",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"backup"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"sh"}]," \n"]}]}]}],["$","p",null,{"children":["问题：如果执行",["$","code",null,{"children":"sudo sh ./dumalldb.backup.sh"}],"，则报错",["$","code",null,{"children":"node: not found"}],"。 注意：为提高安全性，每一个数据库应单独创建数据库备份、上传脚本以及定时任务。"]}],["$","blockquote",null,{"children":["$","p",null,{"children":["此时，执行",["$","code",null,{"children":"sh ~/tasks/dumalldb.backup.sh "}],"脚本，在",["$","code",null,{"children":"~/backup/db/dumall"}],"目录下生成备份文件的同时，在七牛对象存储的",["$","code",null,{"children":"dbbackup"}],"存储空间上传备份文件。"]}]}],["$","h3",null,{"className":"content-header","id":"28-部署和发布上线-nodejs-项目","children":[["$","a",null,{"className":"break-words","href":"#28-部署和发布上线-nodejs-项目","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.8 部署和发布上线 Nodejs 项目"]}],["$","h4",null,{"className":"content-header","id":"281-本地代码上传到服务器","children":[["$","a",null,{"className":"break-words","href":"#281-本地代码上传到服务器","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.8.1 本地代码上传到服务器"]}],["$","ol",null,{"children":[["$","li",null,{"children":["代码上传到服务器的两种方法 方法一：本地通过",["$","code",null,{"children":"FileZilla"}],"工具直接上传文件到服务器 方法二： 本地 - 私有",["$","code",null,{"children":"Git"}],"仓库 - 服务器"]}],["$","li",null,{"children":["本地通过",["$","code",null,{"children":"FileZilla"}],"工具直接上传文件到服务器 (1) 使用",["$","code",null,{"children":"FileZilla"}],"工具连接阿里云",["$","code",null,{"children":"ECS"}]," 文件 - 站点管理器 - 新站点 (2) 配置站点 ",["$","img",null,{"alt":"FileZilla工具截图","src":"https://upload-images.jianshu.io/upload_images/4989175-0920ad2015fadb7c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/680"}]," 注释：端口不填，则表示默认",["$","code",null,{"children":"22"}],"端口。密码为",["$","code",null,{"children":"Nmw*********"}],"。 (3) 文件上传"]}],["$","li",null,{"children":["本地 - 私有",["$","code",null,{"children":"Git"}],"仓库 - 服务器 (1) ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://gitee.com/","children":"码云"}],"配置本地公钥以及服务器公钥"]}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["➜  ",["$","span",null,{"className":"token operator","children":"~"}]," cat ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ssh"}],["$","span",null,{"className":"token operator","children":"/"}],"id_rsa",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"pub"}],"\n"]}],["$","span",null,{"className":"code-line","children":["ssh",["$","span",null,{"className":"token operator","children":"-"}],"rsa ",["$","span",null,{"className":"token maybe-class-name","children":"AAAAB3NzaC1yc2EAAAADAQABAAABAQCp4QvDRnHi8EHcrftrv"}],["$","span",null,{"className":"token operator","children":"+"}],["$","span",null,{"className":"token maybe-class-name","children":"I8BNXSuejAXkEWoJ6l"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token maybe-class-name","children":"BCF7uuaCSEFBKVp6wfWAYEvQ"}],["$","span",null,{"className":"token operator","children":"/"}],"jCIIZFpXtRlnzpHVQmJTperdL83gs6OsSo",["$","span",null,{"className":"token operator spread","children":"..."}],["$","span",null,{"className":"token operator spread","children":"..."}],"\n"]}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ssh$"}]," cat id_rsa",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"pub"}],"\n"]}],["$","span",null,{"className":"code-line","children":["ssh",["$","span",null,{"className":"token operator","children":"-"}],"rsa ",["$","span",null,{"className":"token maybe-class-name","children":"AAAAB3NzaC1yc2EAAAADAQABAAACAQC5mpJLl8XbH"}],["$","span",null,{"className":"token operator","children":"/"}],"5KorYLu3L0PPXwxVVpvxD1wKaGc6DmWT9yoK2xY5slnzZmaNeO2fxGzPiY6nhmoOn2uE4aQmdckEczbgDdQJdjuFWxBGtmxVYKL2a1Hl",["$","span",null,{"className":"token operator","children":"+"}],"zo93t59",["$","span",null,{"className":"token operator","children":"+"}],"h6",["$","span",null,{"className":"token operator","children":"/"}],"abGspFqANLVrde0vzvrtOtNgoSuhMMuhy6cpnVpUK8kdK",["$","span",null,{"className":"token operator","children":"/"}],"aM06",["$","span",null,{"className":"token operator","children":"++"}],"r5eF4RcRjDfnK3CdCH",["$","span",null,{"className":"token operator spread","children":"..."}],["$","span",null,{"className":"token operator spread","children":"..."}],"\n"]}]]}]}],["$","p",null,{"children":["(2) 码云创建私有仓库并上传本地项目代码 注释：码云提供了免费的私有",["$","code",null,{"children":"git"}],"仓库。 (3) 服务器克隆码云私有仓库代码"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"workspace$ git clone git@gitee",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"com"}],["$","span",null,{"className":"token operator","children":":"}],"nmwei",["$","span",null,{"className":"token operator","children":"/"}],"imoocmall",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"git"}],"\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"workspace$ cd imoocmall\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],["$","span",null,{"className":"token operator","children":"/"}],"workspace",["$","span",null,{"className":"token operator","children":"/"}],"imoocmall$ npm install\n"]}]]}]}],["$","h4",null,{"className":"content-header","id":"282-配置pm2一键部署项目","children":[["$","a",null,{"className":"break-words","href":"#282-配置pm2一键部署项目","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.8.2 配置PM2一键部署项目"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","code",null,{"children":"PM2"}],"不仅可以守护服务器",["$","code",null,{"children":"Nodejs"}],"服务，实现平滑重启。也可以实现代码的自动更新，以及从本地到线上的部署。 参考：",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"http://pm2.keymetrics.io/","children":"PM2官网"}]]}],["$","li",null,{"children":["本地项目中根目录创建",["$","code",null,{"children":"ecosystem.json"}]]}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property string-property","children":"\"apps\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"name\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"myweb\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"script\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"app.js\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"env\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token property string-property","children":"\"COMMON_VARIABLE\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"true\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"env_production\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token property string-property","children":"\"NODE_ENV\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"production\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property string-property","children":"\"deploy\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property string-property","children":"\"production\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"user\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"nmwei\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"host\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"\"47.96.***.***\""}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"port\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"39999\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"ref\""}],"  ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"origin/master\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"repo\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"git@gitee.com:nmwei/myweb.git\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"path\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"/www/myweb/production\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"ssh_options\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"StrictHostKeyChecking=no\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"env\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token property string-property","children":"\"NODE_ENV\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"production\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","p",null,{"children":["参考：",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"http://pm2.keymetrics.io/docs/usage/deployment/#simple-deploy","children":"PM2官网/Documentation/Deployment/SimpleDeploy"}]," ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://segmentfault.com/a/1190000005171229","children":"通过Github与PM2部署Node应用"}]," 注释：因为",["$","code",null,{"children":"pm2"}],"的部署是通过",["$","code",null,{"children":"ssh"}],"进行的，因此需要开通本地到远程服务器的无密码登录。 3. 本地向",["$","code",null,{"children":"git"}],"仓库中上传",["$","code",null,{"children":"ecosystem.json"}],"文件 4. 服务器创建项目文件夹"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ cd ",["$","span",null,{"className":"token operator","children":"/"}],"www\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"www$ mkdir myweb\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"www$ ls\n"]}],["$","span",null,{"className":"code-line","children":"myweb  ssl\n"}]]}]}],["$","p",null,{"children":["注释：创建",["$","code",null,{"children":"myweb"}],"文件夹即可，无需创建子文件夹",["$","code",null,{"children":"production"}],"。 5. 本地部署项目"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["➜  myweb git",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token punctuation","children":"("}],"master",["$","span",null,{"className":"token punctuation","children":")"}]," ✗ pm2 deploy ecosystem",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"json"}]," production setup\n"]}]}]}],["$","p",null,{"children":["注释：如果本地部署命令失败，则需要在服务器修改文件夹权限：",["$","code",null,{"children":"nmwei@iZbp1ai95owp4twsjdkbv1Z:/www$ sudo chmod 777 myweb"}]," 原理：本地利用",["$","code",null,{"children":"PM2"}],"工具通知服务器向指定",["$","code",null,{"children":"git"}],"仓库拉取代码。 6. 部署项目目录介绍"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"www",["$","span",null,{"className":"token operator","children":"/"}],"myweb",["$","span",null,{"className":"token operator","children":"/"}],"production$ ls\n"]}],["$","span",null,{"className":"code-line","children":"current  shared  source\n"}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"www",["$","span",null,{"className":"token operator","children":"/"}],"myweb",["$","span",null,{"className":"token operator","children":"/"}],"production$ cd current\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"www",["$","span",null,{"className":"token operator","children":"/"}],"myweb",["$","span",null,{"className":"token operator","children":"/"}],"production",["$","span",null,{"className":"token operator","children":"/"}],"current$ ls\n"]}],["$","span",null,{"className":"code-line","children":["app",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"js"}],"  ",["$","span",null,{"className":"token constant","children":"README"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"md"}],"\n"]}]]}]}],["$","p",null,{"children":["(1) ",["$","code",null,{"children":"current"}],": 运行文件。 (2) ",["$","code",null,{"children":"shared"}],": 日志文件等。 (3) ",["$","code",null,{"children":"source"}],": 源文件。 7. 修改服务器",["$","code",null,{"children":".bashrc"}],"配置文件"]}],["$","p",null,{"children":["(1) 编辑",["$","code",null,{"children":".bashrc"}],"文件"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ vi ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"bashrc"}],"\n"]}]}]}],["$","p",null,{"children":["(2) 修改",["$","code",null,{"children":".bashrc"}],"文件，注释以下代码"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["# ",["$","span",null,{"className":"token maybe-class-name","children":"If"}]," not running interactively",["$","span",null,{"className":"token punctuation","children":","}]," don't ",["$","span",null,{"className":"token keyword control-flow","children":"do"}]," anything\n"]}],["$","span",null,{"className":"code-line","children":["#",["$","span",null,{"className":"token keyword","children":"case"}]," $",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token keyword","children":"in"}],"\n"]}],["$","span",null,{"className":"code-line","children":["#    ",["$","span",null,{"className":"token operator","children":"*"}],"i",["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":";"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["#      ",["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword control-flow","children":"return"}],["$","span",null,{"className":"token punctuation","children":";"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"#esac\n"}]]}]}],["$","p",null,{"children":["(3) 重新运行",["$","code",null,{"children":".bashrc"}],"文件"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ source ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"bashrc"}],"\n"]}]}]}],["$","ol",null,{"start":"8","children":["$","li",null,{"children":"本地更新服务器代码并重启服务"}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["➜  myweb git",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token punctuation","children":"("}],"master",["$","span",null,{"className":"token punctuation","children":")"}]," pm2 deploy ecosystem",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"json"}]," production \n"]}]}]}],["$","p",null,{"children":["注释：此时浏览器访问",["$","code",null,{"children":"47.96.***.***:3000"}],"，则可以访问该服务。 9. 添加域名解析 (1) 进入阿里云域名解析页面 登录阿里云 - 控制台 - 域名 - 解析 (2) 添加一条域名解析记录 ",["$","img",null,{"alt":"主页域名解析记录","src":"https://upload-images.jianshu.io/upload_images/4989175-b5136a73c1d6c35f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"}]," 10. 配置",["$","code",null,{"children":"Nginx"}],"代理 (1) 创建并编辑配置文件"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ cd ",["$","span",null,{"className":"token operator","children":"/"}],"etc",["$","span",null,{"className":"token operator","children":"/"}],"nginx",["$","span",null,{"className":"token operator","children":"/"}],"conf",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"d"}],"\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"etc",["$","span",null,{"className":"token operator","children":"/"}],"nginx",["$","span",null,{"className":"token operator","children":"/"}],"conf",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"d$"}]," sudo vi www",["$","span",null,{"className":"token operator","children":"-"}],"nimengwei",["$","span",null,{"className":"token operator","children":"-"}],"com",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token number","children":"3000"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"conf"}],"\n"]}]]}]}],["$","p",null,{"children":"(2) 配置文件内容如下"}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["upstream website ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  server ",["$","span",null,{"className":"token number","children":"127.0"}],["$","span",null,{"className":"token number","children":".0"}],["$","span",null,{"className":"token number","children":".1"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"3000"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["server ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" listen ",["$","span",null,{"className":"token number","children":"80"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" server_name www",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"nimengwei"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"com"}]," ",["$","span",null,{"className":"token number","children":"47.96"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"**"}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token dom variable","children":"location"}]," ",["$","span",null,{"className":"token operator","children":"/"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token constant","children":"X"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"Real"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"IP"}]," $remote_addr",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token constant","children":"X"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"Forward"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"For"}]," $proxy_add_x_forwarded_for",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token maybe-class-name","children":"Host"}]," $http_host",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token constant","children":"X"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"Nginx"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token class-name known-class-name","children":"Proxy"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_pass http",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token operator","children":"/"}],"website",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_redirect off",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","p",null,{"children":["注释：该",["$","code",null,{"children":"nginx"}],"代理配置文件的含义为当用户访问",["$","code",null,{"children":"www.nimengwei.com"}],"或",["$","code",null,{"children":"47.96.***.***"}],"时，转发到本机的",["$","code",null,{"children":"http:127.0.0.1:3000"}],"。 (3) ",["$","code",null,{"children":"nginx"}],"测试及重启 测试",["$","code",null,{"children":"nginx"}],"配置文件是否正确：",["$","code",null,{"children":"sudo nginx -t"}]," ",["$","code",null,{"children":"nginx"}],"重启：",["$","code",null,{"children":"sudo nginx -s reload"}]," 11. 配置阿里云",["$","code",null,{"children":"ECS"}],"安全组规则 允许",["$","code",null,{"children":"3000"}],"端口被访问。 12. 此时当用户通过",["$","code",null,{"children":"www.nimengwei.com"}],"或",["$","code",null,{"children":"47.96.***.***"}],"路径，即可访问",["$","code",null,{"children":"47.96.***.***:3000"}],"线上项目。 13. 如果需要更新线上项目，则需要以下步骤： (1) 本地修改项目代码 (2) 代码修改提交到码云",["$","code",null,{"children":"git"}],"私有仓库 (3) 本地通知服务器更新",["$","code",null,{"children":"git"}],"仓库代码"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["➜  myweb git",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token punctuation","children":"("}],"master",["$","span",null,{"className":"token punctuation","children":")"}]," pm2 deploy ecosystem",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"json"}]," production \n"]}]}]}],["$","h4",null,{"className":"content-header","id":"283-pm2一键部署imoocmall项目","children":[["$","a",null,{"className":"break-words","href":"#283-pm2一键部署imoocmall项目","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.8.3 PM2一键部署imoocmall项目"]}],["$","ol",null,{"children":[["$","li",null,{"children":["配置阿里云",["$","code",null,{"children":"ECS"}],"安全组规则 允许",["$","code",null,{"children":"3001"}],"端口被访问。"]}],["$","li",null,{"children":"服务器创建项目文件夹"}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ cd ",["$","span",null,{"className":"token operator","children":"/"}],"www\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"www$ mkdir imoocmall\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"www$ ls\n"]}],["$","span",null,{"className":"code-line","children":"imoocmall  myweb  ssl\n"}]]}]}],["$","ol",null,{"start":"3","children":["$","li",null,{"children":["本地项目根目录创建",["$","code",null,{"children":"ecosystem.json"}],"并上传到",["$","code",null,{"children":"git"}],"仓库"]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property string-property","children":"\"apps\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"name\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"imoocmall\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"script\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"bin/www\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"env\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token property string-property","children":"\"COMMON_VARIABLE\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"true\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"env_production\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token property string-property","children":"\"NODE_ENV\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"production\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property string-property","children":"\"deploy\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property string-property","children":"\"production\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"user\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"nmwei\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"host\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"\"47.96.237.151\""}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"port\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"39999\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"ref\""}],"  ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"origin/master\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"repo\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"git@gitee.com:nmwei/imoocmall.git\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"path\""}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"/www/imoocmall/production\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"ssh_options\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"StrictHostKeyChecking=no\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"post-deploy\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"npm install && pm2 startOrRestart ecosystem.json --env production\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token property string-property","children":"\"env\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token property string-property","children":"\"NODE_ENV\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"production\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","p",null,{"children":["注释：与",["$","code",null,{"children":"myweb"}],"项目相比，添加了",["$","code",null,{"children":"post-deploy"}],"部署后需要执行的命令。 注意：如果修改了",["$","code",null,{"children":"ecosystem.json"}],"，不能只通过",["$","code",null,{"children":"pm2 deploy ecosystem.json production"}],"命令更新，需要在服务器",["$","code",null,{"children":"PM2"}],"上删除该项目(",["$","code",null,{"children":"pm2 delete imoocmallc"}],")后重新部署。 4. 本地部署上传项目"]}],["$","p",null,{"children":"(1) 项目部署"}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["imoocmall git",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token punctuation","children":"("}],"master",["$","span",null,{"className":"token punctuation","children":")"}]," pm2 deploy ecosystem",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"json"}]," production setup\n"]}]}]}],["$","p",null,{"children":"(2) 项目更新"}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["imoocmall git",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token punctuation","children":"("}],"master",["$","span",null,{"className":"token punctuation","children":")"}]," pm2 deploy ecosystem",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"json"}]," production\n"]}]}]}],["$","p",null,{"children":["注释：此时浏览器访问",["$","code",null,{"children":"47.96.***.***:3001"}],"，则可以访问该服务。 5. 服务器添加域名解析记录 ",["$","img",null,{"alt":"imooc二级域名解析记录","src":"https://upload-images.jianshu.io/upload_images/4989175-d294bab4270cb0e8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"}]," 6. 服务器配置",["$","code",null,{"children":"nginx"}],"代理 (1) 创建并编辑配置文件"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ cd ",["$","span",null,{"className":"token operator","children":"/"}],"etc",["$","span",null,{"className":"token operator","children":"/"}],"nginx",["$","span",null,{"className":"token operator","children":"/"}],"conf",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"d"}],"\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"etc",["$","span",null,{"className":"token operator","children":"/"}],"nginx",["$","span",null,{"className":"token operator","children":"/"}],"conf",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"d$"}]," sudo vi imooc",["$","span",null,{"className":"token operator","children":"-"}],"nimengwei",["$","span",null,{"className":"token operator","children":"-"}],"com",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token number","children":"3001"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"conf"}]," \n"]}]]}]}],["$","p",null,{"children":"(2) 配置文件内容如下"}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["upstream imooc ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  server ",["$","span",null,{"className":"token number","children":"127.0"}],["$","span",null,{"className":"token number","children":".0"}],["$","span",null,{"className":"token number","children":".1"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"3001"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["server ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" listen ",["$","span",null,{"className":"token number","children":"80"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" server_name imooc",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"nimengwei"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"com"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token dom variable","children":"location"}]," ",["$","span",null,{"className":"token operator","children":"/"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token constant","children":"X"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"Real"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"IP"}]," $remote_addr",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token constant","children":"X"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"Forward"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"For"}]," $proxy_add_x_forwarded_for",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token maybe-class-name","children":"Host"}]," $http_host",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token constant","children":"X"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"Nginx"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token class-name known-class-name","children":"Proxy"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_pass http",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token operator","children":"/"}],"imooc",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_redirect off",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","p",null,{"children":["(3) ",["$","code",null,{"children":"nginx"}],"测试及重启 测试",["$","code",null,{"children":"nginx"}],"配置文件是否正确：",["$","code",null,{"children":"sudo nginx -t"}]," ",["$","code",null,{"children":"nginx"}],"重启：",["$","code",null,{"children":"sudo nginx -s reload"}]," 7. 分析与总结 (1) 分析 由于",["$","code",null,{"children":"imooc.nimengwei.com"}],"二级域名的解析记录值为",["$","code",null,{"children":"47.96.***.***"}],"，所以用户访问",["$","code",null,{"children":"imooc.nimengwei.com"}]," 地址时，相当于访问",["$","code",null,{"children":"47.96.***.***"}],"的",["$","code",null,{"children":"IP"}],"地址。由于",["$","code",null,{"children":"47.96.***.***"}],"对应的服务器配置了",["$","code",null,{"children":"nginx"}],"代理，所以用户访问",["$","code",null,{"children":"imooc.nimengwei.com"}],"时，代理转发到",["$","code",null,{"children":"3001"}],"端口。 (2) 总结 此时当用户通过",["$","code",null,{"children":"imooc.nimengwei.com"}],"路径，即可访问",["$","code",null,{"children":"47.96.***.***:3001"}],"线上项目。"]}],["$","h4",null,{"className":"content-header","id":"284-前端资源部署","children":[["$","a",null,{"className":"break-words","href":"#284-前端资源部署","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.8.4 前端资源部署"]}],["$","ol",null,{"children":[["$","li",null,{"children":["如何将前端资源部署到后端项目，当访问后端",["$","code",null,{"children":"'/'"}],"路由时，返回前端页面。 ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"http://www.expressjs.com.cn/starter/static-files.html","children":"方法一：利用 Express 托管静态文件"}]," ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"http://www.expressjs.com.cn/guide/using-middleware.html#middleware.router","children":"方法二：利用Express路由返回静态文件"}]]}],["$","li",null,{"children":["利用 ",["$","code",null,{"children":"Express"}]," 托管静态文件"]}]]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//app.js"}],"\n"]}],["$","span",null,{"className":"code-line","children":["app",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"use"}],["$","span",null,{"className":"token punctuation","children":"("}],"express",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"static"}],["$","span",null,{"className":"token punctuation","children":"("}],"path",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"join"}],["$","span",null,{"className":"token punctuation","children":"("}],"__dirname",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"'views'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],["$","ol",null,{"start":"3","children":["$","li",null,{"children":["利用",["$","code",null,{"children":"Express"}],"路由返回静态文件"]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// app.js"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," indexRouter ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'./routes/index'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator spread","children":"..."}],"\n"]}],["$","span",null,{"className":"code-line","children":["app",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"set"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'views'"}],["$","span",null,{"className":"token punctuation","children":","}]," path",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"join"}],["$","span",null,{"className":"token punctuation","children":"("}],"__dirname",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"'views'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["app",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"engine"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'.html'"}],["$","span",null,{"className":"token punctuation","children":","}]," ejs",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"__express"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["app",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"set"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'view engine'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"'html'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator spread","children":"..."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token string template-punctuation","children":"`"}],["$","span",null,{"className":"token string","children":"app.use('/', indexRouter);"}],["$","span",null,{"className":"token string template-punctuation","children":"`"}]]}],"\n"]}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// routes/index.js"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," express ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"require"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'express'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"var"}]," router ",["$","span",null,{"className":"token operator","children":"="}]," express",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":["$","span",null,{"className":"token maybe-class-name","children":"Router"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"/* GET home page. */"}],"\n"]}],["$","span",null,{"className":"code-line","children":["router",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"get"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'/'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"function"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":["req",["$","span",null,{"className":"token punctuation","children":","}]," res",["$","span",null,{"className":"token punctuation","children":","}]," next"]}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  res",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access function method","children":"render"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'index'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token property literal-property","children":"title"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'Express'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["module",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"exports"}]," ",["$","span",null,{"className":"token operator","children":"="}]," router",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":"注意：不要与全局拦截发生冲突。"}]}],["$","h3",null,{"className":"content-header","id":"29-配置-https-协议","children":[["$","a",null,{"className":"break-words","href":"#29-配置-https-协议","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.9 配置 HTTPS 协议"]}],["$","p",null,{"children":"####2.9.1 SSL证书介绍"}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","code",null,{"children":"Chrome"}],"浏览器会将",["$","code",null,{"children":"http"}],"协议的网站标记为不安全，苹果也要求所有应用必须采用",["$","code",null,{"children":"https"}],"的加密连接。在国内，微信小程序要求开发者必须使用",["$","code",null,{"children":"https"}],"的接入域名。"]}],["$","li",null,{"children":[["$","code",null,{"children":"SSL"}],"证书分为如下种类 (1) 扩展验证型（",["$","code",null,{"children":"EV"}],"）",["$","code",null,{"children":"SSL"}],"证书 (2) 组织验证型（",["$","code",null,{"children":"OV"}],"）",["$","code",null,{"children":"SSL"}],"证书 (3) 域名验证型（",["$","code",null,{"children":"DV"}],"）",["$","code",null,{"children":"SSL"}],"证书 三类证书安全等级依次降低。"]}],["$","li",null,{"children":["申明",["$","code",null,{"children":"SSL"}],"证书的平台 又拍云、腾讯云、七牛、阿里云。"]}],["$","li",null,{"children":["申请",["$","code",null,{"children":"SSL"}],"证书的条件 域名已经通过备案。 ####2.9.2 申请免费证书并配置Nginx"]}],["$","li",null,{"children":["腾讯云申请",["$","code",null,{"children":"SSL"}],"证书"]}]]}],["$","p",null,{"children":["(1) 进入证书申请页面 腾讯云 - 控制台 - 云产品 - 域名与网站 -",["$","code",null,{"children":"SSL"}],"证书管理 - 申请证书 (2) 申请证书 填写证书信息 - 手动",["$","code",null,{"children":"DNS"}],"验证 - 确认申请 ",["$","img",null,{"alt":"填写证书信息","src":"https://upload-images.jianshu.io/upload_images/4989175-f25879dc6173b3de.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"}]," (3) 添加",["$","code",null,{"children":"DNS"}],"解析记录 查看证书详情 - 添加",["$","code",null,{"children":"DNS"}],"解析记录 ",["$","img",null,{"alt":"DNS解析记录","src":"https://upload-images.jianshu.io/upload_images/4989175-04d2bfd0b6e205a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"}]," (4) 下载证书并解压缩 (5) 将",["$","code",null,{"children":"Nginx"}],"文件夹中的",["$","code",null,{"children":".key"}],"和",["$","code",null,{"children":".crt"}],"文件上传到服务器"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"~"}],"$$ cd ",["$","span",null,{"className":"token operator","children":"/"}],"www",["$","span",null,{"className":"token operator","children":"/"}],"ssl\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"www",["$","span",null,{"className":"token operator","children":"/"}],"ssl$ ls\n"]}],["$","span",null,{"className":"code-line","children":["1_blog",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"nimengwei"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"com_bundle"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"crt"}]," \n"]}],["$","span",null,{"className":"code-line","children":["2_blog",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"nimengwei"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"com"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"key"}],"\n"]}]]}]}],["$","p",null,{"children":["(6) 配置",["$","code",null,{"children":"nginx"}],"代理"]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"etc",["$","span",null,{"className":"token operator","children":"/"}],"nginx",["$","span",null,{"className":"token operator","children":"/"}],"conf",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"d$"}]," sudo vi blog",["$","span",null,{"className":"token operator","children":"-"}],"nimengwei",["$","span",null,{"className":"token operator","children":"-"}],"com",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token number","children":"3003"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"conf"}]," \n"]}]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["upstream blog ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  server ",["$","span",null,{"className":"token number","children":"127.0"}],["$","span",null,{"className":"token number","children":".0"}],["$","span",null,{"className":"token number","children":".1"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"3003"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["server ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" listen ",["$","span",null,{"className":"token number","children":"80"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" server_name blog",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"nimengwei"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"com"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," ",["$","span",null,{"className":"token number","children":"301"}]," ",["$","span",null,{"className":"token property literal-property","children":"https"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token operator","children":"/"}],"blog",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"nimengwei"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"com$request_uri"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["server ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" listen ",["$","span",null,{"className":"token number","children":"443"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" server_name blog",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"nimengwei"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"com"}],["$","span",null,{"className":"token punctuation","children":";"}]," #填写绑定证书的域名\n"]}],["$","span",null,{"className":"code-line","children":[" ssl on",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" ssl_certificate ",["$","span",null,{"className":"token operator","children":"/"}],"www",["$","span",null,{"className":"token operator","children":"/"}],"ssl",["$","span",null,{"className":"token operator","children":"/"}],"1_blog",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"nimengwei"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"com_bundle"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"crt"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" ssl_certificate_key ",["$","span",null,{"className":"token operator","children":"/"}],"www",["$","span",null,{"className":"token operator","children":"/"}],"ssl",["$","span",null,{"className":"token operator","children":"/"}],"2_blog",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"nimengwei"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"com"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"key"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" ssl_session_timeout 5m",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" ssl_protocols ",["$","span",null,{"className":"token maybe-class-name","children":"TLSv1"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"TLSv1"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"TLSv1"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token number","children":"2"}],["$","span",null,{"className":"token punctuation","children":";"}]," #按照这个协议配置\n"]}],["$","span",null,{"className":"code-line","children":[" ssl_ciphers ",["$","span",null,{"className":"token constant","children":"ECDHE"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"RSA"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"AES128"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"GCM"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"SHA256"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token constant","children":"HIGH"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"!"}],"aNULL",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"!"}],["$","span",null,{"className":"token constant","children":"MD5"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"!"}],["$","span",null,{"className":"token constant","children":"RC4"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"!"}],["$","span",null,{"className":"token constant","children":"DHE"}],["$","span",null,{"className":"token punctuation","children":";"}],"#按照这个套件配置\n"]}],["$","span",null,{"className":"code-line","children":[" ssl_prefer_server_ciphers on",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token keyword control-flow","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"$$ssl_protocol ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  rewrite ",["$","span",null,{"className":"token operator","children":"^"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":")"}]," https",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token operator","children":"/"}],"$$host$1 permanent",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token dom variable","children":"location"}]," ",["$","span",null,{"className":"token operator","children":"/"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token constant","children":"X"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"Real"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"IP"}]," $remote_addr",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token constant","children":"X"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"Forward"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"For"}]," $proxy_add_x_forwarded_for",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token maybe-class-name","children":"Host"}]," $http_host",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_set_header ",["$","span",null,{"className":"token constant","children":"X"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"Nginx"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token class-name known-class-name","children":"Proxy"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_pass http",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token operator","children":"/"}],"blog",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["   proxy_redirect off",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","$L16",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"etc",["$","span",null,{"className":"token operator","children":"/"}],"nginx",["$","span",null,{"className":"token operator","children":"/"}],"conf",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"d$"}]," sudo nginx ",["$","span",null,{"className":"token operator","children":"-"}],"t\n"]}],["$","span",null,{"className":"code-line","children":["nmwei@iZbp1ai95owp4twsjdkbv1Z",["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":"/"}],"etc",["$","span",null,{"className":"token operator","children":"/"}],"nginx",["$","span",null,{"className":"token operator","children":"/"}],"conf",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"d$"}]," sudo nginx ",["$","span",null,{"className":"token operator","children":"-"}],"s reload\n"]}]]}]}],["$","p",null,{"children":["参考：证书管理 - 详情 - 指引文档 - ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://cloud.tencent.com/document/product/400/4143#2.-nginx-.E8.AF.81.E4.B9.A6.E9.83.A8.E7.BD.B2","title":"2. Nginx 证书部署","children":"Nginx 证书部署"}]," 注释：亚洲诚信品牌免费型",["$","code",null,{"children":"DV"}],"版",["$","code",null,{"children":"SSL"}],"证书仅支持绑定一个一级域名或者子域名，且同一主域最多只能申请",["$","code",null,{"children":"20"}],"张证书（一级域名及其子域名均属于同一主域）。 若您的业务因此次调整受限，建议您购买泛域名型",["$","code",null,{"children":"SSL"}],"证书。 注意：不同平台上申请的",["$","code",null,{"children":"SSL"}],"证书的协议配置(",["$","code",null,{"children":"ssl_protocols "}],")和套件配置(",["$","code",null,{"children":"ssl_ciphers"}],")不同。 2. 阿里云申请",["$","code",null,{"children":"SSL"}],"证书 阿里云 - 控制台 - 产品与服务 - 安全云盾 - ",["$","code",null,{"children":"SSL"}],"证书 购买证书 - ",["$","code",null,{"children":"Symantec"}]," - 免费型",["$","code",null,{"children":"DV SSL"}]," - 立即购买 注释：其他步骤按照提示以及阿里云",["$","code",null,{"children":"SSL"}],["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://help.aliyun.com/document_detail/98728.html","children":"配置"}],"进行操作。"]}],["$","h2",null,{"className":"content-header","id":"参考资料","children":[["$","a",null,{"className":"break-words","href":"#参考资料","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"参考资料"]}],["$","p",null,{"children":[["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://coding.imooc.com/class/95.html","children":"Node.js项目线上服务器部署与发布"}]," ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://help.aliyun.com/product/25365.html","children":"阿里云ECS服务器文档"}]," ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"http://man.linuxde.net/","children":"Linux命令大全"}]," ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.cnblogs.com/laov/p/3541414.html","children":"Linux中常用操作命令"}]," ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://yq.aliyun.com/articles/220744","children":"MongDB的安装和基本操作(权限设置)"}]]}]]}],["$","div",null,{"className":"pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300","children":[["$","a",null,{"className":"break-words","target":"_blank","rel":"nofollow","href":"https://mobile.twitter.com/search?q=https%3A%2F%2Fnmwei.github.io%2Fblog%2FNode%2FNode%E9%A1%B9%E7%9B%AE%E7%BA%BF%E4%B8%8A%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%8F%91%E5%B8%83","children":"Discuss on Twitter"}]," • ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/nmwei/nmwei.github.io/blob/main/data/blog/Node/Node项目线上部署与发布.mdx","children":"View on GitHub"}]]}],["$","div",null,{"className":"pt-6 pb-6 text-center text-gray-700 dark:text-gray-300","id":"comment","children":["$","$L17",null,{"slug":"Node/Node项目线上部署与发布"}]}]]}],["$","footer",null,{"children":[["$","div",null,{"className":"divide-gray-200 text-sm leading-5 font-medium xl:col-start-1 xl:row-start-2 xl:divide-y dark:divide-gray-700","children":[["$","div",null,{"className":"py-4 xl:py-8","children":[["$","h2",null,{"className":"text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400","children":"Tags"}],["$","div",null,{"className":"flex flex-wrap","children":[["$","$L5","Node.js",{"href":"/tags/nodejs","className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400 mr-3 text-sm font-medium","children":"Node.js"}],["$","$L5","后端",{"href":"/tags/后端","className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400 mr-3 text-sm font-medium","children":"后端"}]]}]]}],["$","div",null,{"className":"flex justify-between py-4 xl:block xl:space-y-8 xl:py-8","children":[["$","div",null,{"children":[["$","h2",null,{"className":"text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400","children":"Previous Article"}],["$","div",null,{"className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":["$","$L5",null,{"className":"break-words","href":"/blog/MongoDB/MongoDB安装、配置以及操作介绍","children":"MongoDB安装、配置以及操作介绍"}]}]]}],["$","div",null,{"children":[["$","h2",null,{"className":"text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400","children":"Next Article"}],["$","div",null,{"className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":["$","$L5",null,{"className":"break-words","href":"/blog/JavaScript/微信小程序开发入门","children":"微信小程序开发入门"}]}]]}]]}]]}],["$","div",null,{"className":"pt-4 xl:pt-8","children":["$","$L5",null,{"className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","href":"/blog","aria-label":"Back to the blog","children":"← Back to the blog"}]}]]}]]}]]}]}]]}]]
10:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
d:null
e:null
12:[["$","title","0",{"children":"Node项目线上部署与发布 | 我的博客"}],["$","meta","1",{"name":"description","content":"Node项目线上部署与发布相关文章"}],["$","meta","2",{"name":"robots","content":"index, follow"}],["$","meta","3",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","link","4",{"rel":"canonical","href":"https://nmwei.github.io/blog/Node/Node%E9%A1%B9%E7%9B%AE%E7%BA%BF%E4%B8%8A%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%8F%91%E5%B8%83"}],["$","link","5",{"rel":"alternate","type":"application/rss+xml","href":"https://nmwei.github.io/feed.xml"}],["$","meta","6",{"property":"og:title","content":"Node项目线上部署与发布"}],["$","meta","7",{"property":"og:description","content":"Node项目线上部署与发布相关文章"}],["$","meta","8",{"property":"og:url","content":"https://nmwei.github.io/blog/Node/Node%E9%A1%B9%E7%9B%AE%E7%BA%BF%E4%B8%8A%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%8F%91%E5%B8%83"}],["$","meta","9",{"property":"og:site_name","content":"我的博客"}],["$","meta","10",{"property":"og:locale","content":"en_US"}],["$","meta","11",{"property":"og:image","content":"https://nmwei.github.io/static/images/nodejs.jpg"}],["$","meta","12",{"property":"og:type","content":"article"}],["$","meta","13",{"property":"article:published_time","content":"2018-07-04T00:00:00.000Z"}],["$","meta","14",{"property":"article:modified_time","content":"2018-07-04T00:00:00.000Z"}],["$","meta","15",{"property":"article:author","content":"倪梦威"}],["$","meta","16",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","17",{"name":"twitter:title","content":"Node项目线上部署与发布"}],["$","meta","18",{"name":"twitter:description","content":"Node项目线上部署与发布相关文章"}],["$","meta","19",{"name":"twitter:image","content":"https://nmwei.github.io/static/images/nodejs.jpg"}]]
