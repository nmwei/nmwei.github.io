                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    <head>
        <title>查看源</title>
        <link rel="canonical" href="/pages/viewpage.action?pageId=7642771" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="/s/fb09ad6efee8cbbb0199de5508fc7a0f-CDN/zh_CN/6211/3938a2601e8fc8d1decf2078567a8651fae8f539.10/22/_/download/superbatch/css/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/zh_CN/6211/3938a2601e8fc8d1decf2078567a8651fae8f539.10/22/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/zh_CN/6211/3938a2601e8fc8d1decf2078567a8651fae8f539.10/22/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/zh_CN/6211/3938a2601e8fc8d1decf2078567a8651fae8f539.10/27e53ccd09b1bbdc42068705db2d86c9/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/b1f8784148f8fbef60357d1b60a91246-CDN/zh_CN/6211/3938a2601e8fc8d1decf2078567a8651fae8f539.10/02a416b33820397aa1d11efd481f9223/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/zh_CN/6211/3938a2601e8fc8d1decf2078567a8651fae8f539.10/02a416b33820397aa1d11efd481f9223/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="/s/f4a0dceb76a353664cfce6bacac90eab-CDN/zh_CN/6211/3938a2601e8fc8d1decf2078567a8651fae8f539.10/12c9241ca467c86b864cf126220523c8/_/download/contextbatch/css/editor-content/batch.css?confluence.view.edit.transition=true" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/zh_CN/6211/3938a2601e8fc8d1decf2078567a8651fae8f539.10/12c9241ca467c86b864cf126220523c8/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-T/zh_CN/6211/3938a2601e8fc8d1decf2078567a8651fae8f539.10/1.5.4/_/download/batch/io.moewe.confluence.addons.rate:content-rating-resources/io.moewe.confluence.addons.rate:content-rating-resources.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/zh_CN/6211/3938a2601e8fc8d1decf2078567a8651fae8f539.10/1/_/styles/colors.css" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <p><img class="editor-inline-macro" src="/plugins/servlet/confluence/placeholder/macro?definition=e3RvY30&amp;locale=zh_CN&amp;version=2" data-macro-name="toc" data-macro-id="aa33b3ad-04a3-4e40-bc8c-e10de05923ca" data-macro-schema-version="1"></p><h1>不使用Flux架构</h1><h2>一. 数据流动方式</h2><p><img class="confluence-embedded-image" src="/download/attachments/7642771/CP9B3DJ8@%5BGRQIBC%7D0SI52Q.png?version=1&amp;modificationDate=1484276279000&amp;api=v2" data-image-src="/download/attachments/7642771/CP9B3DJ8@%5BGRQIBC%7D0SI52Q.png?version=1&amp;modificationDate=1484276279000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="7642938" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="CP9B3DJ8@[GRQIBC}0SI52Q.png" data-base-url="http://www.finedevelop.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="7642771" data-linked-resource-container-version="6" title="3.2 研发测试组 > Flux与Redux学习 > CP9B3DJ8@[GRQIBC}0SI52Q.png" data-location="3.2 研发测试组 > Flux与Redux学习 > CP9B3DJ8@[GRQIBC}0SI52Q.png" data-image-height="184" data-image-width="324"></p><h3>分析过程</h3><ul><li>用户访问页面，执行交互行为（例如：点击）。                                             view视图层</li><li>触发组件内部定义的click事件                                                                         component组件层</li><li>逻辑处理，修改组件状态（setState方法）。                                                 component组件层  </li><li>React自动执行render方法，生成虚拟DOM，执行diff算法，更新视图。</li></ul><h1>Flux</h1><h2>一. Flux介绍</h2><p>      Flux是Facebook提供的一种设计架构思想，<span style="font-size: 14.0px;">但是facebook只提供了Flux的设计思路和原理，<span style="color: rgb(17,17,17);">Flux存在多种实现方式。</span></span></p><h2><span style="color: rgb(17,17,17);">二. 基本概念</span></h2><p><span style="color: rgb(17,17,17);"> </span>Flux将一个应用分成四个部分</p><ul><li><span>View</span>：视图层 </li><li><span>Action</span>（动作）：用户行为的抽象。</li><li><span>Dispatcher</span>（派发器）：用来接收Actions、执行回调函数</li><li><span>Store</span>（数据层）：用来存放应用的状态，一旦发生变动，就提醒Views要更新页面</li></ul><p>Flux将组件分为两类</p><ul><li>纯组件:：纯粹的UI层，组件内没有状态（State），根据外层组件传递的props生成对应视图。</li><li>状态组件：处理纯组件的数据和事件函数。</li></ul><h2>三. 数据流动方式</h2><h1><img class="confluence-embedded-image" src="/download/attachments/7642771/X9KJU%5B%5BSAAQ12MEQ_JAY_%5BK.png?version=1&amp;modificationDate=1484276759000&amp;api=v2" data-image-src="/download/attachments/7642771/X9KJU%5B%5BSAAQ12MEQ_JAY_%5BK.png?version=1&amp;modificationDate=1484276759000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="7642955" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="X9KJU[[SAAQ12MEQ_JAY_[K.png" data-base-url="http://www.finedevelop.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="7642771" data-linked-resource-container-version="6" title="3.2 研发测试组 > Flux与Redux学习 > X9KJU[[SAAQ12MEQ_JAY_[K.png" data-location="3.2 研发测试组 > Flux与Redux学习 > X9KJU[[SAAQ12MEQ_JAY_[K.png" data-image-height="225" data-image-width="482"></h1><h3>分析过程</h3><ul><li>用户访问页面，执行交互行为（例如：点击）。                                                 view视图层</li><li>触发纯组件内部定义的click事件                                                                          纯组件component</li><li>子组件（纯组件）委托父组件（状态组件）处理点击事件的逻辑。                     状态组件component</li><li>将交互行为（点击）抽象为动作。                                                                      Action层</li><li>派发器接收动作，执行该动作对应的回调函数。                                                 Dispatcher层</li><li>修改数据，并发出一个&quot;<code>change&quot;事件,调用该事件注册的所有回调函数</code>。             Store层</li><li>状态组件监听&quot;change&quot;<code>事件，更新组件状态，并将状态传递到纯组件中。    状态组件component</code></li><li>React自动执行render方法，生成虚拟DOM，执行diff算法，更新视图。</li></ul><p>参考文章：<a href="http://www.ruanyifeng.com/blog/2016/01/flux.html">http://www.ruanyifeng.com/blog/2016/01/flux.html</a></p><h1>Redux</h1><h2>一. Redux介绍</h2><p>Redux是Flux架构思想的一种实现方式。</p><h2>二. 基本概念</h2><ol><li>Store (数据容器) <br /><p>Store 是保存数据的容器。一个应用只能有一个 Store。</p></li><li>State(所有数据)  <br /><p><span style="color: rgb(51,51,51);">State与View一一对应。只要State 相同，View 就相同。</span></p></li><li><p><span style="color: rgb(51,51,51);">Action(动作)</span></p><p><span style="color: rgb(51,51,51);">Action 是一个对象，是对用户行为的抽象。<br /></span></p></li><li><p><span style="color: rgb(51,51,51);">Reducer </span></p><p><span style="color: rgb(51,51,51);">Reducer 是一个函数，它接受 Action 和当前 State 作为参数，返回一个新的 State。</span></p></li></ol><h2>三.Store数据容器</h2><h3>Store数据容器的创建</h3><p><span style="color: rgb(51,51,51);">      import { createStore } from 'redux';<br />      const store = createStore(reducer); //传入reducer函数，创建Store数据容器</span></p><h3>Store数据容器的三个方法</h3><p> </p><ul><li><span style="color: rgb(51,51,51);">store.getState();                //得到state数据</span></li><li><span style="color: rgb(51,51,51);">store.dispatch(action);        //<span>更新数据</span></span></li><li><span style="color: rgb(51,51,51);">store.SubScribe(fn);         //<span>监听数据变化</span></span></li></ul><h2>四. 数据流动方式</h2><p><img class="confluence-embedded-image" src="/download/attachments/7642771/BDY_%7DU%60%7BLP5%257EUVP%5DK%5B%7B@C.png?version=1&amp;modificationDate=1484279099000&amp;api=v2" data-image-src="/download/attachments/7642771/BDY_%7DU%60%7BLP5%257EUVP%5DK%5B%7B@C.png?version=1&amp;modificationDate=1484279099000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="7643026" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="BDY_}U`{LP5%7EUVP]K[{@C.png" data-base-url="http://www.finedevelop.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="7642771" data-linked-resource-container-version="6" title="3.2 研发测试组 > Flux与Redux学习 > BDY_}U`{LP5%7EUVP]K[{@C.png" data-location="3.2 研发测试组 > Flux与Redux学习 > BDY_}U`{LP5%7EUVP]K[{@C.png" data-image-height="219" data-image-width="564"></p><h3>分析过程</h3><p> </p><div><ul><li>用户访问页面，执行交互行为（例如：点击）。                                                 view视图层</li><li>触发纯组件内部定义的click事件                                                                          纯组件component</li><li>子组件（纯组件）委托父组件（状态组件）处理点击事件的逻辑。                     状态组件component</li><li>将交互行为（点击）抽象为动作。                                                                      Action层</li></ul><p>----------------以上步骤与Flux部分相同------------------------------------------------------------------------------------</p><ul><li>数据容器执行store.dispatch(action)方法                                                            Dispatch层</li><li>Reducer根据旧状态和接收到的action生成新状态。                                           Reducer层</li><li>state数据变化，自动执行store.SubScribe(fn);设置的监听函数fn                        监听函数</li><li><span>更新组件状态，并将状态传递到纯组件中。</span>                                                        状态组件component                              </li><li>React自动执行render方法，生成虚拟DOM，执行diff算法，更新视图。</li></ul><p>参考文章: <a href="http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_one_basic_usages.html">http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_one_basic_usages.html</a></p><h1>其他</h1><h2>学习过程中遇到的问题</h2><ol><li>在具体项目中如何构建state状态树。</li><li>组件之间关系比较复杂、层级比较多时如何使用Flux构建项目。 </li><li>如何处理异步操作。</li></ol><h2>其他参考文章 </h2><p><a href="http://www.ruanyifeng.com/blog/2016/09/react-technology-stack.html">http://www.ruanyifeng.com/blog/2016/09/react-technology-stack.html</a></p><p><a href="http://www.redux.org.cn/">http://www.redux.org.cn/</a></p><p><a href="http://cn.redux.js.org/index.html"><br /><br /></a></p></div><p><span style="color: rgb(17,17,17);"><br /></span></p><p><span style="font-size: 14.0px;"><span style="color: rgb(17,17,17);"><br /></span></span></p><p> </p>
        <p>&nbsp;</p>
    </body>
</html>
